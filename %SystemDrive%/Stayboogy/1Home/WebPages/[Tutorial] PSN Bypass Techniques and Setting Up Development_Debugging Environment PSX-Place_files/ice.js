function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";try{var appNamespace="$ice";if(console.log("window[appNamespace]",window[appNamespace]),window[appNamespace])return;var what=function(e){return"undefined"==typeof e||null===e?"undefined":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},$extend=function(e){if("object"!=this.$root.what(e))return void this.$root.logger.warn("source is not an object",this);var t;for(t in e)this[t]=e[t];return this},$fn=function(e,t){if(this&&this!=window){if("function"!=this.$root.what(t))return void this.$root.logger.warn(e+" is not a function",this);this[e]=t,t.$id=e,t.$parent=this,t.$root=this.$root}},$create=function e(t,n,o,i){$root&&!$root.iceResponseTime&&($root.iceResponseTime=Date.now());var r,s,a=what(n),d=this||window;if(!/object|function/.test(a))return null;if(d[t])r=d[t];else{var l=function(){var n=function(){};return n.prototype.$id=t,n.prototype.$parent=d,n.prototype.$root=d==window?null:d.$root,n.prototype.$create=e,n.prototype.$extend=$extend,n.prototype.$fn=$fn,i&&d!=window&&d.$root.event&&(n.prototype.bind=d.$root.event.bind,n.prototype.unbind=d.$root.event.unbind,n.prototype.fire=d.$root.event.fire),n};d==window?(Object.defineProperties(window,_defineProperty({},t,{value:new(new l),writable:!0})),r=d[t]):r=d[t]=new(new l)}"object"==what(o)&&r.$extend(o);for(s in n)if(n.hasOwnProperty(s))switch(what(n[s])){case"function":r.$fn(s,n[s]);break;case"object":r.$create(s,n[s]);break;default:r[s]=n[s]}return r},$root=$create(appNamespace,{},null,!1);$root.what=what,$root.$root=$root,$root.$extend({$fn:$fn});var $infolinks=$create("$infolinks",{},null,!0);$infolinks.what=what,$infolinks.$root=$infolinks,$infolinks.$create=$create,$infolinks.$extend=$extend,$infolinks.$extend({$fn:$fn}),$root.$create("plugins",{},{},!0);var loggly=$root.$create("loggly",{logglyTracker:function(){this.key=!1,this.sendConsoleErrors=!1,this.tag="jslogger",this.useDomainProxy=!1},init:function(){var e=this;switch(this.logglyTracker.prototype={setSession:function(t){t?(this.session_id=t,this.setCookie(this.session_id)):this.session_id||(this.session_id=this.readCookie(),this.session_id||(this.session_id=e.uuid(),this.setCookie(this.session_id)))},push:function(t){var n="undefined"==typeof t?"undefined":_typeof(t);if(t&&("object"===n||"string"===n)){var o=this;if("string"===n)t={text:t};else{if(t.logglyCollectorDomain)return void(o.logglyCollectorDomain=t.logglyCollectorDomain);if(void 0!==t.sendConsoleErrors&&e.setSendConsoleError(o,t.sendConsoleErrors),t.tag&&e.setTag(o,t.tag),t.useDomainProxy&&e.setDomainProxy(o,t.useDomainProxy),t.logglyKey)return void e.setKey(o,t.logglyKey);if(t.session_id)return void e.setSession(t.session_id)}o.key&&o.track(t)}},track:function(e){e.sessionId=this.session_id,console.log(e);try{var t=new XMLHttpRequest;t.open("POST",this.inputUrl,!0),t.setRequestHeader("Content-Type","text/plain"),t.send(JSON.stringify(e))}catch(n){window&&window.console&&"function"==typeof window.console.log&&(console.log("Failed to log to loggly because of this exception:\n"+n),console.log("Failed log data:",e))}},readCookie:function(){var t=document.cookie,n=t.indexOf(e.settings.LOGGLY_SESSION_KEY);if(n<0)return!1;var o=t.indexOf(";",n+1);return o=o<0?t.length:o,t.slice(n+e.settings.LOGGLY_SESSION_KEY_LENGTH,o)},setCookie:function(t){document.cookie=e.settings.LOGGLY_SESSION_KEY+"="+t}},this.logLevel()){case"error":this.warnLog=function(){},this.traceLog=function(){};break;case"warn":this.traceLog=function(){};break;case"info":case"true":case"log":break;case"loggly":case null:loggly=new this.logglyTracker,loggly.push({logglyKey:"c2567968-6d7d-4427-a7bb-eaab4a243135",sendConsoleErrors:!1,tag:"ice"}),this.errorLog=function(){var e=(arguments[0]?arguments[0].stack:"no argument").replaceAll("https://resources.infolinks.com/js","");window.$iceboot&&(e=e.replaceAll("/"+window.$iceboot,"")),loggly.push({args:arguments,stack:e,url:window.location.href,ua:window.navigator.userAgent,v:window.$iceboot?window.$iceboot.version:"unknown"})},this.deprecatedLog=function(){var e=(arguments[0]?arguments[0].stack:"no argument").replaceAll("https://resources.infolinks.com/js","");window.$iceboot&&(e=e.replaceAll("/"+window.$iceboot,"")),loggly.push({deprecatedError:arguments[0].deprecatedError?arguments[0].deprecatedError:arguments,stack:e,url:window.location.href,ua:window.navigator.userAgent,v:window.$iceboot?window.$iceboot.version:"unknown"})},this.warnLog=function(){},this.traceLog=function(){}}},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},setKey:function(e,t){e.key=t,e.setSession(),this.setInputUrl(e)},setTag:function(e,t){e.tag=t},setDomainProxy:function(e,t){e.useDomainProxy=t,this.setInputUrl(e)},setSendConsoleError:function(e,t){if(e.sendConsoleErrors=t,e.sendConsoleErrors===!0){var n=window.onerror;window.onerror=function(t,o,i,r){e.push({category:"BrowserJsException",exception:{message:t,url:o,lineno:i,colno:r}}),n&&"function"==typeof n&&n.apply(window,arguments)}}},setInputUrl:function(e){1==e.useDomainProxy?e.inputUrl=this.settings.LOGGLY_INPUT_PREFIX+window.location.host+"/"+this.settings.LOGGLY_PROXY_DOMAIN+"/inputs/"+e.key+"/tag/"+e.tag:e.inputUrl=this.settings.LOGGLY_INPUT_PREFIX+(e.logglyCollectorDomain||this.settings.LOGGLY_COLLECTOR_DOMAIN)+"/inputs/"+e.key+"/tag/"+e.tag},traceLog:function(){console.info(arguments)},warnLog:function(){console.warn(arguments)},errorLog:function(){console.error(arguments)},deprecatedLog:function(){console.error(arguments)},logLevel:function(){var e=window.location.href,t=new RegExp("[?&]il.trce(=([^&#]*)|&|#|$)"),n=t.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"info":null}},{settings:{LOGGLY_INPUT_PREFIX:"http"+("https:"===document.location.protocol?"s":"")+"://",LOGGLY_COLLECTOR_DOMAIN:"logs-01.loggly.com",LOGGLY_SESSION_KEY:"logglytrackingsession",LOGGLY_SESSION_KEY_LENGTH:"logglytrackingsession".length+1,LOGGLY_PROXY_DOMAIN:"loggly",loggly:null}},!0);loggly.init(),$ice.versionFile="ice";var event=$root.$create("event",{bind:function(e){var t,n,o,i,r=this.$root,s=r.event,a=null;if(e.event?e.listener||(a=s.msgs.ml):a=s.msgs.me,a)return r.logger.error(a,this),!1;e.$root=r,s._listeners[e.event]||(s._listeners[e.event]=[]),t=s._listeners[e.event];var d=r.what(e.listener);if("function"==d)t[t.length]=e;else if("object"==d)for(n in e.listener){this!=s&&this.$fn(n,e.listener[n]),o={};for(i in e)o[i]=e[i];o.listener=e.listener[n],t[t.length]=o}return!0},unbind:function(e,t){var n,o,i=this.$root,r=i.event,s=r._listeners[e];if("array"!=i.what(s))return!1;if(t)for(n=0,o=s.length;n<o;n++)s[n].listener===t&&s.splice(n--,1);else delete r._listeners[e];return!0},fire:function(e,t,n){var o,i,r,s,a,d=this.$root,l=d.event._listeners[e],c="undefined"!=d.what(t);if(!e||d.event.disabled||l&&l.disabled||"array"!=d.what(l))return!1;for(var u=0,h=l.length;u<h;u++){if(r=l[u],c&&(r.data=t),o=r.listener,i=o.$parent||window,i==window&&d.logger.error("Probable Error: Context is window object. event: "+e,this.fire),a=this.msg("Fire",e,o.$id,t),s=n&&"number"==d.what(n)?n:r.delay)return setTimeout(function(){var e=d.utils.object.clone(r);return function(){d.logger.log(a,o),o.call(i,e)}}(),s);d.logger.log(a,o),o.call(i,r)}},repeat:function(e,t,n,o){var i,r,s,a,d=this.$root,l=d.event._listeners[e],c="undefined"!=d.what(n);if(!e||d.event.disabled||l&&l.disabled||"array"!=d.what(l)||!t||"number"!=d.what(t))return!1;o&&"number"==d.what(o)||(o=null);for(var u=0,h=l.length;u<h;u++){if(s=l[u],s.repeat||s.delay)return;c&&(s.data=n),i=s.listener,r=i.$parent||window,s.interval=t,s.counter=0,a=function(){s.counter||d.logger.log(d.event.msg("Repeat",e,i.$id,n,{interval:t,delay:o}),i),s.counter++,i.call(r,s)},o?s.delay=setTimeout(function(){s.repeat=setInterval(a,t)},o):s.repeat=setInterval(a,t)}},stop:function(e){var t,n,o=this.$root,i=o.event._listeners[e];if(!e||!i)return!1;for(var r=0,s=i.length;r<s;r++)n=i[r],clearInterval(n.repeat),clearTimeout(n.delay),delete n.repeat,delete n.delay,t=n.listener,o.logger.log(o.event.msg("Stop",e,t.$id,null,{repetitions:n.counter}),t),n.counter=0},disable:function(e){this.$root.event.able(e,!0)},enable:function(e){this.$root.event.able(e,!1)},able:function(e,t){var n,o=this.$root;if(e)for("string"==o.what(e)&&(e=[e]),n=0;n<e.length;n++)o.event._listeners[e].disabled=t;else o.event.disabled=t},msg:function(e,t,n,o,i){return[e," { event:'",t,"', listener:'",n||"Anonymous","'",i?", "+this.data2str(i):"",o?", "+this.data2str(o):"","} "].join("")},data2str:function(e){var t,n,o=[];if("object"!=this.$root.what(e))return"";for(t in e)n="'"+(null==e[t]?"null":e[t].toString?this.$root.utils.string.truncate(e[t].toString(),50,"..."):"[Unknown Object]")+"'",o[o.length]=[t,n].join(":");return o.join(", ")}},{_listeners:{},msgs:{me:"Error: Missing event.",ml:"Error: Misssing listener."}},!1);event.$create("dom",{bind:function(e,t){function n(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}var o,i,r,s,a=this.$root,d=a.settings.nodeTypes,l=null;if(!e||e.nodeType!=d.ELEMENT&&e.nodeType!=d.DOCUMENT&&e!=window?l=this.msgs.mbe:t.event?t.listener||(l=this.$parent.msgs.ml):l=this.$parent.msgs.me,l)return a.logger.error(l,this),!1;if(e.$iceId||(e.$iceId=++this.elementBinder),t.element=e,t.$root=a,"function"==a.what(t.listener))t.listener={a:t.listener};else if("object"!=a.what(t.listener))return;for(o in t.listener){i={};for(r in t)i[r]=t[r];i.listener=t.listener[o],e.addEventListener&&/mouseenter|mouseleave/.test(i.event)&&(i.simEvent=i.event,i.event=i.event.replace(/enter/,"over").replace(/leave/,"out")),s=function(){var e=a.utils.object.clone(i);return function(t){try{if(t||(t=window.event),/mouseenter|mouseleave/.test(e.simEvent)&&t.relatedTarget&&this==t.relatedTarget||n(this,t.relatedTarget))return;e.domEvent=t,a.event.dom.fire(e)}catch(o){a.loggly.errorLog(o,"__event bind unexpected error in handler for event ",e.event)}}}(),e.addEventListener?e.addEventListener(i.event,s,!1):e.attachEvent&&e.attachEvent("on"+i.event,s);var c=e.$iceId,u=this._listeners;u[c]||(u[c]={}),u[c][i.event]||(u[c][i.event]=[]),a.utils.array.push(u[c][i.event],{listener:s,original:i.listener})}return!0},unbind:function(e,t,n){var o,i=this.$root,r=i.settings.nodeTypes;if(!e||!e.$iceId||e.nodeType!=r.ELEMENT&&e.nodeType!=r.DOCUMENT&&e!=window)return void i.logger.error(this.msgs.mbe,this);var s=e.$iceId,a=i.event.dom._listeners[s];if(a&&a[t]){for(o=0;o<a[t].length;o++)a[t][o].original&&a[t][o].original.name==n.name&&(e.removeEventListener?e.removeEventListener(t,a[t][o].listener,!1):e.detachEvent&&e.detachEvent("on"+t,a[t][o].listener),a[t].splice(o--,1));return 0==a[t].length&&delete a[t],!0}},unbindAll:function(e){var t,n=this.$root,o=n.settings.nodeTypes;if(!e||!e.$iceId||e.nodeType!=o.ELEMENT&&e.nodeType!=o.DOCUMENT&&e!=window)return void n.logger.error(this.msgs.mbe,this);var i=e.$iceId,r=n.event.dom._listeners[i];if(r){for(var s in r){for(t=0;t<r[s].length;t++)e.removeEventListener?e.removeEventListener(s,r[s][t].listener,!1):e.detachEvent&&e.detachEvent("on"+s,r[s][t].listener),r[s].splice(t--,1);0==r[s].length&&delete r[s]}return!0}},fire:function(e){var t,n=this.$root,o=e.listener,i=o.$parent||window;t=n.event.msg("Fire",e.event,o.$id,e.data,{element:e.element.id||e.element.tagName}),e.delay&&"number"==n.what(e.delay)?setTimeout(function(){n.logger.log(t,o),o.call(i,e)},e.delay):(n.logger.log(t,o),o.call(i,e))}},{_listeners:{},elementBinder:0,msgs:{mbe:"Error: Missing or bad element."}},!1),$root.$create("logger",{log:function(e,t,n){n||(n="log");var o={message:e,type:n,time:(new Date).getTime(),context:t};this.history[this.history.length]=o,"console"==this.output&&"undefined"!=this.$root.what(window.console)&&console[n]([this.$root.utils.date.int2str(o.time),e].join(" "),this.descent(t,!0))},info:function(e,t){this.log(e,t,"info")},warn:function(e,t){this.log(e,t,"warn")},error:function(e,t){this.log(e,t,"error"),this.errorReporting>=Math.ceil(100*Math.random())&&this.$root.event.fire("sendErrorReport",{msg:e})},descent:function(e,t){var n=[];for(t&&e&&e.$id&&(n[0]=e);e&&e.$root&&e!=window;)n.unshift(e.$id),e=e.$parent;return n},describe:function(e){var t,n,o,i=[];for(t=0,n=this.history.length;t<n;t++)o=this.history[t],e&&e!=o.type||(i[i.length]=[this.$root.utils.date.int2str(o.time),o.message,this.descent(o.context,!1).join(".")].join(" "));return i}},{history:[],output:"none",errorReporting:-1}),$root.$create("browser",new function(){var e="0.7.19",t="",n="?",o="function",i="object",r="string",s="major",a="model",d="name",l="type",c="vendor",u="version",h="architecture",p="console",m="mobile",g="tablet",f="smarttv",v="wearable",b="embedded",w={extend:function(e,t){var n={};for(var o in e)t[o]&&t[o].length%2==0?n[o]=t[o].concat(e[o]):n[o]=e[o];return n},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return("undefined"==typeof e?"undefined":_typeof(e))==r?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},y={rgx:function(e,t){for(var n,r,s,a,d,l,c=0;c<t.length&&!d;){var u=t[c],h=t[c+1];for(n=r=0;n<u.length&&!d;)if(d=u[n++].exec(e))for(s=0;s<h.length;s++)l=d[++r],a=h[s],("undefined"==typeof a?"undefined":_typeof(a))==i&&a.length>0?2==a.length?_typeof(a[1])==o?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3==a.length?_typeof(a[1])!=o||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):void 0:this[a[0]]=l?a[1].call(this,l,a[2]):void 0:4==a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):void 0):this[a]=l?l:void 0;c+=2}},str:function(e,t){for(var o in t)if(_typeof(t[o])==i&&t[o].length>0){for(var r=0;r<t[o].length;r++)if(w.has(t[o][r],e))return o==n?void 0:o}else if(w.has(t[o],e))return o==n?void 0:o;return e}},x={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[d,u],[/(opios)[\/\s]+([\w\.]+)/i],[[d,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[d,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[d,u],[/(konqueror)\/([\w\.]+)/i],[[d,"Konqueror"],u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[d,"IE"],u],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[d,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[d,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[d,"Puffin"],u],[/(focus)\/([\w\.]+)/i],[[d,"Firefox Focus"],u],[/(opt)\/([\w\.]+)/i],[[d,"Opera Touch"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[d,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[d,"WeChat"],u],[/(brave)\/([\w\.]+)/i],[[d,"Brave"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[d,u],[/(QQ)\/([\d\.]+)/i],[d,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[d,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[d,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[d,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[d],[/(LBBROWSER)/i],[d],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[d,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[d,u],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[d,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,u],[/(dolfin)\/([\w\.]+)/i],[[d,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[d,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[d,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[d,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[d,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,d],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[d,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[u,y.str,x.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,w.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,c,[l,g]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[l,g]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[l,g]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[c,"Amazon"],[l,g]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,y.str,x.device.amazon.model],[c,"Amazon"],[l,m]],[/android.+aft([bms])\sbuild/i],[a,[c,"Amazon"],[l,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[l,m]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[l,m]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[l,m]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[l,m]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[c,"Asus"],[l,g]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[l,g]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[c,"Sony"],[l,m]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[l,p]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[l,p]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[l,p]],[/(sprint\s(\w+))/i],[[c,y.str,x.device.sprint.vendor],[a,y.str,x.device.sprint.model],[l,m]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,a,[l,g]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[a,/_/g," "],[l,m]],[/(nexus\s9)/i],[a,[c,"HTC"],[l,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[c,"Huawei"],[l,m]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[l,m]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[l,p]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[l,m]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[l,m]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[l,g]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,w.trim],[a,w.trim],[l,f]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[l,f]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[l,f]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[l,g]],[/smart-tv.+(samsung)/i],[c,[l,f],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[l,m]],[/sie-(\w*)/i],[a,[c,"Siemens"],[l,m]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],a,[l,m]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[c,"Acer"],[l,g]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[c,"LG"],[l,g]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[l,g]],[/(lg) netcast\.tv/i],[c,a,[l,f]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[c,"LG"],[l,m]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[l,g]],[/linux;.+((jolla));/i],[c,a,[l,m]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[l,v]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,a,[l,m]],[/crkey/i],[[a,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[l,v]],[/android.+;\s(pixel c)[\s)]/i],[a,[c,"Google"],[l,g]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[a,[c,"Google"],[l,m]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[l,m]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[l,g]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[c,"Meizu"],[l,g]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],a,[l,m]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[c,"OnePlus"],[l,m]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[c,"RCA"],[l,g]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[c,"Dell"],[l,g]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[c,"Verizon"],[l,g]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],a,[l,g]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[c,"NuVision"],[l,g]],[/android.+;\s(k88)\sbuild/i],[a,[c,"ZTE"],[l,g]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[c,"Swiss"],[l,m]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[c,"Swiss"],[l,g]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[c,"Zeki"],[l,g]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],a,[l,g]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[c,"Insignia"],[l,g]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[c,"NextBook"],[l,g]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],a,[l,m]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],a,[l,m]],[/android.+;\s(PH-1)\s/i],[a,[c,"Essential"],[l,m]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[c,"Envizen"],[l,g]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,a,[l,g]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[c,"MachSpeed"],[l,g]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,a,[l,g]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[c,"Rotor"],[l,g]],[/android.+(KS(.+))\s+build/i],[a,[c,"Amazon"],[l,g]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,a,[l,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,w.lowerize],c,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[l,f]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[u,y.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[u,y.str,x.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[d,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[d,"Symbian"],u],[/\((series40);/i],[d],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[d,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[d,u],[/(haiku)\s(\w+)/i],[d,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[d,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,u]]},I=function k(e,n){if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&(n=e,e=void 0),!(this instanceof k))return new k(e,n).getResult();var o=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:t),i=n?w.extend(C,n):C;this.getBrowser=function(){var e={name:void 0,version:void 0};return y.rgx.call(e,o,i.browser),e.major=w.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return y.rgx.call(e,o,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return y.rgx.call(e,o,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return y.rgx.call(e,o,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return y.rgx.call(e,o,i.os),e};var r=this;return this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU(),getDevice:function(){return"tablet"===r.getDevice().type?"t":"mobile"===r.getDevice().type?"m":"p"},getName:function(){return r.getBrowser().name.replace(/\s+/g,"")},getVersion:function(){return r.getBrowser().version},detectCSSFeature:function(e){var t=!1,n="Webkit Moz ms O".split(" "),o=document.createElement("div"),i=null;if(e=e.toLowerCase(),void 0!==o.style[e]&&(t=!0),0==t){i=e.charAt(0).toUpperCase()+e.substr(1);for(var r=0;r<n.length;r++)if(void 0!==o.style[n[r]+i]){t=!0;break}}return t},getOS:function(){return r.getOS().name},getOSVersion:function(){return r.getOS().version},getEngine:function(){return r.getEngine().name},IE:r.IE(),Firefox:r.Firefox()}},this.Firefox=function(){if("Firefox"===r.getBrowser().name)return r.getBrowser().version},this.IE=function(){if("IE"===r.getBrowser().name)return r.getBrowser().version},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this};return I.VERSION=e,I.BROWSER={NAME:d,MAJOR:s,VERSION:u},I.CPU={ARCHITECTURE:h},I.DEVICE={MODEL:a,VENDOR:c,TYPE:l,CONSOLE:p,MOBILE:m,SMARTTV:f,TABLET:g,WEARABLE:v,EMBEDDED:b},I.ENGINE={NAME:d,VERSION:u},I.OS={NAME:d,VERSION:u},I()});var utils=$root.$create("utils",{VeST:function(e,t,n){var o,i,r=this.$root,s=this.VeST;if((i=s.cache)||(i=s.cache={},s.encQ=function(e){return e.split("'").join("\t")},s.decQ=function(e){return e.split("\t").join("'")}),n&&i[n])o=i[n];else{e=e.replace(/<%\-\-[\s\S]*?\-\-%>/g,"");var a=e.replace(/[\r\t\n]/g," ").replace(/<%.*?%>/g,s.encQ).replace(/'/g,"\\'").replace(/<%.*?%>/g,s.decQ).replace(/<%=(.*?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('");a=["var p=[];with(obj||{}){p.push('",a,"');}return p.join('');"].join(""),o=new Function("obj",a),n&&(i[n]=o)}return"object"==r.what(t)&&(n&&(t.$id=n),t.$root=r),o(t)},doRectsOverlap:function(e,t){var n;return t[0]<e[0]&&(n=e,e=t,t=n),!(e[2]<t[0]||e[0]>t[2])&&(t[1]<e[1]&&(n=e,e=t,t=n),!(e[3]<t[1]||e[1]>t[3]))}});utils.$create("number",{get:function(e){return this.counters[e]},next:function(e,t){return"undefined"==this.$root.what(this.counters[e])?this.counters[e]="number"==this.$root.what(t)?t:0:this.counters[e]++,this.counters[e]}},{counters:{}}),utils.$create("googleads",{getGoogleAds:function(e){var t,n=this.$root,o=[];return(t=window.adsbygoogle||[]).onload=function(){[].forEach.call(document.querySelectorAll("ins, .adsbygoogle"),function(e){o.push(e)}),n.event.fire(e,{googleAds:o})},o},elementsOverlap:function(e,t){for(var n=[],o=t.getBoundingClientRect(),i=0;e&&i<e.length;i++){var r=e[i].getBoundingClientRect(),s=!(r.top>o.bottom||r.right<o.left||r.bottom<o.top||r.left>o.right);s&&n.push(e[i])}return n},simulateClick:function(e,t){var n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});!e.dispatchEvent(n)}}),utils.$create("gpt",{destroySlots:function(e){var t=this;if(window.googletag&&window.googletag.destroySlots){var n=window.googletag.destroySlots;if(window.googletag.destroySlots=function(e){return t.destroyIceProducts(e),n(e)},window.googletag.pubads){var o=window.googletag.pubads().refresh;window.googletag.pubads().refresh=function(e){return t.destroyIceProducts(e),o(e)}}}},destroyIceProducts:function(e){var t=this.$root;if(t.products.inplace)if(e){for(var n=0;n<e.length;n++)if(e[n].getSlotId()){t.event.fire("destroyInplace",{id:e[n].getSlotId().getName()});break}}else t.event.fire("destroyInplace");if(t.settings.dfpSlot)if(e){for(var n=0;n<e.length;n++)if(e[n].getSlotId()&&t.settings.dfpSlot==e[n].getSlotId().getName()){t.event.fire("destroy",{id:e[n].getSlotId().getName()});break}}else t.event.fire("destroy")},getSlotName:function(e){return""}}),utils.$create("image",{preLoadImage:function(e,t){var n=window.$ice.$root;t=t||1e3;var o,i=!1,r=new Image;r.onerror=r.onabort=function(){try{if(!i)return clearTimeout(o),!1}catch(e){n.loggly.errorLog(e,"_utils preLoadImage onerror unexpected error in handler for event 'onerror' or 'onabort'")}},r.onload=function(){try{if(!i)return clearTimeout(o),!0}catch(e){n.loggly.errorLog(e,"_utils preLoadImage onload unexpected error in handler for event 'onload' on img")}},r.src=e,o=setTimeout(function(){return i=!0,r.src="//!!!!/errorOnLoad.jpg",!1},t)}}),utils.$create("string",{capitalize:function(e){var t=e.split(/\s+/);if(t.length>2)t[0]=t[0].charAt(0).toUpperCase()+t[0].slice(1);else for(var n=0,o=t.length;n<o;++n)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")},lpad:function(e,t,n){return new Array(t+1-e.toString().length).join(n||"0")+e},qw:function(e){return this.trim(e).split(/\s+/)},toObject:function(e,t,n){if(e.indexOf("=")==-1)return null;0==e.indexOf("?")&&(e=e.substring(1));for(var o,i={},r=e.split("&"),s=0,a=r.length;s<a;s++)o=r[s].split("="),2==o.length&&(n&&(o[0]=decodeURIComponent(o[0]),o[1]=decodeURIComponent(o[1])),i[o[0]]=o[1]);return"undefined"!=this.$root.what(t)?i[t]:i},stringToObject:function(e){var t,n,o={};(e.indexOf("{")||e.indexOf("}"))&&(e=e.replace(/[{}]/g,"")),t=e.split(",");for(var i=0,r=t.length;i<r;i++)n=t[i].split(":"),o[n[0]]=n[1];return o},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},replaceAll:function(e,t,n){return e.split(t).join(n)},truncate:function(e,t,n){return e.length<=t?e:e.substring(0,t)+(n||"")},truncateToChar:function(e,t,n,o){
var i=e.length<=t?e:e.substring(0,t);return i.length<e.length&&(i=i.substr(0,i.lastIndexOf(n))+(o||"")),i},parseURL:function(e){var t,n,o,i={},r=0,s=0;if(null==e||0==e.length)return i;switch(e.indexOf("://")!=-1?(r=e.indexOf("://"),s=r+3):e.startsWith("tel:")&&(r=3,s=r+1),i.protocol=e.substr(0,r),t=e.substr(s,e.length),n=t.indexOf("/"),n=n==-1?t.length:n,i.domain=t.substr(0,n),i.path=n==-1||n+1==t.length?null:t.substr(n+1,t.length),o=i.domain.split("."),o.length){case 2:i.subdomain=null,i.host=o[0],i.tld=o[1];break;case 3:i.subdomain=o[0],i.host=o[1],i.tld=o[2];break;case 4:i.subdomain=o[0],i.host=o[1],i.tld=o[2]+"."+o[3]}return i.parent_domain=i.host+"."+i.tld,i}}),utils.$create("array",{clone:function t(e,n){var o,i,t=[],r=this.$root;for(o=0,i=e.length;o<i;o++)n&&/object|array/.test(r.what(e[o]))&&(!this.cloneDepth||this.cloneDepth<10)?(this.cloneDepth||(this.cloneDepth=0),this.cloneDepth++,t[o]="object"==r.what(e[o])?this.$parent.object.clone(e[o],n):this.clone(e[o],n)):t[o]=e[o];return delete this.cloneDepth,t},concat:function(){for(var e=[],t=0,n=arguments.length;t<n;t++)for(var o=0,i=arguments[t].length;o<i;o++)e[e.length]=arguments[t][o];return e},discard:function(e,t){for(var n=e.length-1;n>=0;n--)e[n]==t&&e.splice(n,1);return e},find:function(e,t){for(var n=0,o=e.length;n<o;n++)if(t(e[n]))return e[n];return null},indexOf:function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]==t)return n;return-1},insertionSort:function(e,t,n){var o,i,r;for(o=1;o<e.length;o++){for(r=e[o],i=o-1;i>=0&&(n?e[i][t]>r[t]:e[i][t]<r[t]);)e[i+1]=e[i],i--;e[i+1]=r}},map:function(e,t){for(var n=0,o=e.length,i=[];n<o;n++)i[n]=t(e[n]);return i},push:function(){if(!(arguments.length<2)){for(var e=arguments[0],t=1;t<arguments.length;t++)e[e.length]=arguments[t];return e}},range:function(e,t){var n,o=[],i=this.$root.what;if("number"==i(e)&&"number"==i(t)&&e<=t)for(n=e;n<=t;n++)o[o.length]=n;return o},sum:function n(e){var t,o,n=0,i=this.$root.what;for(t=0,o=e.length;t<o;t++)"number"==i(e[t])&&(n+=e[t]);return n},times:function(e,t){var n,o=this.range(1,t);for(n=0;n<t;n++)o[n]=e;return o},toObject:function(e,t,n){if(!e)return t;var o=this.$root.what;"array"!=o(e)&&(e=[e]),t||(t={});for(var i,r,s,a=0,d=e.length;a<d;a++)i=e[a],r="string"==o(i)?i:null!=i&&"function"==o(i.toString)?i.toString():null,r&&(s="undefined"==o(n)?r:"function"==o(n)?n(r):n,t[r]=s);return t},uniq:function(e){var t,n;for(t=0;t<e.length-1;t++)for(n=t+1;n<e.length;n++)e[t]===e[n]&&(e.splice(n,1),n--);return e}}),utils.$create("object",{clean:function(e){var t,n,o={},i=this.$root.what;for(t in e)n=e[t],"undefined"!=i(n)&&""!==n&&null!==n&&(o[t]=e[t]);return o},clone:function o(e,t){var n,o={},i=this.$root;for(n in e)t&&/object|array/.test(i.what(e[n]))&&(!this.cloneDepth||this.cloneDepth<10)?(this.cloneDepth||(this.cloneDepth=0),this.cloneDepth++,o[n]="object"==i.what(e[n])?this.clone(e[n],t):this.$parent.array.clone(e[n],t)):o[n]=e[n];return delete this.cloneDepth,o},extend:function(){if(arguments.length<2)return arguments.length?arguments[0]:{};var e,t,n,o,i=this.$root,r=arguments[0];if("object"!=i.what(r))return r;for(t=1,n=arguments.length;t<n;t++)if(o=arguments[t],"object"==i.what(o))for(e in o)r[e]=o[e];return r},hasKey:function(e,t){t instanceof Array||(t=[t]);for(var n=0,o=t.length,i=this.$root.what;n<o;n++)if("undefined"!=i(e[t[n]]))return!0;return!1},keys:function(e){var t=[];for(var n in e)t[t.length]=n;return t},map:function(e,t){var n,o={};for(n in e)o[n]=t(e[n]);return o},renameProperty:function(e,t,n){var o=this.$root;"undefined"!=o.what(e[t])&&(e[n]=e[t],delete e[t])},stringify:function(e,t){var n,o,i,r,s=this.$root,a=s.what(e),d=s.utils.array.push,l=this.stringify;if(t||(t=1),t>10)n='"Exceeded max depth of 10 levels."';else if("undefined"==a)n="undefined";else if("number"==a||"boolean"==a)n=e;else if("string"==a)n=['"',e.replace(/"/g,'\\"'),'"'].join("");else if("function"==a)n='"[Function]"';else if("array"==a){for(n=["["],o=0,i=e.length;o<i;o++)d(n,l.call(this,e[o],t+1),",");n.length>1&&n.pop(),d(n,"]"),n=n.join("")}else if(null===e)n="null";else if("object"==a){n=["{"];for(r in e)d(n,'"',r.replace(/"/g,'\\"'),'":',l.call(this,e[r],t+1),",");n.length>1&&n.pop(),d(n,"}"),n=n.join("")}return n},toQueryString:function(e,t){var n,o,i=[],r=this.$parent.array.push;for(n in e)t?(n=encodeURIComponent(n),o=encodeURIComponent(e[n])):o=e[n],r(i,i.length?"&":"?",n,"=",o);return i.join("")},values:function(e){var t=[];for(var n in e)t[t.length]=e[n];return t},join:function(e,t){var n="";for(var o in e)n+=o+":"+e[o]+t;return"~"==n.substr(n.length-1)&&(n=n.substring(0,n.length-1)),n},size:function i(e){var t,i=0;for(t in e)i++;return i}}),utils.$create("date",{now:function(){return(new Date).getTime()},int2str:function(e){var t=new Date(e),n=this.$parent.string.lpad;return[t.getFullYear(),"-",n(t.getMonth()+1,2),"-",n(t.getDate(),2)," ",n(t.getHours(),2),":",n(t.getMinutes(),2),":",n(t.getSeconds(),2),".",n(t.getMilliseconds(),3)].join("")}}),utils.$create("timer",{start:function(e){var t=this.$root.utils.date.now();return this.times[e]={start:t},t},stop:function(e){var t=this.$root,n=this.times[e];return n&&n.start?(n.stop=t.utils.date.now(),n.delta=n.stop-n.start,n.delta):(t.logger.warn(['Trying to stop timer "',e,'" which does not exist.'].join(""),this.stop),0)},delta:function(e){var t=this.times[e];return t&&t.delta?t.delta:0},poll:function(e){var t=this.times[e];return t&&t.start?(t.stop||this.$root.utils.date.now())-t.start:0},clear:function(e){delete this.times[e]}},{times:{}}),utils.$create("cookie",{afterWWWi:"www"==window.location.hostname.split(".")[0]?4:0,set:function(e,t,n){n=n?"; expires="+("date"==this.$root.what(n)?n.toUTCString():new Date((new Date).getTime()+1e3*n).toUTCString()):"";var o="; domain="+location.hostname.substr(this.afterWWWi,location.hostname.length);return document.cookie=[e,"=",encodeURIComponent(t),n,o,"; path=/"].join(""),!0},has:function(e){return this.$parent.array.indexOf(this.$parent.array.map(document.cookie.split(/;\s*/),function(e){return e.split("=")[0]}),e)>-1},remove:function(e){var t="; domain="+location.hostname.substr(this.afterWWWi,location.hostname.length);return document.cookie=[e,"=;expires=",new Date((new Date).getTime()-6e4).toUTCString(),t,"; path=/"].join(""),!0},get:function(e){var t={};return this.$parent.array.map(document.cookie.split(/;\s*/),function(e){var n=e.split("=");return t[n[0]]=n[1],null}),decodeURIComponent(t[e])||null},getCCP:function(){var e=this.get("usprivacy");if("undefined"!=e)return e}}),utils.$create("storage",{setExpireDate:function(e,t){var n=JSON.parse(localStorage.getItem(e));n.ed=t,localStorage.setItem(e,JSON.stringify(n))},passedExpireDate:function(e){try{var t=JSON.parse(localStorage.getItem(e)),n=(new Date).getTime();return!!(t&&t.ed<n)}catch(o){return}}}),utils.$create("base64",{init:function(e){if(!this.reverseBase64Chars){this.reverseBase64Chars={};for(var t=0,n=this.base64Chars.length;t<n;t++)this.reverseBase64Chars[this.base64Chars[t]]=t}this.base64Str=e,this.base64Count=0},readBase64:function(){if(!this.base64Str)return this.EOI;if(this.base64Count>=this.base64Str.length)return this.EOI;var e=255&this.base64Str.charCodeAt(this.base64Count);return this.base64Count++,e},encodeBase64:function(e){this.init(e);for(var t="",n=new Array(3),o=0,i=!1;!i&&(n[0]=this.readBase64())!=this.EOI;)n[1]=this.readBase64(),n[2]=this.readBase64(),t+=this.base64Chars[n[0]>>2],n[1]!=this.EOI?(t+=this.base64Chars[n[0]<<4&48|n[1]>>4],n[2]!=this.EOI?(t+=this.base64Chars[n[1]<<2&60|n[2]>>6],t+=this.base64Chars[63&n[2]]):(t+=this.base64Chars[n[1]<<2&60],t+="=",i=!0)):(t+=this.base64Chars[n[0]<<4&48],t+="=",t+="=",i=!0),o+=4,o>=76&&(t+="\n",o=0);return t},readReverseBase64:function(){if(!this.base64Str)return this.EOI;for(;;){if(this.base64Count>=this.base64Str.length)return this.EOI;var e=this.base64Str.charAt(this.base64Count);if(this.base64Count++,this.reverseBase64Chars[e])return this.reverseBase64Chars[e];if("A"==e)return 0}},ntos:function(e){return e=e.toString(16),1==e.length&&(e="0"+e),e="%"+e,unescape(e)},decodeBase64:function(e){this.init(e);for(var t="",n=new Array(4),o=!1;!o&&(n[0]=this.readReverseBase64())!=this.EOI&&(n[1]=this.readReverseBase64())!=this.EOI;)n[2]=this.readReverseBase64(),n[3]=this.readReverseBase64(),t+=this.ntos(n[0]<<2&255|n[1]>>4),n[2]!=this.EOI?(t+=this.ntos(n[1]<<4&255|n[2]>>2),n[3]!=this.EOI?t+=this.ntos(n[2]<<6&255|n[3]):o=!0):o=!0;return t}},{EOI:-1,base64Chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),reverseBase64Chars:null,base64Str:"",base64Count:0}),utils.$create("dom",{createDOMFragment:function(e){var t,n,o,i,r,s=this.$root;if(e.tag){var a=e.tag.toLowerCase();if(t=document.createElement(a),"input"==a&&(t.type=e.type||"text"),e.id&&(t.id=e.id),e.cls&&(t.className=e.cls),e.style&&this.element.setStyle(t,e.style),e.attributes)for(n in e.attributes)t.setAttribute(n,e.attributes[n]);if("undefined"!=s.what(e.value)&&(t.value=e.value),"undefined"!=s.what(e.innerHTML)&&(t.innerHTML=e.innerHTML),e.events)for(n in e.events)s.event.dom.bind(t,{event:n,listener:e.events[n]})}else{if(!e.isTextNode||"undefined"==s.what(e.value))return null;t=document.createTextNode(e.value)}if(e.isChild&&(t=e.parent.appendChild(t)),e.tag&&e.children)for("array"!=s.what(e.children)&&(e.children=[e.children]),o=0,i=e.children.length;o<i;o++)r=e.children[o],s.utils.object.extend(r,{isChild:!0,parent:t}),this.createDOMFragment(r);else if(e.tag&&e.childNodes)for(o=0,i=e.childNodes.length;o<i;o++)t.appendChild(e.childNodes[o]);if(!e.isChild&&e.parent){var d="string"==s.what(e.parent)?this.element.$(e.parent):e.parent;e.overwrite&&(d.innerHTML=""),e.before?d.insertBefore(t,e.before):e.after?this.element.insertAfter(t,e.after):d.appendChild(t)}return t},createIframe:function(e){var t=this.createDOMFragment(e);t.src=e.src,t.sandbox=e.sandbox},filterByClass:function(e,t,n){var o=$root,i=o.helpers;return this._filterByClass||(document.getElementsByClassName&&i.isNative(document.getElementsByClassName)?this._filterByClass=function(e,t,n){var o=(n&&n.getElementsByClassName?n:document).getElementsByClassName(e),i=[];t=t?t.toLowerCase():null;for(var r=0,s=o.length;r<s;r++)t&&o[r].tagName.toLowerCase()!=t||(i[i.length]=o[r]);return i}:document.evaluate&&i.isNative(document.evaluate)?this._filterByClass=function(e,t,n){t=t||"*",n=n||document;for(var o,i,r=e.split(" "),s="",a="http://www.w3.org/1999/xhtml",d=document.documentElement.namespaceURI===a?a:null,l=[],c=0,u=r.length;c<u;c++)s+="[contains(concat(' ', @class, ' '), ' "+r[c]+" ')]";try{o=document.evaluate(".//"+t+s,n,d,0,null)}catch(h){o=document.evaluate(".//"+t+s,n,null,0,null)}for(;i=o.iterateNext();)l[l.length]=i;return l}:this._filterByClass=function(e,t,n){t=t||"*",n=n||document;for(var o,i,r=e.split(" "),s=[],a="*"===t&&n.all?n.all:n.getElementsByTagName(t),d=[],l=0,c=r.length;l<c;l++)s[s.length]=new RegExp("(^|\\s)"+r[l]+"(\\s|$)");for(var u=0,h=a.length;u<h;u++){o=a[u],i=!1;for(var p=0,m=s.length;p<m&&(i=s[p].test(o.className),i);p++);i&&(d[d.length]=o)}return d}),this._filterByClass(e,t,n)},findWidestNode:function(){var e,t,n,o,i,r,s=document.body,a=this.$root,d=a.utils.dom,l=d.element,c=0,u=50,h=null;for(e=0,t=s.childNodes.length;e<t;e++)n=s.childNodes[e],n.nodeType==a.settings.nodeTypes.ELEMENT&&l.isVisible(n)&&(i=l.getActualWidth(n),r=l.getActualHeight(n),i>c&&r>u&&(c=i,h={node:n,width:i,height:r}));return h||(o=s,h={node:s,width:d.document.getWidth(),height:d.document.getHeight()}),h},isChild:function(e,t){var n=$root;return"function"==n.what(e.contains)?e.contains(t):16==e.compareDocumentPosition(t)||void 0},getScale:function(e){var t=this.screenAvailDimensions.getWidth(),n=this.innerDimensions.getWidth();return e&&e!=-1?Math.min(t/e,1):n/t},innerDimensions:{getHeight:function(){var e;return e="p"!=this.$root.browser.getDevice()?window.innerHeight:utils.dom.viewportFixed.getHeight()},getWidth:function(){var e;return e="p"!=this.$root.browser.getDevice()?window.innerWidth:utils.dom.viewportFixed.getWidth()}},screenAvailDimensions:{getMultiplier:function(){var e=this.$root.browser.ua,t=e.indexOf("Android")!=-1,n=e.indexOf("AppleWebKit")!=-1,o=e.indexOf("Version")!=-1,i=e.indexOf("Safari")!=-1,r=e.indexOf("Mobile")!=-1,s=e.indexOf("Chrome")==-1;return t&&n&&o&&(i||r)&&s?window.devicePixelRatio||1:1},getHeight:function(){var e=_typeof(window.screen)==Screen?window.screen.availWidth:window.innerWidth,t=_typeof(window.screen)==Screen?window.screen.availHeight:window.innerHeight;return e>t?Math.max(t,e)/this.getMultiplier():Math.min(t,e)/this.getMultiplier()},getWidth:function(){var e=_typeof(window.screen)==Screen?window.screen.availWidth:window.innerWidth,t=_typeof(window.screen)==Screen?window.screen.availHeight:window.innerHeight;return e>t?Math.min(t,e)/this.getMultiplier():Math.max(t,e)/this.getMultiplier()}}}),utils.dom.$create("element",{$:function(e){return document.getElementById(e)},getActualWidth:function(e){var t=this.getStyle(e,"width"),n=parseInt(t,10);return!isNaN(n)&&n>0&&t.match(/px/)?n:e.clientWidth||e.offsetWidth},getActualHeight:function(e){var t=this.getStyle(e,"height"),n=parseInt(t,10);return!isNaN(n)&&n>0&&t.match(/px/)?n:e.clientHeight||e.offsetHeight},getStyle:function(e,t){var n=document.defaultView,o=e.currentStyle||(n&&n.getComputedStyle?n.getComputedStyle(e,null):null)||e.style;return t&&o?o[t]:o},getActualWidthFixed:function(e){var t=this.getStyleFixed(e,"width"),n=parseInt(t,10);return!isNaN(n)&&n>0&&t.match(/px/)?n:e.clientWidth||e.offsetWidth},getActualHeightFixed:function(e){var t=this.getStyleFixed(e,"height"),n=parseInt(t,10);return!isNaN(n)&&n>0&&t.match(/px/)?n:e.clientHeight||e.offsetHeight},getStyleFixed:function(e,t){var n=window,o=(n&&n.getComputedStyle?n.getComputedStyle(e,null):null)||e.currentStyle||e.style;return t&&o?o[t]:o},inHierarchy:function(e,t){do{if(e==t)return!0;e=e.parentNode}while(e);return!1},insertAfter:function(e,t){var n=t.parentNode;return t.nextSibling?n.insertBefore(e,t.nextSibling):n.appendChild(e)},isOnViewport:function(e,t){var n=this.$parent.viewport.getHeight(),o=this.offset(e).top,i=this.getActualHeight(e)+o,r=t||0;return!!this.isVisible(e)&&(i+r<n?100:o+r<n?(n-(o+r))/(i-o)*100:0)},isVisible:function(e){if(!e)return!1;for(;e&&e.tagName&&"body"!=e.tagName.toLowerCase();){var t=this.getStyle(e);if("none"==t.display||"hidden"==t.visibility)return!1;e=e.parentNode}return!0},offset:function(e,t){var n,o=0,i=0,r=this.$root,s=r.utils.dom,a=s.element,d=r.browser,l=document.body||document.documentElement,c="position",u="absolute",h="borderLeftWidth",p="borderTopWidth";if(t||(t=l),e==t)return{left:0,top:0};if(e.getBoundingClientRect&&!t){var m=e.getBoundingClientRect(),g=s.document.getScrollTop(),f=s.document.getScrollLeft();return{left:parseInt(m.left+f,10),top:parseInt(m.top+g,10)}}var v=a.getStyle(e,c)==u;for(n=e;n&&n!=t;){if(o+=n.offsetLeft,i+=n.offsetTop,v||a.getStyle(n,c)!=u||(v=!0),d.Firefox){var b=parseInt(a.getStyle(n,h),10)||0,w=parseInt(a.getStyle(n,p),10)||0;o+=b,i+=w,n!=e&&"visible"!=a.getStyle(n,"overflow")&&(o+=b,i+=w)}n=n.offsetParent}for(d.Safari&&v&&(o-=l.offsetLeft,i-=l.offsetTop),d.Firefox&&!v&&(o+=parseInt(a.getStyle(l,h),10)||0,i+=parseInt(a.getStyle(l,p),10)||0),n=e.parentNode;n&&n!=t;)(!d.Opera||"tr"!=n.tagName.toLowerCase()&&"inline"!=a.getStyle(n,"display"))&&(o-=n.scrollLeft,i-=n.scrollTop),n=n.parentNode;var y=a.getStyle(l);return t==l&&y.position==u&&y.left&&(o-=parseInt(y.left,10)||0),{left:parseInt(o,10),top:parseInt(i,10)}},setStyle:function(e,t){var n,o=this.$root.browser;if(!e)return null;t||(t={});for(n in t)null!=t[n]&&("opacity"!=n&&"cssFloat"!=n||!o.IE?e.style[n]=t[n]:("opacity"==n&&(e.style.filter="alpha(opacity="+Math.ceil(100*parseFloat(t[n]))+")"),"cssFloat"==n&&(e.style.styleFloat=t[n])));return e},getData:function(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},setData:function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n)},hasStyleTransformation:function(e){for(var t,n=this.$root.browser,o=n.Firefox?"MozTransform":n.Chrome||n.Safari?"WebkitTransform":n.IE?"zoom":n.Opera?"OTransform":null;e&&"html"!=e.tagName.toLowerCase();){if(t=this.getStyle(e),t.transform&&"none"!=t.transform||o&&t[o]&&t[o]!=(n.IE?"normal":"none"))return!0;e=e.parentNode}return!1}}),utils.dom.$create("document",{getHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},getWidth:function(){var e=document,t="clientWidth";return Math.max(e.documentElement[t],e.body[t])||0},getScrollTop:function(){var e=document,t="scrollTop";return window.pageYOffset||e.documentElement[t]||e.body[t]||0},getScrollLeft:function(){var e=document,t="scrollLeft";return window.pageXOffset||e.documentElement[t]||e.body[t]||0}}),utils.dom.$create("viewport",{getHeight:function(){var e=this.$root,t=e.browser;if("p"==t.getDevice())return e.utils.dom.viewportFixed.getHeight();var n=document,o=n.documentElement,i="clientHeight";return window.innerHeight||(o?o[i]||n.body[i]||0:0)},getWidth:function(){var e=this.$root,t=e.browser;if("p"==t.getDevice())return e.utils.dom.viewportFixed.getWidth();var n=document,o=n.documentElement,i="clientWidth";return window.innerWidth||(o?o[i]||n.body[i]||0:0)}}),utils.dom.$create("viewportFixed",{getHeight:function(){var e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0];n.clientHeight||e.innerHeight||o.clientHeight;return e.innerHeight&&n.clientHeight?Math.min(e.innerHeight,n.clientHeight):e.innerHeight||n.clientHeight||o.clientHeight},getWidth:function(){var e=window,t=document,n=t.documentElement,o=t.getElementsByTagName("body")[0];n.clientWidth||e.innerWidth||o.clientWidth;return e.innerWidth&&n.clientWidth?Math.min(e.innerWidth,n.clientWidth):e.innerWidth||n.clientWidth||o.clientWidth}}),utils.dom.$create("style",{getStylesheet:function(){var e=this.$root.settings;if(e.stylesheet)return e.stylesheet;var t=document.getElementsByTagName("head");t=t.length?t[0]:document.body;var n=document.createElement("style");return n.type="text/css",e.stylesheet=t.appendChild(n)},addRule:function(e,t){var n=this.getStylesheet();n.styleSheet&&n.styleSheet.addRule?n.styleSheet.addRule(e,t):n.sheet&&n.sheet.insertRule&&n.sheet.insertRule([e,"{",t,"}"].join(""),n.sheet.cssRules?n.sheet.cssRules.length:0)},addClass:function(e,t){var n=this.$root.utils.array,o=e.className.split(/\s+/);n.indexOf(o,t)==-1&&n.push(o,t),e.className=o.join(" ")},removeClass:function(e,t){var n=e.className.split(/\s+/);this.$root.utils.array.discard(n,t),e.className=n.join(" ")},buildHookUnderlineCSS:function(e,t,n){var o="border-bottom:",i="text-decoration:",r="none",s="underline",a=n?" !important;":";";switch(e){case"single":return[o,"0 ",r,a,i,s,a].join("");case"dotted":return[o,(this.$root.comm.settings.responses.impression.uw||1)+"px dotted ",t,a,i,r,a].join("");case"dashed":return[o,"1px dashed ",t,a,i,r,a].join("");case"none":return[o,"0 ",r,a,i,r,a].join("");default:return[o,(this.$root.comm.settings.responses.impression.uw||1)+"px solid ",t,a,i,s,a].join("")}},buildBorderRadius:function(e){var t=this.$root.what,n=document.body.style,o="border-radius:"+e+";";return"string"==t(n.borderRadius)?o:"string"==t(n.MozBorderRadius)?"-moz-"+o:"string"==t(n.WebkitBorderRadius)?"-webkit-"+o:""},buildBoxShadow:function(e){var t=this.$root,n=t.what,o=t.browser,i=document.body.style,r="box-shadow:"+e+";";return"string"==n(i.boxShadow)?r:"string"==n(i.MozBoxShadow)?"-moz-"+r:"string"!=n(i.WebkitBoxShadow)||o.Safari&&!parseFloat(o.AppleWebKit>=533)?"":"-webkit-"+r},buildTextShadow:function(e){var t=this.$root.what,n=document.body.style,o="text-shadow:"+e+";";return"string"==t(n.textShadow)?o:"string"==t(n.MozTextShadow)?"-moz-"+o:"string"==t(n.WebkitTextShadow)?"-webkit-"+o:""},buildGradient:function(e,t){var n,o,i=this.$root,r=i.browser,s=r.getName(),a=r.getVersion(!0),d=t?"":";",l={Firefox:{v:3.6,p:"-moz"},Chrome:{v:1,p:"-webkit"},IE:{v:10,p:"-ms"},Safari:{v:4,p:"-webkit"},Opera:{v:11.1,p:"-o"}};return e&&("string"==i.what(e)||!l[s]||a<l[s].v)?("array"==i.what(e)&&(e=e[1]),[t?"":"background-color:",e,d].join("")):!e||"array"!=i.what(e)||e.length<3?"":(n=e[0],o="circle"==n?"radial":"linear","Safari"==s&&a<5.1||"Chrome"==s&&a<10?"linear"==o?[t?"":"background-image:"," -webkit-gradient(linear, left top, right top, from(",e[1],"), to(",e[e.length-1],"))",d].join(""):[t?"":"background-image:"," -webkit-gradient(radial, center center, 0, center center, 300, from(",e[1],"), to(",e[e.length-1],"))",d].join(""):[t?"":"background-image:",l[s].p,"-",o,"-gradient(",n,",",e.slice(1).join(","),")",d].join(""))},getCssProp:function(e,t){if(window.getComputedStyle&&document.defaultView.getComputedStyle(e,null))var n=parseInt(document.defaultView.getComputedStyle(e,null).getPropertyValue(t));else if(e.currentStyle)var n=parseInt(e.currentStyle[t]);return n},supports:function(e){var t=this.$root.what,n=document.body.style,o=this.$root.browser,i="string",r="Moz",s="Webkit",a=e.charAt(0).toUpperCase()+e.substr(1);switch(e){case"borderRadius":case"textShadow":return t(n[e])==i?e:t(n[r+a])==i?r+a:t(n[s+a])==i&&s+a;case"boxShadow":return t(n[e])==i?e:t(n[r+a])==i?r+a:!(t(n[s+a])!=i||o.Safari&&!parseFloat(o.AppleWebKit>=533))&&s+a;default:return!1}}}),utils.dom.$create("event",{disableEventBubbling:function(e,t){e.addEventListener?e.addEventListener(t,this.stop,!1):e.attachEvent&&e.attachEvent("on"+t,this.stop)},stop:function(e){e.cancelBubble=!0,e.returnValue=!1,e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}}),$root.$create("helpers",{getVar:function(e,t,n){var o=this.$root,i=o.settings.white_label,r="infolink",s=r+"s",a="undefined",d=this.$root.what,l=o.utils,c=o.utils.string,u=null;if(r+="_",s+="_",location.search&&c.toObject(location.search)&&(u=c.toObject(location.search)["il."+e]||null),!u&&!n){var h=c.toObject(l.cookie.get("il.params"));h&&"undefined"!=h&&(u=h["il."+e])}return u||(u=i&&d(window[i+"_"+e])!=a?window[i+"_"+e]:d(window[s+e])!=a?window[s+e]:d(window[r+e])!=a?window[r+e]:null),t&&(t[e]=u),u},setVar:function(e,t){var n=this.$root.settings.white_label,o="infolinks_",i="undefined",r=this.$root.what;r(t)!=i&&(window[(r(n)!=i?n:o)+e]=t)},initAlgoBehaviors:function(e,t){var n;for(n in t)e[n]||(e[n]=t[n])},buildImpPageMarginsParam:function(){var e=this.$root.settings.inFrameSettings,t=e.width,n=e.margins=this.getPageMargins(),o=this.$root.comm.settings.responses.gsd.wd,i=this.$root.utils.dom.viewport.getWidth();return o&&(o.offset&&(e.offset=parseInt(o.offset)),o.contentWidth&&o.contentWidth>-1&&(e.contentWidth=parseInt(o.contentWidth),e.contentWidth+2*t.wide<i?e.showW=!0:e.contentWidth+2*t.thin<i&&(e.showT=!0)),o.absPos&&(e.absPos=o.absPos)),[e.showW?"w":e.showT?"t":n.left>t.thin?n.left>t.wide?"w":"t":"",e.showW?"w":e.showT?"t":n.right>t.thin?n.right>t.wide?"w":"t":""].join("*").replace(/^\*$/,"")},getPageMargins:function(){var e=this.$root,t=e.settings.inFrameSettings,n=e.utils.dom,o=n.findWidestNode(),i={left:0,right:0};if(o&&o.node!=document.body){var r=n.element.offset(o.node),s=n.element.getActualWidth(o.node),a=n.document.getWidth();i={left:r.left-t.buffer,right:a-s-r.left-2*t.buffer}}return i},chanceIntegration:function(){var e=this.getVar("percentage");if(e){e=e>100?100:e<0?0:e;var t=100*Math.random();if(t>e){var n;try{n=this.searchForIntegrationComment(document.body)}catch(o){n=null}if(n){var i=n.data;"complete"==document.readyState||this.getVar("ddw")||document.write(i.substring(14,i.length))}return this.$root.logger.log("Stopping on unlucky chance integration.",this.chanceIntegration),!0}}return!1},searchForIntegrationComment:function(e){switch(e.nodeType){case 1:case 9:for(var t=0,n=e.childNodes.length;t<n;t++){var o=this.searchForIntegrationComment(e.childNodes[t]);if(o)return o}return null;case 8:return e.data.length>15&&"IL_INTEGRATION"==e.data.substr(0,14)?e:null;default:return null}},IsCommentExist:function(e,t){switch(e.nodeType){case 1:case 9:for(var n=0,o=e.childNodes.length;n<o;n++){var i=this.IsCommentExist(e.childNodes[n],t);if(i)return i}return null;case 8:return e.data.indexOf(t)!=-1||null;default:return null}},isSupportedClient:function(){var e=this.$root,t=e.browser,n=e.settings.supportedClients[t.getName()];return n&&parseFloat(t.getVersion(!0))>=n},setHosts:function(){var e,t,n,o,i=this.$root,r="",s=i.settings,a=s.hosts,d=document.getElementsByTagName("script"),l=i.helpers.getVar("resources");if(window.$iceboot?(s.boot=window.$iceboot,n=i.version=s.boot.version,o=/\/infolinks_main\.js$/):o=new RegExp("/"+$ice.versionFile+".js$"),l)l=l.replace(/^\w+:\/\//,""),e=l.substring(0,l.indexOf("/")),r=l.substring(l.indexOf("/"))+"/";else for(var c=0,u=d.length;c<u;c++)if(null!=d[c].src.match(o)){if(t=d[c].src.replace(/^\w+:\/\//,""),e=t.replace(/\/.*/,""),r=t.substring(t.indexOf("/"),t.lastIndexOf("/")+1),!n){var h=r.split("/");i.version=h[h.length-2]}break}e?a.resources=e:(a.resources=a.resourcesDefault,r=a.scriptDefaultPath),a.router=i.utils.string.toObject(location.search,"il.mt")||i.helpers.getVar("metro_server")||a.resources.replace(/\bresources\b/,"router"),a.thumbnails=a.resources.replace(/\bresources\b/,"thumbnails"),a.protocol=i.settings.protocol,n&&(r+=n),r&&"/"!=r.charAt(r.length-1)&&(r+="/"),a.scriptPath=r,r.indexOf("/src/")!=-1&&(a.src=!0)},validateProtocol:function(e){var t=$root,n=t.utils;return e&&!n.string.parseURL(e).protocol?"http://"+e:e},getCustomerId:function(){var e=this.$root,t=e.helpers;e.settings.$extend({customerId:t.getVar("cid")||t.getVar("pid")||"null",websiteId:t.getVar("wsid")||0,dfpSlot:t.getVar("dfp_slot"),customerUrl:document.location.href})},setDefaultWebsiteDirectives:function(e){var t,n=this.$root,o={ht:!0,qmin:1,ha:null,hd:null};e.wd||(e.wd={});for(t in o)"undefined"==n.what(e.wd[t])&&(e.wd[t]=o[t])},getReferrer:function(){var e,t=this.$root,n=document.referrer,o={ref:"",refq:""},i=t.utils,r=i.string,s=i.cookie.has("refc"),a=i.string.toObject(location.search,"il.sq"),d=i.base64.decodeBase64("Lmdvb2dsZS4="),l=i.base64.decodeBase64("d3d3Lmdvb2dsZS5jb20=");if(a)return o={refq:decodeURIComponent(a),ref:l},i.object.extend(t.settings,o),o;if(n){if(n.indexOf(d)!=-1&&n.match(/\/cse/))return o;if(e=n.indexOf("?"),e!=-1){try{var c=r.toObject(n.substring(e+1))||{};o.refq=r.truncate(r.trim(decodeURIComponent((c.q||c.p||"").replace(/\+/g," "))),100,""),o.ref=n.substring(0,e)}catch(u){t.logger.error("Error reading referrer.",this.getReferrer)}"p"!=!t.browser.getDevice()||n.indexOf(d)==-1||!/\/(url|imgres|search|cse)/.test(n.substring(n.indexOf("/")))||c&&c.adurl||(o.ose=1)}else s||(o.ref=n);o.ref=r.truncate(o.ref.replace(/^\w+:\/\//,""),100,""),o.refq&&!s&&i.cookie.set("refc",i.object.toQueryString(o),60)}!o.refq&&s&&i.object.extend(o,r.toObject(i.cookie.get("refc")||""));var h=t.helpers.getVar("search_query");return h&&(o.refq=h,o.ose&&delete o.ose,o.ref||(o.ref=l)),i.object.extend(t.settings,o),o},normalizeText:function(e){var t="|";e=e.replace(/\.|:|;|<|>|=|\?|\(|\)|\[|\]|\{|\}|,|"|\x201C|\x201D|\x96|\x97|\\|\//g,t),e=e.replace(/['`\-]\W/g,t).replace(/\W['`\-]/g,t);var n=new RegExp("\\s*\\"+t+"+\\s*","g"),o=new RegExp("\\"+t+"{2,}","g");return e=e.replace(n,t).replace(o,t),e=e.toLowerCase().replace(/\|/g,"P").replace(/\s/g,"S").replace(/\./g,"D").replace(/'/g,"Q").replace(/\$/g,"M").replace(/\+/g,"A")},countWords:function(e){var t=new RegExp("P|S","g"),n=e.match(t);return null!=n?n.length+1:0},getMetaContent:function(e,t){for(var n=document.getElementsByTagName("meta"),o=0,i=n.length;o<i;o++)if(n[o].name&&n[o].name.toLowerCase()==e&&n[o].content)return this.normalizeText(this.$root.utils.string.truncateToChar(n[o].content,1024*t," "));return""},getTagTexts:function(e,t,n){var o,i,r,s,a,d,l=this.$root,c=l.utils,u=c.string,h=c.array,p=[],m=!1,g=0,f=l.settings.textLimits.merged,v=0,b=20;for("array"!=l.what(e)&&(e=[e]),i=0,r=e.length;i<r;i++){for(o=document.getElementsByTagName(e[i]),s=0,a=o.length;s<a;s++)if(d="text"==t?o[s].textContent||o[s].innerText||"":"alt"==t?o[s].alt:""){if(d=u.truncateToChar(d,f[n].i," "),v++,g+d.length>1024*f[n].t||v>=b){m=!0;break}h.push(p,d),g+=d.length}if(m)break}return this.normalizeText(p.join("|"))},setNativeAppParams:function(e){var t=$root,n=t.settings,o=t.helpers;if(e)e&&"object"==t.what(e)&&(n.nativeAppParams=this.secureInput(e));else{var i=o.getVar("nativeAppParams");i&&"object"==t.what(i)&&(n.nativeAppParams=this.secureInput(i))}},usePercentages:function(e){var t,n,o=$root,i=o.utils,r=0,s=[];"string"==$root.what(e)&&(e=i.string.stringToObject(e));for(var a in e)e[a]=parseFloat(e[a]),isNaN(e[a])?delete e[a]:r+=e[a];for(var a in e){if(e[a]=parseFloat(e[a]),t=e[a]/r,s[a]=t,n=Math.random(),n<=s[a])return a;r-=e[a]}},secureInput:function(e){var t=$root,n=t.settings,o=t.utils,i=0,r={};if(o.object.size(e)>n.appParamLimits)for(var s in e){if(!(i<n.appParamLimits))break;r[s]=e[s],i++}else r=e;for(var s in r)r[s].length>n.paramCharLimit&&delete r[s];return r},checkForAttrToRemove:function(e,t,n){var o,i,r,s=$root,a=s.utils,d=s.settings,l=new Date;if(n.capExp||(n.capExp=365),i=new Date(l.setDate(l.getDate()+n.capExp)),n.prodvw&&(o=n.prodvw.split(","),this.removeAttrFromLocalStorage(o,"pv",i)),t){o=t.split(","),r=a.object.size(d.fc);for(var c=0;c<r;c++)o&&o[c]in d.fc&&delete d.fc[o[c]]}e&&(o=e.split(","),this.removeAttrFromLocalStorage(o,"fc",i))},removeAttrFromCookie:function removeAttrFromCookie(attrToRemove,cname,expiration){var rt=$root,capCountObj,capCountObjSize,ut=rt.utils;if(ut.cookie.has(cname)&&attrToRemove){capCountObj=eval("("+ut.cookie.get(cname)+")"),capCountObj=this.handleOldFormat(capCountObj),capCountObjSize=ut.object.size(capCountObj);for(var i=0;i<capCountObjSize;i++)attrToRemove&&attrToRemove[i]in capCountObj&&delete capCountObj[attrToRemove[i]];ut.cookie.set(cname,ut.object.stringify(capCountObj),expiration)}},removeAttrFromLocalStorage:function removeAttrFromLocalStorage(attrToRemove,itemName,expiration){var rt=$root,capCountObj,capCountObjSize,ut=rt.utils;if(null!=localStorage.getItem(itemName)&&attrToRemove){capCountObj=eval("("+localStorage.getItem(itemName)+")"),capCountObj=this.handleOldFormat(capCountObj),capCountObjSize=ut.object.size(capCountObj);for(var i=0;i<capCountObjSize;i++)attrToRemove&&attrToRemove[i]in capCountObj&&delete capCountObj[attrToRemove[i]];localStorage.setItem(itemName,JSON.stringify(capCountObj)),ut.storage.setExpireDate(itemName,new Date(expiration))}},handleOldFormat:function(e){var t,n,o,i;n=Date.parse(e.expiration),o=n-864e5,i=(new Date).getTime(),o>i&&(o=i);for(var r in e)t=String(e[r]),t.indexOf(":")==-1&&(e[r]=t+":"+o);return e},saveIncToStorage:function(e,t){var n,o,i,r,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=$root,d=a.utils,l={},c=new Date,u=a.comm.settings.responses.impression;u.capExp||(u.capExp=1),o=new Date(c.setDate(c.getDate()+u.capExp)),d.storage.passedExpireDate(t)&&localStorage.removeItem(t),null!=localStorage.getItem(t)?(l=JSON.parse(localStorage.getItem(t)),n=l.ed,l[e]?(s?(i=l[e].substring(l[e].lastIndexOf(":")+1),r=parseInt(l[e].split(/[::]/)),r++,l[e]=r+":"+i):l[e]++,localStorage.setItem(t,JSON.stringify(l)),d.storage.setExpireDate(t,new Date(n))):(l[e]=s?"1:"+(new Date).getTime():1,n=l.ed,localStorage.setItem(t,JSON.stringify(l)),d.storage.setExpireDate(t,new Date(n)))):(l[e]=s?"1:"+(new Date).getTime():1,localStorage.setItem(t,JSON.stringify(l)),d.storage.setExpireDate(t,o))},saveFcAndPvToStorage:function(e,t){var n=$root,o=n.helpers;o.saveForMsgCap(e,"fc",!0),o.saveForMsgCap(t,"pv",!1)},saveIncToCookie:function saveIncToCookie(value,csName){var rt=$root,ut=rt.utils,capCountObj={},date=new Date,count=[],expiration,imp=rt.comm.settings.responses.impression,itemExp;imp.capExp||(imp.capExp=365),expiration=new Date(date.setDate(date.getDate()+imp.capExp)),ut.cookie.has(csName)?(capCountObj=eval("("+ut.cookie.get(csName)+")"),capCountObj=this.handleOldFormat(capCountObj),
capCountObj[value]?(itemExp=capCountObj[value].substring(capCountObj[value].lastIndexOf(":")+1),count=parseInt(capCountObj[value].split(/[::]/)),count++,capCountObj[value]=count+":"+itemExp,ut.cookie.set(csName,ut.object.stringify(capCountObj),expiration)):(capCountObj[value]="1:"+(new Date).getTime(),ut.cookie.set(csName,ut.object.stringify(capCountObj),expiration))):(capCountObj[value]="1:"+(new Date).getTime(),ut.cookie.set(csName,ut.object.stringify(capCountObj),expiration))},saveIncToVar:function(e,t){var n,o,i=$root,r=i.utils,s=i.settings,a={},d=[];s[t]?(a=s[t],a[e]?(o=a[e].substring(a[e].lastIndexOf(":")+1),d=parseInt(a[e].split(/[::]/)),d++,a[e]=d+":"+o,s[t]=a):(a[e]="1:"+(new Date).getTime(),s[t]=a)):(a[e]="1:"+(new Date).getTime(),s[t]=a),n=r.object.join(a,"~"),s.msgvwimp=n},saveForMsgCap:function(e,t){try{var n=$root,o=n.helpers;"pv"!=t&&o.saveIncToVar(e,t),"fc"!=t&&"pv"!=t?o.saveIncToCookie(e,t):o.saveIncToStorage(e,t,!0)}catch(i){return}},setViews:function setViews(csName,paramName){try{var rt=$root,ut=rt.utils,st=rt.settings,capCountStr,capCountObj,hp=rt.helpers;ut.cookie.has(csName)&&(capCountObj=eval("("+ut.cookie.get(csName)+")"),delete capCountObj.expiration,capCountStr=ut.object.join(capCountObj,"~"),st[paramName]=capCountStr),hp.supportsStorage()&&(ut.storage.passedExpireDate(csName)&&localStorage.removeItem(csName),null!=localStorage.getItem(csName)&&(capCountObj=JSON.parse(localStorage.getItem(csName)),delete capCountObj.ed,capCountStr=ut.object.join(capCountObj,"~"),st[paramName]=capCountStr))}catch(e){return}},processImpressionResponse:function(e){var t,n=this.$root,o=n.helpers;if("object"!=n.what(e))return null;if(e.components){e.prs={};for(t in e.components)e.prs[t.charAt(0)]=e.components[t];delete e.components}return o.normalizeSentenceLists(e),e.messages&&o.findMaxBidCount(e),e},runInTag:function(){var e=this.$root,t=e.settings;e.comm.settings.responses.impression.prs.t=t.prs.t,e.event.fire("productRenderStatus",{prod:"t",status:"during"}),e.event.fire("initIntag")},findMaxBidCount:function(e){var t,n,o,i=0;for(t in e.prs)if(n=e.prs[t].messages)for(o in n)n[o].bdc>i&&(i=n[o].bdc);this.$root.settings.bdc=i},normalizeSentenceLists:function(e){var t,n=e.prs,o=this.$root.utils,i=o.object.keys(e.sentences).length;for(t in n)i&&1==n[t].sentences.length&&"ALL"==n[t].sentences[0]&&(n[t].sentences=o.array.range(0,i-1))},getCustomerBehavior:function(e){function t(){return arguments[1].toUpperCase()}var n,o,i,r,s=this.$root,a={},d=s.utils.string.qw(e);for(i=0,r=d.length;i<r;i++)n=s.helpers.getVar(d[i]),null!=n&&(o=d[i].replace(/_(\w)/g,t),a[o]=n);return a},getImpressionBehavior:function(){var e=this.$root,t=e.settings,n=e.utils.object,o=e.comm.settings.responses.impression.behavior_imp||{};n.renameProperty(o,"lc","linkColor"),n.renameProperty(o,"st","bubbleShowDelay"),n.renameProperty(o,"rw","adsReuseWindow"),n.renameProperty(o,"bd","bubbleDirection"),t.behavior.impression=o},renameBehaviorProperties:function(e){var t=this.$root,n=t.utils.object;return n.renameProperty(e,"hc","highlightCount"),n.renameProperty(e,"lc","linkColor"),n.renameProperty(e,"du","doubleUnderline"),n.renameProperty(e,"st","bubbleShowDelay"),n.renameProperty(e,"rw","adsReuseWindow"),n.renameProperty(e,"si","simanitIcon"),n.renameProperty(e,"bd","bubbleDirection"),n.renameProperty(e,"t","theme"),n.renameProperty(e,"ln","lines"),e},startCountDownTimer:function(e,t){var n,o=$root,i=o.settings,r=[],s=o.utils,a=o.utils.dom;i.countDownTimers[t]&&clearInterval(i.countDownTimers[t]),n=e/1e3,s.timer.start("mi_timer"),i.countDownTimers[t]=setInterval(function(){n--,r=a.filterByClass(t);for(var e=0;e<r.length;e++)r[e].innerHTML=n;0==n&&(s.timer.stop("mi_timer"),clearInterval(i.countDownTimers[t]))},1e3)},sanitize:function(e,t,n){var o=this.$root;for(var i in e)if(n&&"undefined"==o.what(t[i]))delete e[i];else switch(t[i]){case"int":e[i]=parseInt(e[i],10)||0;break;case"bool":e[i]="false"!=e[i]&&!!e[i];break;case"color":e[i]=this.validateColorValue(e[i]||"");break;case"str":e[i]=e[i]&&e[i].toString?e[i].toString():e[i];break;case"array":e[i]="array"==o.what(e[i])?e[i]:[];break;case"node":e[i]=e[i]&&e[i].tagName?e[i]:null;break;case"function":e[i]="function"==o.what(e[i])?e[i]:null;break;default:"array"==o.what(t[i])&&o.utils.array.indexOf(t[i],e[i])==-1&&(e[i]=t[i][0])}return e},validateColorValue:function(e){e=e.split(/\s*,\s*/);for(var t=0,n=e.length,o=/^#?[0-9a-fA-F]{6}$/;t<n;t++)e[t]=e[t]&&null!=e[t].match(o)?"#"==e[t].charAt(0)?e[t]:"#"+e[t]:"#000000";return 1==e.length?e[0]:e},createBaseClasses:function(){var e=this.$root,t=e.utils.dom.style,n=e.settings.baseClass,o="margin:0;padding:0;border:0;outline:0;font:normal normal normal 13px trebuchet MS,Arial,sans-serif;vertical-align:baseline;background:transparent;list-style:none;text-decoration:none;text-align:left;float:none;position:static;";t.addRule("."+n,o),t.addRule("."+n+" *",o),t.addRule("a."+n+":hover","background-color:transparent !important;")},supportsStorage:function(){return"undefined"!=typeof Storage&&!!window.JSON&&!!window.JSON.parse},supportsSessionStorage:function(){try{var e=window.sessionStorage;return e.setItem("test","test"),e.removeItem("test"),!0}catch(t){return!1}},getVpfc:function(e,t){if(this.supportsSessionStorage()&&window.sessionStorage.getItem("vpfc")&&JSON.parse(window.sessionStorage.getItem("vpfc"))[e])return"u"===e&&t?JSON.parse(window.sessionStorage.getItem("vpfc"))[e][t]:JSON.parse(window.sessionStorage.getItem("vpfc"))[e]},getHookData:function(e){var t=this.$root.comm.settings.responses.getads;return t&&t[e]&&("nologo"==t[e].skin?(t[e].theme="nologo",t[e].skin="variant"):"cdtodg"==t[e].skin?(t[e].theme="cdtodg",t[e].skin="variant"):"yell"==t[e].skin&&(t[e].theme="yell",t[e].skin="variant")),t?t[e]||null:null},setHookData:function(e,t){var n=this.$root.comm.settings.responses;n.getads||(n.getads={}),n.getads[e]=t},clearHookData:function(e){var t=this.$root.comm.settings.responses.getads;t&&t[e]&&(t[e]=null)},createHook:function(e,t,n,o,i,r,s,a,d){var l=this.$root,c=l.settings,u=i.settings.sentences,h={id:e,fontSize:o,node:n,parentNode:n?n.parentNode:null,rendered:!0,sentence:t,prod:r,type:s,hovered:!1,currentAdIndex:0,instance:d};return c.hooksMap[h.id]=h,u[t]||(u[t]={hooks:[],rendered:0}),l.utils.array.push(u[t].hooks,h),u[t].rendered++,a&&(h.bubble=l.utils.object.clone(l.bubble.settings.base),l.helpers.bindHookEvents(h)),h},getInplaceLid:function(e){var t=this.$root,n=window.googletag;if(n&&n.pubads&&n.pubads().getSlots&&n.pubads().getSlots().length>0)for(var o=window.googletag.pubads().getSlots(),i=0;i<o.length;i++)if(e.id.indexOf(o[i].getSlotId().getId())!=-1)return t.settings.getAdsProds.u+"_"+o[i].getSlotId().getDomId()+"_"+e.width+"x"+e.height;return t.settings.getAdsProds.u+"_"+e.id+"_"+e.width+"x"+e.height},getHookBehavior:function(e,t){return t?t:this.$root.products[this.$root.settings.hooksMap[e].type].settings.behavior.merged},bindHookEvents:function(e,t){var n=this.$root,o=n.event.dom,i=n.bubble,r=e.node,s={hookId:e.id},a=n.helpers.getHookBehavior(e.id),d=n.settings;o.bind(r,{event:"dblclick",listener:i.hookDblClick}),t&&a.mi&&a.mi.indexOf(d.mobileIntext.old)==-1?(s.isMobile=t,o.bind(r,{event:"touchend",data:s,listener:i.hookMouseover})):(o.bind(r,{event:"mouseenter",data:s,listener:i.hookMouseover}),o.bind(r,{event:"mouseleave",data:s,listener:i.hookMouseout}),o.bind(r,{event:"click",data:s,listener:i.hookClick}))},getHookSD:function(e,t){var n,o=this.$root,i=o.settings,r=i.hooksMap[e];return r?(n=r.updater?r.updater.impression:o.comm.settings.responses.impression,t?o.utils.object.extend({sdata:r.sentence,scs:n.sentences[r.sentence]}):o.utils.object.extend({sdata:r.sentence,scs:n.sentences[r.sentence]},n.rauth)):{}},getAdByMidx:function(e,t){return this.$root.utils.array.find(e,function(e){return e.midx==t})},getSkinPath:function(e,t){var n=this.$root,o=n.utils.array,i=["/",n.settings.hosts.resources,"static","skins"];return e&&o.push(i,e,t,(n.utils.array.indexOf(["intext","intag","inscreen"],t)==-1?n.products[t]:n.bubble).skins[e].settings.rv),o.push(i,"").join("/")},initTheme:function(e,t,n){var o,i,r,s,a,d=this.$root,l=e.id,c=d.settings,u=d.helpers.getHookBehavior(l),h=d.helpers.getHookData(l),p=t.settings,m=d.utils.object,g=n||e.type,f=d.products[g].settings,v=p.themesets[g],b=h.themeset||u.themeset||null;if(b&&!c.themeset&&v[b]&&v[b].length?(c.themeset=b,a=c.theme=v[b][Math.floor(Math.random()*v[b].length)]):a=h.theme||c.theme||u.theme,f.theme=a,s=p.themes[g].base,s.hpl=c.helpUrl,s.lgl=c.homeUrl,r=f.themes&&f.themes[g]&&f.themes[g].base?m.extend({},f.themes[g].base):{},m.extend(r,s),o=(p.themes[g][a]||{}).inherit)for(i=0;i<o.length;i++)m.extend(r,p.themes[g][o[i]]);return m.extend(r,p.themes[g][a]),f.themeAttributes=r,e.skin=u.skin,e.themeset=b,e.theme=f.theme,e.attributes=f.themeAttributes,e.attributes},setTailColor:function(e,t){var n=this.$root;switch(n.what(e)){case"function":return e(t);case"string":return e;default:return"#000000"}},setAdThumbnail:function(e){"text"!=e.template||e.thumbURL||(e.thumbURL=["https://",this.$root.settings.hosts.thumbnails,"/thumbnail.jpg?domain=",e.displayedURL].join(""))},hitURL:function(e){var t=$root;"array"!=t.what(e)&&(e=[e]);for(var n=0;n<e.length;n++)t.utils.dom.createDOMFragment({tag:"img",parent:document.body,attributes:{src:e[n]},style:{display:"none",width:"1px",height:"1px"}})},renderCustomJS:function(e){var t,n,o,i,r=$root.utils;o=document.createElement("div"),n=e.split(";");for(var s=0;s<n.length;s++){o.innerHTML=r.base64.decodeBase64(n[s]),i=o.getElementsByTagName("script");for(var a=0;a<i.length;a++)""!=i[a].src?this.addScriptSrc(i[a].src):(t=document.createElement("script"),t.innerHTML=i[a].innerHTML,document.body.appendChild(t))}},renderCustomCode:function(e,t,n){e.customCode&&"iframe"!=e.actualTemplate&&this.addCustomCodeToDOM(e.customCode,!0,n)},renderDoqCustomCode:function(e){this.addCustomCodeToDOM(e,!1)},addCustomCodeToDOM:function(e,t,n){var o,i,r=$root,s=this.settings,a=(r.settings,r.utils),d=a.dom;i=e.split(";");var l=document.createElement("div");for(l.setAttribute("id","IL_IFR_DIV"+s.iframeNum),t?d.element.insertAfter(l,n):document.body.appendChild(l),o=0;o<i.length;o++){var c=document.createElement("iframe");c.setAttribute("name","IL_IFR_FRAME"+s.iframeNum),c.style.display="none",l.appendChild(c),i[o]="<div>"+a.base64.decodeBase64(i[o])+"</div>",this.createExternalIframe(null,"IL_IFR_FRAME"+s.iframeNum,s.iframeNum,i[o],null),s.iframeNum++}},createExternalIframe:function(e,t,n,o,i){var r=$root,s="",a=window.location.href,d=new RegExp("[?&]il.frame(=([^&#]*)|&|#|$)"),l=document.getElementsByName(t)[0];e&&(s="<script>var style = document.createElement('style');style.type = 'text/css';style.innerHTML = 'body { margin: 0; !important}';document.getElementsByTagName('head')[0].appendChild(style);window.hookId='"+e.id+"'</script>"),s+=o||!e?o:r.helpers.parseTokens(e,null,n),i?l.removeAttribute("sandbox"):l&&l.sandbox&&l.sandbox.remove?setTimeout(function(){l.sandbox.remove("allow-same-origin")},15):setTimeout(function(){l.sandbox=l.sandbox.replace("allow-same-origin","")},15),l.onload=function(e){var t=JSON.stringify({name:"IL_iceContent",content:s});return l.contentWindow.postMessage(t,"*"),!1},"complete"==document.readyState?d.exec(a)&&d.exec(a)[2]?l.src=d.exec(a)[2]:l.src="https://resources.infolinks.com/static/container-1.0.html":window.onload=function(){d.exec(a)&&d.exec(a)[2]?l.src=d.exec(a)[2]:l.src="https://resources.infolinks.com/static/container-1.0.html"}},createFriendlyIframe:function(e,t,n,o,i){var r=$root,s=document.getElementsByName(t)[0];e&&(s.contentWindow.$iceContent="<script>var style = document.createElement('style');style.type = 'text/css';style.innerHTML = 'body { margin: 0; !important}';document.getElementsByTagName('head')[0].appendChild(style);window.hookId='"+e.id+"'</script>"),o?s.contentWindow.$iceContent+=o:s.contentWindow.$iceContent+=r.helpers.parseTokens(e,null,n),s.src='javascript:window["$iceContent"]',i?s.removeAttribute("sandbox"):s&&s.sandbox&&s.sandbox.remove?setTimeout(function(){s.sandbox.remove("allow-same-origin")},15):setTimeout(function(){s.sandbox=s.sandbox.replace("allow-same-origin","")},15)},createCustomCodeInAd:function(e){var t,n,o=$root,i=o.utils,r="";if(e.customCode&&"iframe"==e.actualTemplate){for(n=e.customCode.split(";"),t=0;t<n.length;t++)n[t]=i.base64.decodeBase64(n[t]),r+=" "+n[t];return r}return""},getPluginsChecksum:function(){var e,t,n,o,i,r=[];if(!navigator.plugins)return"";for(t=0,n=navigator.plugins.length;t<n;t++)for(e=navigator.plugins[t],r[r.length]=(e.description||e.name||"").charAt(0),o=0,i=e.length;o<i;o++)r[r.length]=(e[o].description||e[o].name||"").charAt(0);return r.join("").replace(/\s/g,"")},mapUnhoverableAreas:function(){var e=this.$root,t=e.settings,n=e.utils,o=n.dom.element,i=e.browser,r=document.getElementsByTagName("embed"),s=document.getElementsByTagName("object"),a=n.array.concat(r,s);t.unhoverableAreas=[];for(var d=0;d<a.length;d++)if(o.isVisible(a[d])){if("embed"==a[d].tagName.toLowerCase()){if("transparent"==(a[d].getAttribute("wmode")||"").toLowerCase())continue}else{for(var l=a[d].getElementsByTagName("param"),c=!1,u=0,h=l.length;u<h;u++)if("wmode"==l[u].name&&"transparent"==l[u].value.toLowerCase()){c=!0;break}if(c)continue}if("embed"==a[d].tagName.toLowerCase()&&"object"==a[d].parentNode.tagName.toLowerCase()){if(i.IE)continue;n.array.discard(a,a[d].parentNode)}var p=parseInt(a[d].width,10)||a[d].offsetWidth||0,m=parseInt(a[d].height,10)||a[d].offsetHeight||0;if(p&&m){var g=o.offset(a[d]);n.array.push(t.unhoverableAreas,[g.left,g.top,g.left+p,g.top+m])}}},hasSpecialTags:function(e,t){return e=e.toLowerCase(),!("all"!=t&&"script"!=t||e.indexOf("<scr")==-1&&e.indexOf("document.write")==-1)||("all"==t||"iframe"==t)&&e.indexOf("<ifr")!=-1},addUniqeTag:function(e,t,n,o,i){var r=function(e){for(var t in e)if(e.hasOwnProperty(t)&&!e[t]&&0!=e[t])return!1;return!0},s={html:e,prodName:t,bdc:n,midx:o,emd:i},a=document.querySelectorAll("[data-"+t+"_"+n+"_"+o+"_"+i+"]");return r(s)&&0==a.length?"<div data-"+t+"_"+n+"_"+o+"_"+i+' style="display: none"></div>'+e:e},parseTokens:function(e,t,n){var o,i,r,s=this.$root,a=this.getHookData(e.id),d=s.helpers.getAdByMidx(a.ads,a.ads[n||e.currentAdIndex].midx),l=!1,c=s.helpers;if(t||(t=d.content),"html"==d.template||"external"==d.template){for(var u,h,p,m,g,f=/@start@.*?@end@/;null!=(u=t.match(f));)delete event.capara,h=u[0],p=h.substring(7,h.length-5),p.indexOf("|||")!=-1&&(r=p.split("|||"),event.capara=r[0],p=r[1]),m=s.comm.getRedirectUrl(e,p,"onWin",event),d.de&&(l=!0,m="~encfrom~"+m+"~encto~"),t=t.replace(f,m);for(f=/@encode@.*?@encode@/;null!=(u=t.match(f));)g=encodeURIComponent(u[0].substring(8,u[0].length-8)),t=t.replace(f,g);for(;(o=t.indexOf("~encfrom~"))!=-1;)i=t.indexOf("~encto~"),g=encodeURIComponent(t.substring(o+9,i)),t=t.substring(0,o)+g+t.substring(i+7);for(f=/@hookId@/;null!=(u=t.match(f));)t=t.replace(f,e.id);for(f=/@JSEnc@.*?@JSEncEnd@/;null!=(u=t.match(f));)u[0]=u[0].replace(/(['"])/g,"\\$1"),t=t.replace(f,u[0].substring(7,u[0].length-10))}return"javascript"==d.contentType&&(t=['<script type="text/javascript">',t,"</script>"].join("")),t+=c.createCustomCodeInAd(d)},setActualTemplate:function(e){return e.actualTemplate||(e.actualTemplate=e.echo||("html"==e.template||"external"==e.template)&&e.content&&this.hasSpecialTags(e.content,"script")?"iframe":e.contentUrl?"html":"external"==e.template?"html":e.template)},getPlatform:function(){var e,t,n,o=this.$root,i=document.getElementsByName("generator"),r="undefined";for(e=0,t=i.length;e<t;e++)if(n=i[e].getAttribute("content")){if(n.indexOf("WordPress")>-1)return"wdp";if(n.indexOf("Joomla")>-1)return"jml";if(n.indexOf("blogger")>-1)return"bsp";if(n.indexOf("vBulletin")>-1)return"vbt";if(n.indexOf("phpBB")>-1)return"pbb";if(n.indexOf("weebly")>-1)return"wbl";if(n.indexOf("tumblr")>-1)return"tbr"}if(o.what(window.Drupal)!=r)return"drl";if(o.what(window.Joomla)!=r)return"jml";if(o.what(window.blogger)!=r)return"jml";if(o.what(window.blogger_blog_id)!=r)return"jml";if(o.utils.dom.filterByClass("contentpaneopen").length)return"jml";if(o.what(window.vBulletin)!=r)return"vbt";if(o.what(window.phpbb)!=r)return"pbb";if(o.what(window.positionWeeblyFooter)!=r)return"wbl";if(o.what(window.Tumblr)!=r)return"tbr";if(o.what(window.ipb)!=r)return"ipb";var s,a=document.getElementsByTagName("link");for(e=0,t=a.length;e<t;e++)if(s=a[e].getAttribute("href")){if(s.indexOf("wp-content")>-1)return"wdp";if(s.indexOf("support-files")>-1)return"sbi"}return""},createAdViewUrl:function(e){for(var t,n=this.$root,o=comm.settings.responses.gsd,i=n.utils,r=n.settings,s=e.params,a=n.settings.hooksMap[e.hookId],d=n.helpers.getHookData(a.id),l="undefined",c=[],u=[],h=n.utils.array.push,p=0;p<d.ads.length;p++)d.ads[p].dontShow||(h(c,d.ads[p].midx),h(u,a.bdc));e&&e.capara&&i.object.size(e.capara)>0&&(t=i.object.stringify(e.capara));var m=i.object.clean(i.object.extend({rid:o.rid,bdc:n.what(s.bdc)!=l?s.bdc:u.join("~"),midx:n.what(s.midx)!=l?s.midx:void 0!=a.currentAdIndex?c[a.currentAdIndex]:c.join("~"),emd:n.what(s.emd)!=l?s.emd:d.ads[a.currentAdIndex].emd||"",rts:i.date.now(),trce:r.trce,prod_t:"unknown",jsv:n.version,ifip:n.settings.ifip||"",skin:a.skin,theme:a.theme,themeset:a.themeset,capara:t,cmpid:d.ads[a.currentAdIndex]?d.ads[a.currentAdIndex].campaignUuid:""},n.helpers.getHookSD(a.id),s,r.nativeAppParams));return this.createQueryString([o.rs,"/action/adview.htm"].join(""),m,"adViewed",e)},createQueryString:function(e,t,n,o){var i,r,s,a=$root,d=[];if("object"==a.what(t)){for(var l in t)a.utils.array.push(d,d.length||e.indexOf("?")!=-1?"&":"?",encodeURIComponent(l),"=",encodeURIComponent(t[l]));i=d.join("")}else"string"==a.what(t)&&(i=t);return e+=i,s=a.settings.protocol+e,n&&(r=function(){"undefined"==a.what(o)?a.event.fire(n):a.event.fire(n,o)}),r(),s},getPlatformVersion:function(e){var t;return(t=this.getVar("pv"))||"wdp"==e&&(t=this.IsCommentExist(document.body,"Infolinks START"),t&&(t=this.IsCommentExist(document.body,"Infolinks END"))&&(t="0.0.0")),t},setCaparaBubble:function(e,t){var n={},o=$root.settings;return o.useClParams.itl?n.hii=t.instanceIndex:n={},e.mi&&(n.mi=e.mi,e.mi.indexOf(o.mobileIntext.countDown)!=-1&&e.cd&&(n.cd=e.cd)),n},transitionEndEventName:function(){var e,t,n=document.createElement("div"),o={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(o.hasOwnProperty(e)&&n.style[e]!==t)return o[e]},getSiteLanguage:function(){if(this.getSiteLanguage.lang)return this.getSiteLanguage.lang;var e,t,n,o,i="en",r=this.$root,s=document.getElementsByTagName("html")[0],a="undefined",d=null;if("en"==r.comm.settings.responses.impression.lang||"es"==r.comm.settings.responses.impression.lang)return this.getSiteLanguage.lang=r.comm.settings.responses.impression.lang;if(e=s.getAttribute("lang"),r.what(e)!=a)return e=e.toLowerCase(),/^es/.test(e)&&(i="es"),this.getSiteLanguage.lang=i;for(d=document.getElementsByTagName("meta"),t=0,n=d.length;t<n;++t)if(o=d[t],/^Content-Language$/i.test(o.getAttribute("http-equiv")||"")&&/^es/i.test(o.getAttribute("content"))||/^language$/i.test(o.getAttribute("name")||"")&&/^Spanish/i.test(o.getAttribute("content")||""))return this.getSiteLanguage.lang=i="es";return this.getSiteLanguage.lang=i},translate:function(e,t){var n=t||this.$root.settings.translations;return decodeURIComponent(n[e]?n[e][this.getSiteLanguage()]:e)},setKid:function(e,t){var n=this.getSiteLanguage();return this.$root.utils.VeST(e,{kid:this.$root.settings.kid[t]||"",langPath:"en"==n?"":n+"/"})},getEchoForm:function(e,t,n,o,i){var r=this.$root,s=r.settings,a=[r.settings.protocol,this.getVar("passbackurl")||s.hosts.router,"/echo.htm",i?"?hookId="+i:""].join(""),d='<form <% if (formId){ %>id="<%= formId %>"\t<% } %> \t<% if (formCls){ %>class="<%= formCls %>"<% } %>\t method="post" action="<%= echo %>" target="<%= iframeName %>" accept-charset="utf-8" style="display:none;">\t<input type="hidden" name="echo" value="<%= content %>" />\t<input type="hidden" name="pid" value="<%= cid %>" />\t<input type="hidden" name="wsid" value="<%= wsid %>" />\t<input type="hidden" name="purl" value="<%= purl %>" />\t<input type="hidden" name="jsv" value="<%= jsv %>" /></form>\t\t';return r.utils.VeST(d,{echo:a,content:encodeURIComponent(e.split("").reverse().join("")),iframeName:t,formId:n,formCls:o,cid:s.customerId,wsid:s.websiteId,jsv:r.version,ifip:s.ifip,purl:s.customerUrl,nocache:r.utils.number.next("echo")})},dimObj:function(e,t,n){var o,i,r,s=$root,a=s.utils,d=s.comm.settings.responses.impression.prs,l=s.browser,c=a.dom,u=s.helpers.isSearchProduct(e),h=s.helpers.isTopProduct(e);t||(t=0),n||(n={}),o=l.getDevice(),e&&("t"==o?(i=n.width||c.screenAvailDimensions.getWidth(),r=n.height||c.screenAvailDimensions.getHeight(),(u||h)&&(i*=window.devicePixelRatio,r*=window.devicePixelRatio),d[e].behavior.tminh&&(this.mih=d[e].behavior.tminh==-1?-1:d[e].behavior.tminh*r-t),d[e].behavior.tmaxh&&(this.mah=d[e].behavior.tmaxh==-1?-1:d[e].behavior.tmaxh*r-t),d[e].behavior.tminw&&(this.miw=d[e].behavior.tminw==-1?-1:d[e].behavior.tminw*i-2),d[e].behavior.tmaxw&&(this.maw=d[e].behavior.tmaxw==-1?-1:d[e].behavior.tmaxw*i-2),"true"!=d[e].behavior.idd&&d[e].behavior.idd!==!0||(d[e].behavior.tminh&&(this.mih=parseFloat(d[e].behavior.tminh)),d[e].behavior.tmaxh&&(this.mah=parseFloat(d[e].behavior.tmaxh)),d[e].behavior.tminw&&(this.miw=parseFloat(d[e].behavior.tminw)),d[e].behavior.tmaxw&&(this.maw=parseFloat(d[e].behavior.tmaxw)))):"p"==o?(i=n.width||a.dom.viewport.getWidth(),r=n.height||a.dom.viewport.getHeight(),d[e].behavior.pminh&&(this.mih=d[e].behavior.pminh==-1?-1:d[e].behavior.pminh*r-t),d[e].behavior.pmaxh&&(this.mah=d[e].behavior.pmaxh==-1?-1:d[e].behavior.pmaxh*r-t),d[e].behavior.pminw&&(this.miw=d[e].behavior.pminw==-1?-1:d[e].behavior.pminw*i-2),d[e].behavior.pmaxw&&(this.maw=d[e].behavior.pmaxw==-1?-1:d[e].behavior.pmaxw*i-2),"true"!=d[e].behavior.idd&&d[e].behavior.idd!==!0||(d[e].behavior.pminh&&(this.mih=parseFloat(d[e].behavior.pminh)),d[e].behavior.pmaxh&&(this.mah=parseFloat(d[e].behavior.pmaxh)),d[e].behavior.pminw&&(this.miw=parseFloat(d[e].behavior.pminw)),d[e].behavior.pmaxw&&(this.maw=parseFloat(d[e].behavior.pmaxw)))):"m"==o&&(i=n.height||c.screenAvailDimensions.getWidth(),r=n.width||c.screenAvailDimensions.getHeight(),(u||h)&&(i*=window.devicePixelRatio,r*=window.devicePixelRatio),d[e].behavior.mminh&&(this.mih=d[e].behavior.mminh==-1?-1:d[e].behavior.mminh*r-t),d[e].behavior.mmaxh&&(this.mah=d[e].behavior.mmaxh==-1?-1:d[e].behavior.mmaxh*r-t),d[e].behavior.mminw&&(this.miw=d[e].behavior.mminw==-1?-1:d[e].behavior.mminw*i-2),d[e].behavior.mmaxw&&(this.maw=d[e].behavior.mmaxw==-1?-1:d[e].behavior.mmaxw*i-2),"true"!=d[e].behavior.idd&&d[e].behavior.idd!==!0||(d[e].behavior.mminh&&(this.mih=parseFloat(d[e].behavior.mminh)),d[e].behavior.mmaxh&&(this.mah=parseFloat(d[e].behavior.mmaxh)),d[e].behavior.mminw&&(this.miw=parseFloat(d[e].behavior.mminw)),d[e].behavior.mmaxw&&(this.maw=parseFloat(d[e].behavior.mmaxw)))))},getCustomScale:function(e,t,n){var o=0,i=$root,r=i.browser;return r.Firefox&&(o=.015),n&&n!=-1?Math.min(e/n-o,1):e/t-o},pad:function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},getTimeZone:function(){var e,t=$root,n=t.helpers;return e=(new Date).getTimezoneOffset(),e=(e<0?"+":"-")+n.pad(parseInt(Math.abs(e/60)),2)+n.pad(Math.abs(e%60),2)},getFontsChecksum:function(){var e,t,n=this.$root,o=0,i=[],r=["Cambria","Cardo","Constantia","Crimson Text","Droid Serif","Georgia","IM Fell DW Pica","OFL Sorts Mill Goudy TT","Old Standard TT","Palatino Linotype","Times New Roman","Times","Vollkorn","Arial","Arial Black","Arial Narrow","Calibri","Cantarell","Candara","Corbel","Droid Sans","Helvetica","Impact","Josefin Sans Std Light","Microsoft Sans Serif","Molengo","Nobile","Tahoma","Trebuchet MS","Verdana","Yanone Kaffeesatz","Comic Sans MS","Lobster","Reenie Beanie","Tangerine","Andale Mono","Consolas","Courier","Courier New","Droid Sans Mono","Inconsolata","Lucida Console"];n.browser.IE&&n.utils.dom.createDOMFragment({tag:"object",parent:document.body,id:"dlgHelper",attributes:{classid:"clsid:3050f819-98b5-11cf-bb82-00aa00bdce0b",width:"0px",height:"0px"}});var s=document.getElementById("dlgHelper");if(s&&s.fonts)for(e=s.fonts.count,t=1;t<e+1;t++)i.push(s.fonts(t));else{var a=new this.Detector;for(t=0;t<r.length;t++)a.detect(r[t])&&i.push(r[t])}for(t=0;t<i.length;t++)o+=i[t].charCodeAt(0)+i[t].charCodeAt(i[t].length/2)+i[t].charCodeAt(i[t].length-1);return o},Detector:function(){function e(e){var n=!1;for(var o in t){r.style.fontFamily=e+","+t[o],i.appendChild(r);var d=r.offsetWidth!=s[t[o]]||r.offsetHeight!=a[t[o]];i.removeChild(r),n=n||d}return n}var t=["monospace","sans-serif","serif"],n="mmmmmmmmmmlli",o="72px",i=document.getElementsByTagName("body")[0],r=document.createElement("span");r.style.fontSize=o,r.innerHTML=n;var s={},a={};for(var d in t)r.style.fontFamily=t[d],i.appendChild(r),s[t[d]]=r.offsetWidth,a[t[d]]=r.offsetHeight,i.removeChild(r);this.detect=e},setNatural:function(e){for(var t,n,o=this.$root,i=function(e){if(n=e.domEvent,t=n?n.target||n.srcElement:e,!t.style.width||!t.style.height)if("undefined"==typeof t.naturalWidth){var o=new Image;o.src=t.src,t.style.width=o.width+"px",t.style.height=o.height+"px"}else t.style.width=t.naturalWidth+"px",t.style.height=t.naturalHeight+"px"},r=0;r<e.length;r++)e[r].complete?i(e[r]):o.event.dom.bind(e[r],{event:"load",listener:i})},findMaxZindex:function(){for(var e,t=0,n=this.$root,o=n.utils,i=document.getElementsByTagName("div"),r=document.getElementsByTagName("span"),s=document.getElementsByTagName("iframe"),a=o.array.concat(i,r,s),d=0,l=a.length;d<l;d++)a[d].style.zIndex&&a[d].style.zIndex>0&&parseInt(t)<parseInt(a[d].style.zIndex)&&(t=a[d].style.zIndex),e=o.dom.style.getCssProp(a[d],"z-index"),e&&e>0&&parseInt(t)<o.dom.style.getCssProp(a[d],"z-index")&&(t=o.dom.style.getCssProp(a[d],"z-index"));return t},getCookieSupport:function(){var e=!0;do{var t="gCStest="+Math.floor(1e8*Math.random());if(document.cookie=e?t+";expires=Tue, 01-Jan-2030 00:00:00 GMT":t,document.cookie.indexOf(t)!==-1)return document.cookie=t+";expires=Sat, 01-Jan-2000 00:00:00 GMT",e}while(!(e=!e));return null},fixCorruptCookie:function fixCorruptCookie(cname){var rt=$root,ut=rt.utils,capCountObj,expiration,date=new Date,capExp=365,deletedCookie={};if(expiration=new Date(date.setDate(date.getDate()+capExp)),ut.cookie.has(cname)){capCountObj=eval("("+ut.cookie.get(cname)+")");for(var attr in capCountObj)capCountObj[attr]===capCountObj[attr]&&capCountObj[attr].toString().indexOf("NaN")==-1||(deletedCookie={deletedCookieContent:capCountObj},rt.event.fire("sendClientLog",{params:{capara:ut.object.stringify(deletedCookie)}}),delete capCountObj[attr]);ut.cookie.set(cname,ut.object.stringify(capCountObj),expiration)}},fixCorruptLocalStorageItem:function fixCorruptLocalStorageItem(itemName){var rt=$root,ut=rt.utils,capCountObj,expiration,date=new Date,capExp=365,deletedLocalStorageItem={},prodCodes=["a","b","c","d","e","f","h","i","n","o","s","t","u","x","z"];if(expiration=new Date(date.setDate(date.getDate()+capExp)),null!=localStorage.getItem(itemName)){capCountObj=eval("("+localStorage.getItem(itemName)+")");for(var attr in capCountObj)(capCountObj[attr]!==capCountObj[attr]||capCountObj[attr].toString().indexOf("NaN")!=-1||"fc"===itemName&&prodCodes.indexOf(attr)!=-1)&&(deletedLocalStorageItem={deletedLocalStorageItem:capCountObj},rt.event.fire("sendClientLog",{params:{capara:ut.object.stringify(deletedLocalStorageItem)}}),delete capCountObj[attr]);localStorage.setItem(itemName,JSON.stringify(capCountObj)),ut.storage.setExpireDate(itemName,new Date(expiration))}},validLink:function(e){var t,n,o=e.href.indexOf("//"),i=window.location.href.indexOf("//");return o==-1?o=0:o+=2,i==-1?i=0:i+=2,t=e.href.substring(o,e.href.length),n=window.location.href.substring(i,window.location.href.length),e.href.indexOf("javascript:void(0)")==-1&&("#"!=t[t.length-1]||(t="/"==t[t.length-2]?t.substring(0,t.length-2):t.substring(0,t.length-1),"#"==n[n.length-1]&&(n=n.substring(0,n.length-1)),"/"==n[n.length-1]&&(n=n.substring(0,n.length-1)),0!=t.length&&t!=n))},collectLinks:function(e,t){for(var n=[],o=[],i=0,r=0,s=0;s<e.length;s++)this.validLink(e[s])&&(e[s].onclick?(o[i]=e[s],i++):(n[r]=e[s],r++));return t?o:n},containsJS:function(e){return e.indexOf("javascript")>-1},checkValidURL:function(e){var t=e.match("^(\\w+)\\:.*");return!(t&&t.length>1)||("http"==t[1]||"https"==t[1])},whichTransitionEvent:function(e){var t,n;n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]},mapReduceLinks:function(e){for(var t,n,o=$root,i=o.utils,r={},s=0;s<e.length;s++)e[s].href&&this.checkValidURL(e[s].href)&&!this.containsJS(e[s].href)&&(t=i.string.parseURL(e[s].href),n=t.parent_domain,n in r?r[n]++:r[n]=1);return r},navigate:function(e){window.location=e},isNative:function(e){if(e.toString().indexOf("[native code]")>-1)return!0},replaceHrefWithOnclick:function(e){for(var t={},n={},o=$root,i=o.utils,r=0;r<e.length;r++)e[r].hasAttribute("href")&&!e[r].hasAttribute("onclick")&&(e[r].onclick=function(e){try{var o,r=$root,s=r.comm.settings.responses.impression;return r.event.fire("sendClientLog",{params:{click:e.which,url:this.href}}),t=i.string.parseURL(this.hostname),n=i.string.parseURL(window.location.hostname),o=this.hostname==window.location.hostname||n.parent_domain==t.parent_domain?"b":"z",2==e.which||!s.prs[o]||(r.event.fire("renderProductInScreen",{clickData:{prodCode:o,href:this.href,target:this.target}}),!1)}catch(e){r.loggly.errorLog(e,"_helpers replaceHrefWithOnclick unexpected error in handler for event 'onclick'")}})},getScaleFactor:function(e){var t=1,n=this.getScreenOrientation();return e==-1&&(e=728),t="portrait"==n?this.getScreenDimensions().width/Number(e):this.getScreenDimensions().height/Number(e)},getScreenOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},getScreenDimensions:function(){return{width:Math.min(document.body.clientWidth||document.documentElement.clientWidth,window.innerWidth),height:Math.min(document.body.clientHeight||document.documentElement.clientHeight,window.innerHeight)}},makeContainer:function(e,t){if(null===document.getElementById(e)){var n=document.createElement("div");n.id=e,n.setAttribute("style","position:fixed;width:100%;height:100%;left:0;right:0;bottom:0px;z-index:2147483646;pointer-events:none !important;"),document.body.insertBefore(n,document.body.childNodes[0])}},appendToContainer:function(e,t,n,o,i){var r=this.$root,s=r.helpers,a=document.getElementById(e),d="position:fixed;width:100%;left:0;right:0;bottom:0px;z-index:2147483646;",l=s.getWebkitTransformString(t,"left bottom");a.setAttribute("style",d+" "+l),a.appendChild(document.getElementById(i))},setDims:function(e,t){var n=this.$root,o=n.utils,i=o.dom;return e.heightOpen=90,"m"==n.browser.getDevice()?(e.heightOpen="text"===t?190:90,e.btnBtm=10,e.thumbWidth=160,e.thumbHeight=130,e.contentWidth=450,e.contentHeight=140,e.colBuffer=25,e.fontSize=26,e.heightClose=80,e.iconSize=47,e.logoWidth=70,e.logoHeight=70,i.innerDimensions.getHeight()<i.innerDimensions.getWidth()&&(e.thumbWidth=90,e.thumbHeight=65,e.heightOpen="text"==t?110:90,e.heightClose=50,e.colBuffer=25,e.fontSize=20,e.iconSize=27,e.logoWidth=30,e.logoHeight=30,e.btnBtm=5,e.btnfontSize=e.fontSize-5,e.btnpaddingwidth=8,e.btnpaddingheight=20,e.contentHeight=70)):"t"==n.browser.getDevice()&&(e.heightOpen="text"==t?110:90,e.btnBtm=25,e.thumbWidth=90,e.thumbHeight=65,e.contentWidth=400,e.contentHeight=67,e.colBuffer=25,e.fontSize=22,e.heightClose=50,e.iconSize=25,e.btnBtm=10,e.logoHeight=30,e.btnBtm=10,i.innerDimensions.getHeight()<i.innerDimensions.getWidth()&&(e.contentHeight=72)),e},downScale:function(e,t,n,o,i){
for(var r=document.getElementById(i).scrollWidth;(e.height*n*t>o||e.width*n*t>r)&&!(t<=0);)t-=.1;return t},setScaleCapping:function(e,t,n,o,i){var r=this.$root,s=r.comm.settings.responses.impression.prs[i].behavior,a=this.getScreenDimensions().height,d=this.getScreenDimensions().width,l=a>d,c={m:{heightCapKey:l?"mobilePortraitHeightCap":"mobileLandscapeHeightCap",defaultCapRatio:.5},t:{heightCapKey:l?"tabletPortraitHeightCap":"tabletLandscapeHeightCap",defaultCapRatio:.5}},u=c[r.browser.getDevice()];if(!u)return null;"number"!=typeof s[u.heightCapKey]&&(s[u.heightCapKey]=Number(s[u.heightCapKey]),isNaN(s[u.heightCapKey])&&(s[u.heightCapKey]=void 0));var h=a*(s[u.heightCapKey]||u.defaultCapRatio)-n*o;return e.height*o*t>h?this.downScale(e,t,o,h,container_name):null},getWebkitTransformString:function(e,t){var n=this.$root,o=" -ms-transform: scale("+e+");  -moz-transform: scale("+e+");  -o-transform: scale("+e+");  -webkit-transform: scale("+e+"); ",i=" -webkit-transform-origin: "+t+";  -o-transform-origin: "+t+";  -moz-transform-origin: "+t+";  -ms-transform-origin: "+t+"; ",r=o+i,s="";return"iPhone"==n.browser.getOS()&&(s="translateZ(0);backface-visibility: hidden;")," -webkit-perspective: 1000; "+s+" "+r},enlargeTo:function(){return"-webkit-perspective: 1000;"},setHorizontalTransform:function(e,t){e.style.transform="translate("+t+"px,0)",e.style.transition="all 2s ease-in-out",e.style["-webkit-transition"]="all 1s ease-in-out",e.style["-o-transition"]="all 1s ease-in-out",e.style["-moz-transition"]="all 1s ease-in-out"},replaceTransform:function(e,t,n,o){var i=n.match(t);null!=i&&i[0]?e.style[o]=i[0]:e.style[o]=""},animateMarginTop:function(e,t,n){e.style["margin-top"]=n+"px",e.style.transition="margin-top "+t+"ms ease-in-out",e.style["-webkit-transition"]="margin-top "+t+"ms ease-in-out",e.style["-o-transition"]="margin-top "+t+"ms ease-in-out",e.style["-moz-transition"]="margin-top "+t+"ms ease-in-out",e.style["-ms-transition"]="margin-top "+t+"ms ease-in-out"},setFadeTransform:function(e,t,n,o){return e.style.opacity=n,0==o||(e.style.transition="opacity "+t+"ms ease-in",e.style["-webkit-transition"]="opacity "+t+"ms ease-in-out",e.style["-o-transition"]="opacity "+t+"ms ease-in-out",e.style["-moz-transition"]="opacity "+t+"ms ease-in-out",void(e.style["-ms-transition"]="opacity "+t+"ms ease-in-out"))},setVerticalTransform:function(e,t,n,o,i,r){var s="undefined"!=typeof i?i:1;return e.style.transform.indexOf("scale")===-1&&(e.style["-ms-transform"]="",e.style["-webkit-transform"]="",e.style["-o-transform"]="",e.style["-moz-transform"]=""),o?(e.style["-ms-transform"]+=" translate(0,"+-n+"px)",e.style["-webkit-transform"]+=" translate(0,"+-n+"px)",e.style["-o-transform"]+=" translate(0,"+-n+"px)",e.style["-moz-transform"]+=" translate(0,"+-n+"px)",e.style["-webkit-transform"]+=" transform(0,"+-n+"px);",e.style["-o-transform"]+=" transform(0,"+-n+"px);",e.style["-moz-transform"]+=" transform(0,"+-n+"px);",e.style["-ms-transform"]+=" transform(0,"+-n+"px);"):(e.style.transform+=" translate(0,"+-n*s+"px)",e.style["-ms-transform"]+=" translate(0,"+-n*s+"px)",e.style["-webkit-transform"]+=" translate(0,"+-n*s+"px)",e.style["-o-transform"]+=" translate(0,"+-n*s+"px)",e.style["-moz-transform"]+=" translate(0,"+-n*s+"px)"),0==r||(e.style.transition="all, "+t+"ms ease-in-out",e.style["-webkit-transition"]="all, "+t+"ms ease-in-out",e.style["-o-transition"]="all, "+t+"ms ease-in-out",e.style["-moz-transition"]="all, "+t+"ms ease-in-out",e.style["-ms-transition"]="all, "+t+"ms ease-in-out",!0)},setDownAndTransformUp:function(e,t,n){!n||!t||t<=0||(e.style.transform="translateY("+t+"px)",setTimeout(function(){e.style.transform="translateY(0)";var t=n||"1000";e.style.transition="transform "+t+"ms ease-in-out"},10))},isSearchProduct:function(e){var t="soxdp";return t.indexOf(e)!=-1},isTopProduct:function(e){var t="h";return t.indexOf(e)!=-1},inIframe:function(){try{return window.self!==window.top}catch(e){return"error"}},evalJSFromHtml:function evalJSFromHtml(html,noIframe){if(noIframe){var element=document.createElement("div");element.innerHTML=html;for(var scripts=element.getElementsByTagName("script"),i=0;i<scripts.length;++i){var script=scripts[i];eval(script.innerHTML),""!=script.src&&this.addScriptSrc(script.src)}}},findComment:function(e,t){var n;if(n=t.content?t.content.indexOf(["<!--",e,"-->"].join("")):-1,n!=-1)return!0},addScriptSrc:function(e){var t=document.createElement("script"),n=document.getElementsByTagName("body")[0];t.type="text/javascript",t.src=e,n.appendChild(t)},addScriptWithCallback:function(e,t){if(e&&e.indexOf("http")!==-1){var n=document.createElement("script"),o=!1,i=document.getElementsByTagName("head")[0];n.onload=n.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,t(),n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n))},n.setAttribute("type","text/javascript"),n.setAttribute("src",e),i.appendChild(n)}},shouldBlock:function(){var e,t=$root,n=t.utils,o=window.location.href;return e=n.string.parseURL(o),e.domain.indexOf("googleusercontent.com")!=-1||e.domain.indexOf("google.co.in")!=-1||(!!e.domain.match(/\d+\.\d+\.\d+\.\d+/)||(e.protocol.indexOf("file")!=-1||void 0))},enableScroll:function(e,t){t?($root.event.dom.unbind(e,"touchmove",this.disableTouchmove),$root.event.dom.unbind(e,"mousewheel",this.disableTouchmove),$root.event.dom.unbind(e,"DOMMouseScroll",this.disableTouchmove)):($root.event.dom.bind(e,{event:"touchmove",listener:this.disableTouchmove}),$root.event.dom.bind(e,{event:"mousewheel",listener:this.disableTouchmove}),$root.event.dom.bind(e,{event:"DOMMouseScroll",listener:this.disableTouchmove}))},disableTouchmove:function(e){this.$root.utils.dom.event.stop(e.domEvent)},moveAndHideElement:function(e,t){return e&&t?(this.removeAttr(e,"id"),this.removeAttr(e,"class"),this.removeAttr(e,"name"),this.$root.event.dom.unbindAll(e),e.setAttribute("style","display:none !important"),!1):e?(e.parentNode.removeChild(e),!0):void 0},removeAttr:function(e,t){if(e){1==e.nodeType&&e.removeAttribute(t);for(var n=0;n<e.childNodes.length;n++)1==e.childNodes[n].nodeType&&e.childNodes[n].removeAttribute(t),this.removeAttr(e.childNodes[n],t)}},removeBorders:function(e){e&&(e.style.borderLeft="",e.style.borderRight="",e.style.borderTop="")},settings:{iframeNum:0,postedForms:0}});var comm=$root.$create("comm",{loadScript:function(e,t,n,o){var i,r=this,s=this.$root,a="",d=[];if(s.settings.protocol=s.settings.siteUrl.substr(0,s.settings.siteUrl.indexOf("://")+3),"object"==s.what(t)){for(var l in t)s.utils.array.push(d,d.length||e.indexOf("?")!=-1?"&":"?",encodeURIComponent(l),"=",encodeURIComponent(t[l]));a=d.join("")}else"string"==s.what(t)&&(a=t);if(e+=a,null==e.match(/^\w+:\/\//)&&(e=s.settings.protocol+e),i=n?function(e){var t=r.$root,i=r.loadedScripts;return!!i[e]||(i[e]=!0,void("undefined"==t.what(o)?t.event.fire(n):t.event.fire(n,o)))}:function(){r.loadedScripts[e]=!0},!this.loadedScripts[e]){this.loadedScripts[e]=!1;var c=document.createElement("script");c.type="text/javascript",c.charset="UTF-8",c.onreadystatechange=function(){try{/complete|loaded/.test(this.readyState)&&!r.loadedScripts[e]&&i(e)}catch(t){s.loggly.errorLog(t,"_comm loadScript onreadystatechange unexpected error in handler for event 'onreadystatechange'")}},c.onload=function(){try{i(e)}catch(t){s.loggly.errorLog(t,"_comm loadScript onload unexpected error in handler for event 'onload'")}},c.src=e;var u=document.getElementsByTagName("head");return u=u[0]||document.body,c=u.appendChild(c),!0}i()},supportsCORS:function(){var e=window.XMLHttpRequest?new XMLHttpRequest:null;return this.settings.cors=e&&"withCredentials"in e},sendMessage:function(e){var t=this.$root,n=t.utils.dom.element.$("iceCommFrame");n&&n.contentWindow?n.contentWindow.postMessage(e,"*"):t.logger.error("Could not get comm frame.",this.sendMessage)},receiveMessage:function receiveMessage(event){var de=event.domEvent,message=de.data,data,rt=this.$root,st=rt.settings,lg=rt.logger,hp=rt.helpers,frameName,frame,stopMessage,suspended,origin=(de.origin||de.domain).replace(rt.settings.protocol,"");if(suspended=hp.getVar("suspended"),"go"==message&&suspended){try{frameName=event.domEvent.source.name,frameName||(frameName=event.domEvent.source.frames.frameElement.id),frame=document.getElementById(frameName),stopMessage="Stop",frame?frame.contentWindow.postMessage(stopMessage,"*"):top.contentWindow.postMessage(stopMessage,"*")}catch(e){}return hp.setVar("suspended",!1),void rt.event.fire("beforeGSD")}if(this.settings.responses.gsd&&0==origin.indexOf(this.settings.responses.gsd.rs)){"("==message.charAt(0)&&")"==message.charAt(message.length-1)&&(message=message.substring(1,message.length-1));try{data="undefined"!=rt.what(window.JSON)&&window.JSON.parse?window.JSON.parse(message):eval("("+message+")"),"afterImpression"==data.type&&(st.runScript=!1)}catch(ex){return void lg.error("Data parsing failed: "+ex.message+". message:"+message+" ",this.receiveMessage)}"error"==data.action?lg.error(data.data,this.receiveMessage):"event"==data.action?rt.event.fire(data.type,data.data):data.action||rt.event.fire("afterImpression",data)}},setAdsParams:function(e){var t,n,o,i,r,s,a,d=this.$root,l=d.settings,c=d.utils,u=d.helpers,h=d.comm.settings.responses.gsd,p=d.settings.impression.params,m=[],g=d.comm.settings.responses.impression.rauth,f=d.comm.settings,v=f.responses.impression.fpid,b={},w=u.getTimeZone();return s=e,r=u.getVar("advtq",null,!0),i=l.hooksMap[s.hookId],i&&(t=s.hookId,i.bdc=++l.bdc,s.dim&&(b=s.dim,b=this.roundDimensions(b)),s.capara&&(c.object.size(s.capara)?c.object.size(s.capara)>0&&(a=c.object.stringify(s.capara),s.params=c.object.clean({capara:a})):delete s.capara),n=c.object.clean(c.object.extend({lid:t,bdc:i.bdc,prod_t:i.prod,miw:b.miw,maw:b.maw,mih:b.mih,garc:s.garc,mah:b.mah,vpfc:u.getVpfc(s.prod,t)},e.params||{},d.helpers.getHookSD(t,!0))),m[0]=n),o=c.object.clean(c.object.extend({hks:c.object.stringify(m),rid:h.rid,jsv:d.version,sr:[screen.availWidth,screen.availHeight].join("X"),rts:c.date.now(),cfv:d.comm.settings.flashVersion,ifip:l.ifip,fpid:v,ref:l.impression.params.ref,refq:l.impression.params.refq,trce:l.trce,ose:l.ose||"",cb:"getAdsResponse",os:p.os,ov:p.ov,br:p.br,bv:p.bv,dv:p.dv,ce:p.ce,advtq:r,purl:l.customerUrl,tzo:w,ls:d.comm.settings.ls,c:l.c,strg:l.strg,msgvwcoo:l.msgvwcoo||"",msgvwimp:l.msgvwimp||""},g,l.nativeAppParams))},isGetAdProduct:function(e){var t=this.$root,n=t.settings;return e==n.getAdsProds.fl||e==n.getAdsProds.fr||e==n.getAdsProds.u||e==n.getAdsProds.h||e==n.getAdsProds.s||e==n.getAdsProds.x||e==n.getAdsProds.o||e==n.getAdsProds.d||e==n.getAdsProds.e||e==n.getAdsProds.z||e==n.getAdsProds.b||!isNaN(e)},addSpecialGetAdsParams:function(e){for(var t in e)if(!this.isGetAdProduct(t))for(var n in e)this.isGetAdProduct(n)&&(e[n][t]=e[t]);return e},sendAjaxRequest:function(e){function t(e){if(!e.done&&!e.aborted){var t=e.xhr||e.xdr;e.done=!0,e.xdr||200==e.xhr.status?e.onSuccess&&s.comm.handleAjaxResponse({action:"event",type:e.onSuccess,data:t.responseText}):(e.xdr||0!=e.xhr.status)&&s.comm.handleAjaxResponse({action:"error",data:"Ajax request failed."})}}function n(){if(d&&!d.done){var e=d.xhr||d.xdr;d.aborted=!0,e.abort(),s.comm.handleAjaxResponse({action:"error",data:"Ajax request timed out."}),d.xhr&&delete d.xhr.onreadystatechange}}function o(){var e=d.xhr||d.xdr,t=d.params||{},o=d.method||"GET",i=d.url||window.location.href;d.queryString=(d.queryString?d.queryString+"&":"")+s.utils.object.toQueryString(t,!0).substr(1),"GET"==d.method&&d.queryString&&(d.url+=(d.url.indexOf("?")>-1?"&":"?")+d.queryString),d.timeout>0&&setTimeout(n,d.timeout),d.xhr?d.xhr.open(o,i,!0):d.xdr.open(o,i),"POST"==o?(d.xhr&&"function"==s.what(d.xhr.setRequestHeader)&&d.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(d.queryString)):e.send()}var i,r,s=this.$root,a=window.XMLHttpRequest?new XMLHttpRequest:null;if("object"!=s.what(e))return null;if(a&&"withCredentials"in a?i=a:window.XDomainRequest&&(r=new XDomainRequest),!i&&!r)return null;i?i.onreadystatechange=function(){try{if(!d||!d.xhr)return;4==d.xhr.readyState&&t(d)}catch(e){s.loggly.errorLog(e,"_comm sendAjaxRequest onreadystatechange unexpected error in handler for event 'onreadystatechange'")}}:r.onload=function(){try{t(d)}catch(e){s.loggly.errorLog(e,"_comm sendAjaxRequest onload unexpected error in handler for event 'onload'")}};var d=s.utils.object.extend({xhr:i,xdr:r,process:o},e);return d.process(),d},handleAjaxResponse:function handleAjaxResponse(response){var rt=this.$root,data;if("error"==response.action)rt.logger.error(response.data,this.handleAjaxResponse);else if("event"==response.action){try{data="undefined"!=rt.what(window.JSON)&&window.JSON.parse?window.JSON.parse(response.data):eval("("+response.data+")")}catch(ex){return void rt.logger.error("Data parsing failed: "+ex.message,this.handleAjaxResponse)}rt.event.fire(response.type,data)}},getRedirectUrl:function(e,t,n,o){var i,r=this.$root,s=r.settings,a=r.utils,d=a.object,l=r.helpers.getHookData(e.id),c=r.helpers.getAdByMidx(l.ads,l.ads[e.currentAdIndex].midx);if(c.noClickPrefix)return t||c.redirectURL;o&&o.capara&&(i=o.capara,"object"==r.what(i)&&(i=r.utils.object.stringify(i)));var u=a.date.now(),h=d.clean(d.extend({rid:this.settings.responses.gsd.rid,bdc:e.bdc,midx:e.midx||l.ads[e.currentAdIndex].midx,rts:u,vt:a.timer.poll("adView"+e.id),clk_t:n,jsv:r.version,prod_t:e.prod||"",tcln:e.tcln||"",trce:s.trce,pst:e.pst||"",cv:e.viewed?1:0,refq:s.impression.params.refq||"",ifip:s.ifip||"",cmpid:c.campaignUuid,capara:i},r.helpers.getHookSD(e.id)));h.rurl=t||c.redirectURL||"",h.rurl=r.helpers.validateProtocol(h.rurl);var p=[s.protocol,this.settings.responses.gsd.rs,"/action/clk.htm"].join("");return p+d.toQueryString(h,!0)},roundDimensions:function(e){return e.miw&&(e.miw=Math.floor(e.miw)),e.maw&&(e.maw=Math.ceil(e.maw)),e.mih&&(e.mih=Math.floor(e.mih)),e.mah&&(e.mah=Math.ceil(e.mah)),e}},{settings:{responses:{},errorReportingUrl:"http://cel.infolinks.com/",ls:"",products:{}},loadedScripts:{},pendingRequests:[]},!0);comm.$create("flash",{getSwfUrl:function(){return["//",this.$root.settings.hosts.resources,"/flash/ic5.swf"].join("")},embed:function(){var e=this.$root,t=this.getSwfUrl();e.utils.timer.start("tmr_fsh"),e.utils.dom.createDOMFragment({tag:"div",parent:document.body,style:{display:"block",position:"absolute",top:"1px",left:"1px",width:"1px",height:"1px"},innerHTML:['<embed pluginspage="http://www.macromedia.com/go/getflashplayer" src="',t,'" width="1" height="1" wmode="transparent" name="ilfc" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>'].join("")})},embedIE:function embedIE(options){var rt=this.$root,st=rt.settings,ut=rt.utils,swf=this.getSwfUrl(),id="ilfc"+rt.utils.number.next("flashEmbedConter");this.requests[options.url]={request:ut.object.extend(options,{open:!1,complete:!1})};var flashVars=ut.object.toQueryString({url:options.url,method:options.method,success:options.onSuccess,error:options.onSuccess},!0).substr(1);options.params&&(flashVars+=["&",ut.object.toQueryString(options.params,!0).substr(1)].join("")),window[id+"_DoFSCommand"]=function(command,args){var response,func;try{func=eval(command),response=eval(decodeURIComponent(args))}catch(ex){return void rt.logger.error("Error evaluating response.",this)}func.call(func.$parent,response)},rt.utils.timer.start("tmr_fsh"),ut.dom.createDOMFragment({tag:"div",parent:document.body,style:{display:"block",position:"absolute",top:"1px",left:"1px",width:"1px",height:"1px"},innerHTML:['<object id="',id,'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="1" height="1" align="middle">','<param name="movie" value="',swf,'" />','<param name="quality" value="high" />','<param name="allowScriptAccess" value="always" />','<param name="wmode" value="transparent" />','<param name="flashvars" value="environment=IE&pcode=',st.impression.pcode,"&",flashVars,'" />',"</object>","<sc","ript event=FSCommand(command,args) for=",id,">\n ",id,"_DoFSCommand(command, args)</sc","ript>"].join("")}),this.flashLoadComplete()},flashLoadUpdate:function(e){this.flashLoadAmount=e},flashLoadComplete:function(){var e=this.$root;for(this.flashLoadAmount=10,this.flashElement=window["ilfc"+e.utils.number.get("flashEmbedConter")]||document.ilfc,e.utils.timer.stop("tmr_fsh");this.$parent.pendingRequests.length;)e.event.fire("sendImpression",e.comm.pendingRequests.shift())},sendURLRequest:function(e,t,n,o,i,r){this.requests[e]={request:{url:e,method:t,params:n,success:o,error:i,contextReferenceKey:r,open:!1,complete:!1}},this.flashElement.sendURLRequest(e,t,n,o,i,r)},requestOpenHandler:function(e){this.requests[e.url].request.open=!0},requestCompleteHandler:function requestCompleteHandler(response){var rt=this.$root,data,request=this.requests[response.url];if(!request)return void rt.logger.error("Missing Request Object");if(request.request.complete=!0,request.response=response,response.success){var event=response.success;try{data=eval(response.data.replace(/^data=/,""))}catch(e){return void rt.logger.error("Error Evaluating Response.")}rt.event.fire(event,data)}},requestError:function(e){if(this.requests[e.url].response=e,e.error){var t=e.error;this.$root.event.fire(t,e)}},getFlashVersion:function(){var e,t=-1,n="Shockwave Flash",o=navigator.plugins,i=this.$root.browser;if(o&&o.length&&(e=o[n+" 2.0"]||o[n],e&&(t=parseFloat(e.description.replace(/[a-z ]+([0-9\.]+)[a-z ]+/i,"$1.")))),t==-1&&i.IE&&i.Windows){for(var r,s=[".9",".7",".6",".3",".3",""],a=[null,null,"WIN 6,0,21,0",null,"WIN 3,0,18,0","WIN 2,0,0,11"],d=0,l=s.length;d<l;d++){try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"+s[d]),t=a[d]?a[d]:r.GetVariable("$version")}catch(c){}if(t!=-1)break}t!=-1&&(t=parseFloat(t.replace(/^[a-z ]+/i,"").replace(/,/g,".")))}return t}},{requests:{}},!1),comm.bind({event:"initComm",listener:{init:function(){var e=this.$root,t=this.settings,n=e.browser;t.initialized||(t.initialized=!0,t.flashVersion=this.flash.getFlashVersion(),e.comm.settings.listeningToMessages||e.event.dom.bind(window,{event:"message",listener:this.receiveMessage}),(n.iPhone||n.iPad)&&window.postMessage?t.mode="formsubmit":this.supportsCORS()?t.mode="cors":window.postMessage?(t.mode="messaging",t.messagingReady=!1,e.utils.dom.createDOMFragment({tag:"div",style:{display:"none"},parent:document.body,innerHTML:['<iframe id="iceCommFrame" src="',e.settings.protocol,t.responses.gsd.rs,'/comm2.htm" width="1" height="1" frameborder="0" scrolling="no"></iframe>'].join("")})):t.flashVersion>=9?(t.mode="flash",e.browser.IE||this.flash.embed()):(t.mode="unsupported",e.logger.error("Unsupported comm mode",this.init)))}}}),comm.bind({event:"sendImpression",listener:{sendImpression:function(e){var t,n,o,i,r,s,a=this.$root,d=a.browser,l=a.settings,c=this.settings,u=a.utils.array,h=e.data.options,p=e.data.beforeSend,m="function"==a.what(p),g={IE:2048,Other:8192};if(d.iPhone||d.iPad){var f,v=[];m&&p.call(a,"i");for(var b in h.params)u.push(v,{tag:"input",type:"hidden",attributes:{name:b},value:h.params[b]});if(f=document.getElementById("IL_FORM_CONT")){var w=f.parentNode;w.removeChild(f)}f=a.utils.dom.createDOMFragment({tag:"div",parent:document.body,id:"IL_FORM_CONT",style:{display:"none"},children:[{tag:"form",id:"IL_FORM",children:v,attributes:{method:h.method,action:h.url,target:"IL_FRAME"}},{tag:"div",id:"IL_FRAME_CONT",innerHTML:'<iframe id="IL_FRAME" name="IL_FRAME" src="'+l.blankURL+'" width="1" height="1" frameborder="0" scrolling="no"></iframe>'}]}),f&&document.getElementById("IL_FORM").submit()}else if("cors"==c.mode)m&&p.call(a,"a"),this.sendAjaxRequest(h);else if("messaging"==c.mode)if(c.messagingReady){m&&p.call(a,"a");var y=a.utils.object.stringify({action:"ajax",data:h});this.sendMessage(y)}else a.utils.array.push(this.pendingRequests,e.data);else if("flash"==c.mode)d.IE?(m&&p.call(a,"f"),this.flash.embedIE(h)):10==this.flash.flashLoadAmount&&this.flash.flashElement?(m&&p.call(a,"f"),this.flash.sendURLRequest(h.url,h.method,h.params,h.onSuccess,h.onSuccess,1)):a.utils.array.push(this.pendingRequests,e.data);else{for(m&&p.call(a,"s"),t=h.params.ptxt,n=a.utils.string.qw("ptxt plinks pimgs phdrs pdesc page_keyw ptitle"),s=n.length,r=0,s=n.length;r<s;r++)h.params[n[r]]="";if(a.utils.object.clean(h.params),o=a.utils.object.toQueryString(h.params).length+h.url.length+document.location.href.length+navigator.userAgent.length+document.cookie.length+400,i=g[d.IE?"IE":"Other"]-o,i<0)return void a.logger.error("Request too long for GET.",this.sendImpression);h.params.ptxt=i>0?t.substring(0,i):"",h.params.twnum=a.helpers.countWords(h.params.ptxt),this.loadScript(h.url,h.params)}}}}),comm.bind({event:"callGetAds",listener:{callGetAds:function(e){var t=this.$root,n={},o=t.settings,i=e.data.hookId,r=t.comm.settings.responses.gsd,s=t.utils;t.helpers.getHookData(i)||t.helpers.setHookData(i,"pending"),n=this.setAdsParams(e.data),s.cookie.getCCP()&&(n.usprivacy=s.cookie.getCCP()),"undefined"!=t.what(window.x1)&&"undefined"!=t.what(window.x2)&&(n[window.x1]=window.x2),localStorage.getItem("intentiq-apn")&&(n["intentiq-apn"]=localStorage.getItem("intentiq-apn"));for(var a in o.il_ls)n[a]=o.il_ls[a];n.hbnr=!!t.settings.pbIceLoaded,n.msgvwcoo&&delete n.msgvwcoo,n.msgvwimp&&delete n.msgvwimp,t.comm.loadScript(r.rs+"/action/getads.htm",n)}}}),comm.bind({event:"getAdsResponse",listener:{getAdsResponse:function(e){var t=this.$root,n=t.settings,o=t.helpers,i=t.comm.settings.responses.impression,r=t.comm.settings;e.data=this.addSpecialGetAdsParams(e.data),o.checkForAttrToRemove(e.data.msgvwcoo,e.data.msgvwimp,i);for(var s in e.data){if(!isNaN(s))return void t.event.fire("getadsResponseBubble",e.data[s]);if(s.indexOf(n.getAdsProds.u)!=-1)t.event.fire("getadsResponseInplace",e.data[s]);else switch(s.replace(/[0-9]/g,"")){case n.getAdsProds.z:case n.getAdsProds.b:case n.getAdsProds.e:t.event.fire("getadsResponseBubble",e.data[s]);break;case n.getAdsProds.h:r.isInscreenE?(r.intopData=e.data[s],r.getadsResponseIntopPending=!0):(r.getadsResponseIntopPending=!1,t.event.fire("getadsResponseIntop",e.data[s]));break;case n.getAdsProds.s:case n.getAdsProds.x:case n.getAdsProds.o:case n.getAdsProds.d:r.isInscreenE?(r.insearchData=e.data[s],r.getadsResponseInsearchPending=!0):(r.getadsResponseInsearchPending=!1,t.event.fire("getadsResponseInsearch",e.data[s]));break;case n.getAdsProds.c:case n.getAdsProds.n:case n.getAdsProds.a:e.data[s].prod=n.inContentProducts[s.replace(/[0-9]/g,"")],t.event.fire("getadsResponseIncontent",e.data[s]);break;case n.getAdsProds.fl:case n.getAdsProds.fr:t.event.fire("getadsResponseInframe",e.data[s])}}}}}),comm.bind({event:"setVpfc",listener:{setVpfc:function(e){var t,n=this.$root,o=n.helpers;if(console.log("setVpfc",e.data),o.supportsSessionStorage()){t=window.sessionStorage;var i=JSON.parse(t.getItem("vpfc"))||{},r=e.data.prod;if("u"==r){var s=e.data.id;i[r]=i[r]||{},i[r][s]=i[r][s]?parseInt(i[r][s])+1:1}else i[r]=i[r]?parseInt(i[r])+1:1;t.setItem("vpfc",JSON.stringify(i))}}}}),comm.bind({event:"sendAdView",listener:{sendAdView:function(e){for(var t,n=this.$root,o=this.settings.responses.gsd,i=n.utils,r=n.settings,s=e.data.params,a=n.settings.hooksMap[e.data.hookId],d=n.helpers.getHookData(a.id),l="undefined",c=[],u=[],h=n.utils.array.push,p=0;p<d.ads.length;p++)d.ads[p].dontShow||(h(c,d.ads[p].midx),h(u,a.bdc));e&&e.data&&e.data.capara&&i.object.size(e.data.capara)>0&&(t=i.object.stringify(e.data.capara));var m=i.object.clean(i.object.extend({rid:o.rid,bdc:n.what(s.bdc)!=l?s.bdc:u.join("~"),midx:n.what(s.midx)!=l?s.midx:c.join("~"),emd:n.what(s.emd)!=l?s.emd:d.ads[a.currentAdIndex].emd||"",rts:i.date.now(),trce:r.trce,prod_t:"unknown",jsv:n.version,ifip:n.settings.ifip||"",skin:a.skin,theme:a.theme,themeset:a.themeset,capara:t,cmpid:d.ads[a.currentAdIndex]?d.ads[a.currentAdIndex].campaignUuid:""},n.helpers.getHookSD(a.id),s,r.nativeAppParams));this.loadScript([o.rs,"/action/adview.htm"].join(""),m,"adViewed",e.data)}}}),comm.bind({event:"sendClientLog",listener:{sendClientLog:function(e){var t,n,o,i=this.$root,r=this.settings.responses.gsd,s=i.utils,a=i.settings,d=i.settings.hooksMap[e.data.params.hookId],l=e.data.params,c="undefined",u=[],h=[],p=i.utils.array.push;if(d){if(t=i.helpers.getHookData(d.id),t&&t.ads)for(var m=0;m<t.ads.length;m++)t.ads[m].dontShow||(p(u,t.ads[m].midx),p(h,d.bdc));var g=s.object.clean(s.object.extend({emd:i.what(l.emd)!=c?l.emd:t&&t.ads&&t.ads[d.currentAdIndex]?t.ads[d.currentAdIndex].emd:"",rts:s.date.now(),jsv:i.version,skin:d.skin,theme:d.theme,themeset:d.themeset,cmpid:t&&t.ads&&t.ads[d.currentAdIndex]?t.ads[d.currentAdIndex].campaignUuid:""},a.nativeAppParams));s.object.extend(g,l),o=s.object.stringify(g),n=s.object.clean({rid:r.rid,prod_t:d.prod,ifip:i.settings.ifip||"",sdata:d.sentence,trce:a.trce,bdc:i.what(l.bdc)!=c?l.bdc:h.join("~"),midx:i.what(l.midx)!=c?l.midx:u.join("~"),capara:l.video===!0?s.object.stringify(l.capara):o})}else g=e.data.params,o=s.object.stringify(g),n=s.object.clean({rid:r.rid,ifip:i.settings.ifip||"",jsv:i.version,trce:a.trce,capara:o});this.loadScript([r.rs,"/action/dcl.htm"].join(""),n)}}}),comm.bind({event:"adViewed",listener:{adViewed:function(e){var t=this.$root,n=t.settings.hooksMap[e.data.hookId];n.viewed=!0}}}),comm.bind({event:"doRedirect",listener:{doRedirect:function(e){var t,n=e.data,o=this.$root,i=o.settings,r=o.browser,s=o.utils,a=n.hook,d=o.helpers.getHookBehavior(a.id,e.data.behavior).adsReuseWindow;if("complete"!=i.clickStatus){n.maxLength||(n.maxLength=r.IE?2048:8192);var l=o.helpers.getHookData(a.id),c=n.url||o.helpers.getAdByMidx(l.ads,l.ads[a.currentAdIndex].midx).redirectURL;o.event.fire(a.type+"HookMouseout",{hookId:a.id});var u=a.node.id||n.cleanHookID;if(i.clickStatus="complete",d||a.bubble&&o.event.fire("hideBubble",{hookId:a.id}),a=null,c.length<n.maxLength){t=u;try{t=i.adWin.name}catch(h){}if(n.cleanHookID&&(t=n.cleanHookID),r.IE&&r.getVersion(!0)<9){var p=o.utils.dom.createDOMFragment({tag:"a",parent:document.body,attributes:{href:c},style:{display:"none"}});!d&&i.adWin&&t==u&&(p.target=t),p.click()}else if(!d&&i.adWin&&t==u)try{i.adWin.location=c}catch(h){window.location=c,i.adWin.close(),i.adWin=null}else window.location=c}else{var m=c,g=null,f=c.indexOf("?");if(f!=-1){m=c.substring(0,f);var v=s.string.toObject(c.substring(f+1),null,!0);g=[];for(var b in v)s.array.push(g,{tag:"input",type:"hidden",value:v[b],attributes:{name:b}})}var w=s.dom.createDOMFragment({tag:"form",parent:document.body,style:{display:"none"},children:g,attributes:s.object.extend({action:m,method:"post"},d?{}:{target:u})});w.submit()}}}}}),comm.bind({event:"productClick",listener:{productClick:function(e){var t=this.$root,n=t.settings,o=e.data.hookId,i=n.hooksMap[o],r=t.helpers,s=t.helpers.getHookData(o),a=e.data.clickType||i.clickType,d=e.data.cleanHookID,l=r.getHookBehavior(o,e.data.behavior),c=t.utils;if("complete"==n.clickStatus)return void("false"===l.rmc||t.event.fire("sendClientLog",{params:{hookId:o,misclickProd:(new Date).getTime()}}));if(("onLink"==a||"onLinkAfterWinOpen"==a)&&s&&s.ads&&s.ads[i.currentAdIndex]&&!s.ads[i.currentAdIndex].redirectURL)return n.clickStatus="none",void(n.adWin&&(t.event.fire("hideBubble",{hookId:o}),n.adWin.close(),n.adWin=null));var u=this.getRedirectUrl(i,e.data.url||null,a,e.data);return l.mi&&l.mi.indexOf(n.mobileIntext.old)==-1?(t.event.fire("sendClientLog",{params:{hookId:i.id,clickLocation:e.data.clickLocation,timeUntilClick:c.timer.poll("mi_timer")}}),void("onWin"==a&&t.event.fire("startClick",{url:u,hook:i,cleanHookID:d}))):(t.helpers.getHookBehavior(i.id,e.data.behavior).adsReuseWindow?setTimeout(function(){t.event.fire("sendClientLog",{params:{hookId:i.id,noLoadEvent:!0}})},3e3):n.adWin=window.open("",i.node.id||d),void t.event.fire("startClick",{url:u,hook:i,cleanHookID:d,behavior:e.data.behavior||null}))}}}),comm.bind({event:"startClick",listener:{updateClickCookie:function(e){var t=this.$root,n=t.settings,o=t.utils,i=o.object,r=t.utils.date.now(),s=e.data.hook,a=t.helpers.getHookData(s.id),d=t.helpers.getAdByMidx(a.ads,a.ads[s.currentAdIndex].midx),l=s.midx||a.ads[s.currentAdIndex].midx,c=i.clean(i.extend({rid:this.settings.responses.gsd.rid,bdc:s.bdc,midx:l,emd:d.emd||"",rts:r,vt:o.timer.poll("adView"+s.id),clk_t:s.clickType,jsv:t.version,prod_t:s.prod||"",tcln:s.tcln||"",pst:s.pst||"",trce:n.trce,ifip:n.ifip||""},t.helpers.getHookSD(s.id))),u=[t.settings.protocol,this.settings.responses.gsd.rs,"/",r,"/ck.js"].join("");this.loadScript(u,c,"doRedirect",e.data)}}}),comm.bind({event:"commRemoteReady",listener:{commRemoteReady:function(){for(this.settings.messagingReady=!0;this.pendingRequests.length;)this.$root.event.fire("sendImpression",this.pendingRequests.shift())}}}),comm.bind({event:"sendErrorReport",listener:{sendErrorReport:function(e){var t=this.$root,n=t.settings,o=t.comm.settings.responses.gsd,i=null,r=null;e.data.cbdata&&(i=e.data.cbdata.evt,r=e.data.cbdata.data,delete e.data.cbdata),this.loadScript(this.settings.errorReportingUrl,t.utils.object.extend({pid:n.customerId,wsid:n.websiteId,jsv:t.version,trce:n.trce,rid:o?o.rid:""},e.data||{}),i,r)}}}),$root.$create("settings",{},{supportedClients:{IE:6,Edge:12,Firefox:1.5,Safari:3,MobileSafari:1,Opera:10,Chrome:1,AppleWebKit:533,ucweb:2},hosts:{resourcesDefault:"resources.infolinks.com",scriptDefaultPath:"/js/"},productCodes:{i:"intext",t:"intag",s:"insearch",f:"inframe",e:"inscreen",c:"incontent",n:"inrecommend",a:"inarticle",h:"intop",u:"inplace"},singleGetAdsProds:{},getAdsProds:{fl:"IL_IF_LEFT",fr:"IL_IF_RIGHT",c:"IL_IN_CONTENT",n:"IL_IN_RECOMMEND",a:"IL_IN_ARTICLE",u:"u_IL_INPLACE",h:"h_IL_INTOP",s:"s_IL_INSEARCH",x:"x_IL_INSEARCH",o:"o_IL_INSEARCH",d:"d_IL_INSEARCH",e:"IL_INSCREEN_e",b:"IL_INSCREEN_b",z:"IL_INSCREEN_z"},inContentProducts:{IL_IN_CONTENT:"c",IL_IN_RECOMMEND:"n",IL_IN_ARTICLE:"a"},nodeTypes:{ELEMENT:1,DOCUMENT:9,TEXT:3,COMMENT:8},baseZIndex:1e10,bdc:0,behavior:{def:{linkColor:"009900",bubbleShowDelay:200,bubbleHideDelay:1e3,adsReuseWindow:!0,hoverRequestDelay:20},sanitizer:{linkColor:"color",linkHoverColor:"color",linkHoverBgColor:"color",bubbleShowDelay:"int",bubbleHideDelay:"int",adsReuseWindow:"bool",hoverRequestDelay:"int"}},hooksMap:{},hooksCount:0,baseClass:"IL_BASE",clickStatus:"none",defaultLabel:"infolinks",defaultHomeUrl:"http://www.infolinks.com/<%= langPath %>?kid=<%=kid%>&trackerid=101",defaultHelpUrl:"http://www.infolinks.com/<%= lang %>learn-more-about-infolinks/?pid=<%= cid %>&wsid=<%= wsid %>",white_labelLoaded:!1,kid:{i:"TX",t:"TG",s:"SR",x:"XS",o:"OS",f:"FR",e:"ISE",z:"ISZ",b:"ISB",c:"CT",n:"RE",a:"AR"},siteUrl:window.location.href,runScript:!0,protocol:window.location.href.substr(0,window.location.href.indexOf("://")+3),startInFold:!1,bubbleAdMsgIdx:"",countDownTimers:{},emptyString:"",useClParams:{},productAttributes:{options:{inherit:["array","inherit"],adc:["color","adDescriptionColor"],adfs:["int","adDescriptionFontSize"],adt:["int","adDescriptionTop"],adw:["int","adDescriptionWidth"],adh:["int","adDescriptionHeight"],adbt:["int","adDescriptionAndButtonTop"],aub:["int","adDisplayUrlBottom"],uc:["color","adDisplayUrlColor"],aufs:["int","adDisplayUrlFontSize"],auh:["int","adDisplayUrlHeight"],aut:["int","adDisplayUrlTop"],atl:["int","adTextsLeft"],tc:["color","adTitleColor"],atfs:["int","adTitleFontSize"],atmh:["int","adTitleMaxHeight"],attd:["str","adTitleTextDecoration"],atmt:["str","adTitleMarginTop"],atw:["int","adTitleWidth"],att:["int","adTitleTop"],aataat:["int","adAreaTop"],bgc:["color","BackgroundColor"],bgi:["str","backgroundImage"],bbc:["color","bodyBorderColor"],bbw:["int","bodyBorderWidth"],bpt:["int","bodyPaddingTop"],blc:["color","borderLeftColor"],blw:["int","borderLeftWidth"],brc:["color","borderRightColor"],brw:["int","borderRightWidth"],hbc:["color","headerBorderColor"],hbw:["int","headerBorderWidth"],
bcn:["str","buttonClassName"],bcno:["str","buttonClassNameOver"],bbi:["str","buttonBackgroundImage"],bbpo:["str","buttonBackgroundPositionOver"],bbgc:["color","buttonBackgroundColor"],bbco:["color","buttonBackgroundColorOver"],bbr:["str","buttonBorder"],bbrr:["str","buttonBorderRadius"],bbp:["int","buttonBottom"],bc:["color","buttonColor"],bfs:["int","buttonFontSize"],bwd:["int","buttonWidth"],brp:["int","buttonRight"],bt:["str","buttonText"],btp:["int","buttonTop"],bht:["int","buttonHeight"],cef:["enum","closeEffect"],fi:["str","favicon"],ff:["int","fontFamily"],bte:["bool","hasButton"],ht:["bool","hasTail"],hbgc:["color","headerBackgroundColor"],hbgi:["str","headerBackgroundImage"],hgt:["int","height"],hgtc:["int","heightClosed"],hpcn:["str","helpButtonClassName"],hpbi:["str","helpButtonBackgroundImage"],hpp:["str","helpButtonBackgroundPosition"],hppo:["str","helpButtonBackgroundPositionOver"],hph:["int","helpButtonHeight"],hpl:["str","helpButtonLink"],hpcb:["function","helpButtonCallback"],hpw:["int","helpButtonWidth"],hpr:["int","helpButtonRight"],hpt:["int","helpButtonTop"],lbc:["color","leadBrandColor"],lgh:["int","logoHeight"],lgl:["str","logoLink"],lgu:["str","logoUrl"],lgw:["int","logoWidth"],lt:["int","logoTop"],oef:["enum","openEffect"],rc:["int","roundedCorners"],sdw:["bool","shadow"],sdwo:["bool","shadow"],stfs:["int","searchTitleFontSize"],stc:["int","searchTitleColor"],spfs:["int","searchPrefixFontSize"],stp:["str","searchTitlePrefix"],stpc:["str","searchTitlePrefixColor"],sts:["str","searchTitleSuffix"],tt:["enum","tailType"],tcl:["function","tailColor"],wdh:["int","width"],xbcn:["str","xButtonClassName"],xbi:["str","xButtonBackgroundImage"],xbp:["int","xButtonBackgroundPosition"],xbpo:["int","xButtonBackgroundPositionOver"],xbh:["int","xButtonHeight"],xbw:["int","xButtonWidth"],xbr:["int","xButtonRight"],xbt:["int","xButtonTop"],cpt:["str","caption"],cpw:["int","captionWidth"],cph:["int","captionHeight"],cptp:["int","captionTop"],cprt:["int","captionRight"],cplt:["int","captionLeft"],cpcl:["color","captionColor"],cpfs:["int","captionFontSize"],cphpu:["str","captionHorizontalPlacementUnits"],cphpt:["str","captionHorizontalPlacementTranslate"],cpfw:["str","captionFontWeight"],rct:["str","resultContentTop"]}},textLimits:{def:{plinks:{t:2,i:100},pimgs:{t:2,i:100},phdrs:{t:2,i:100},pdesc:1,page_keyw:2}},loadedData:{},translations:{advertisement:{en:"Advertisement",es:"Aviso Publicitario"},clickHere:{en:"Click here",es:"Presione%20Aqu%C3%AD"},searchingFor:{en:"Searching for",es:"%C2%BFBuscando"},nextSearchResultFor:{en:"Next search result for",es:"Nueva%20b%C3%BAsqueda%20para"},learnMore:{en:"Learn More",es:"Saber%20m%C3%A1s"},adsBy:{en:"Ads by",es:"Anuncios"},continueToSite:{en:"Continue to site in",es:"Continuar%20al%20sitio%20en"}},prs:{t:{}},intagMinContentWidth:200,waitForViewEvent:!1,msgvwcoo:"",msgvwimp:"",prodvw:"",fc:{},autoMarkerCls:"IL_IN_AUTO",capara:{},c:"",strg:"",singleGetAdsPrs:{},msgvwcooToRemove:"msgvwcoo",msgvwImpToRemove:"msgvwImp",oldIE:function(){var e=$root.browser;return e.IE&&("BackCompat"==document.compatMode||e.getVersion(!0)<9)}(),webkitTransformOrigin:"-webkit-perspective: 1000; -webkit-transform-origin: 0 0; transform-origin: 0 0; -ms-transform-origin: 0 0;",inContentSets:{inContentAutoExecuted:!1,instanceCounter:0,inContentManualExist:!1},mobileIntext:{old:"old",twoClick:"twoclick",countDown:"countdown",defaultCountDownTime:5e3},nativeAppParmas:{},appParamLimits:10,paramCharLimit:300,defaultLocation:2,noIframe:"NO_IFRAME",noUnit:"NO_UNIT",maxWidth:"MAX_WIDTH",inTagSettings:{relatedTags:"IL_RELATED_TAGS",prodId:"IL_IN_TAG"},inFrameSettings:{width:{thin:120,wide:160},buffer:15}}),$root.$create("harvest",{createInstance:function(){var e={};return e.texts=[],e.nodes=[],e.stopped=!1,e.harvesting=!1,e.firstNode=null,e.charCount=0,e.insideAllowedNode=null,e.useAllowSettings=!1,e},setConditionalTags:function(){var e=this.$root,t=e.settings,n=this.settings,o=(t.white_label||t.defaultLabel).toUpperCase();n.tagGenericOff="INTEXT_OFF",n.tagGenericOn="INTEXT_ON",n.tagGenericStop="INTEXT_STOP",n.tagGenericToggle="INTEXT_TOGGLE",n.tagOff=o+"_OFF",n.tagOn=o+"_ON",n.tagStop=o+"_STOP",n.tagToggle=o+"_TOGGLE"},setHarvestEnabled:function(){var e=this.settings,t=document.body.innerHTML,n=function(e){return t.indexOf(["<!--",e,"-->"].join(""))},o=n(e.tagGenericOn),i=n(e.tagOn),r=o==-1||i==-1?Math.max(o,i):Math.min(o,i),s=n(e.tagGenericOff),a=n(e.tagOff),d=s==-1||a==-1?Math.max(s,a):Math.min(s,a);e.enabled=r==-1||d!=-1&&r>d},getHarvestedText:function(e){var t=this.$root,n=t.settings,o=this.settings,i=t.helpers,r=t.utils,s=r.array,a=n.highlightDeny,d=n.highlightAllow,l=this.createInstance();if(o.instances[o.instances.length]=l,1==o.instances.length&&r.timer.start("tmr_har"),d){o.allowedTags=s.toObject(d.tags,{},1),o.allowedIds=s.toObject(d.ids,{},1),o.allowedCls=s.toObject(d.cls,{},1);for(var c in o.allowedTags)o.deniedTags[c]&&delete o.deniedTags[c];d.min||(d.min=1),l.useAllowSettings=!0}a&&(o.deniedTags=s.toObject(a.tags_ex,o.deniedTags,1),o.deniedIds=s.toObject(a.ids_ex,o.deniedIds,1),o.deniedCls=s.toObject(a.cls_ex,o.deniedCls,1)),this.setConditionalTags(),this.setHarvestEnabled(),o.allowOnclick=i.getVar("allow_onclick"),this.harvestText(e||document.body);var u=l.texts.join("|");u=i.normalizeText(u);var h=i.countWords(u);return l.useAllowSettings&&h<d.min&&(l.useAllowSettings=!1,this.harvestText(e||document.body),u=l.texts.join("|"),u=i.normalizeText(u),h=i.countWords(u)),1==o.instances.length&&r.timer.stop("tmr_har"),l.text=u,l},isHarvestableNode:function(e){var t=this.settings,n=this.$root.utils,o=n.dom;return!(null!=e.getAttribute("onclick")&&e!=document.body&&!t.allowOnclick||t.deniedTags[e.tagName.toLowerCase()]||e.id&&t.deniedIds[e.id]||e.className&&"function"==typeof e.className.split&&n.object.hasKey(t.deniedCls,e.className.split(/\s+/))||!this.$root.comm.settings.responses.gsd.wd.ht&&!n.dom.element.isVisible(e)||!o.element.isVisible(e))},harvestText:function(e){var t,n,o,i=this.$root,r=this.settings,s=null,a=i.utils,d=a.object,l=a.timer,c=i.settings.nodeTypes,u=r.instances.length-1,h=r.instances[u];h.harvesting||(h.harvesting=!0,h.stopped=!1,l.start("harvest"+u),h.nodes=[],h.texts=[],h.charCount=0,h.firstNode=e,h.useAllowSettings||(h.insideAllowedNode=e)),h.stopped||r.timeLimit!=-1&&l.poll("harvest"+u)>=r.timeLimit?h.stopped=!0:s=e.nodeType;var p=d.keys(r.allowedIds).length>0,m=d.keys(r.allowedCls).length>0;switch(s){case c.DOCUMENT:case c.ELEMENT:if(this.isHarvestableNode(e)){for(h.useAllowSettings&&!h.insideAllowedNode&&!r.deniedTags[e.tagName.toLowerCase()]&&(!p&&!m||p&&e.id&&r.allowedIds[e.id]||m&&e.className&&d.hasKey(r.allowedCls,e.className.split(/\s+/)))&&(h.insideAllowedNode=e),t=0,n=e.childNodes.length;t<n&&!h.stopped;t++)this.harvestText(e.childNodes[t]);h.insideAllowedNode==e&&(h.insideAllowedNode=null)}break;case c.TEXT:r.enabled&&h.insideAllowedNode&&(o=a.string.trim(e.data).replace(/\s+/g," "),o.length>3&&(r.charLimit!=-1&&h.charCount+o.length>r.charLimit&&(h.stopped=!0,o=o.substring(0,r.charLimit-h.charCount).replace(/\S+$/,"")),a.array.push(h.nodes,e),a.array.push(h.texts,o),h.charCount+=o.length));break;case c.COMMENT:this.checkConditionalTags(a.string.trim(e.data),r)}h.firstNode==e&&(h.harvesting=!1,l.stop("harvest"+u))},checkConditionalTags:function(e,t){var n=this.settings;switch(e){case n.tagOff:case n.tagGenericOff:t.enabled=!1;break;case n.tagOn:case n.tagGenericOn:t.enabled=!0;break;case n.tagToggle:case n.tagGenericToggle:t.enabled=!t.enabled;break;case n.tagStop:case n.tagGenericStop:n.instances[n.instances.length-1].stopped=!0}}},{settings:{allowedCls:null,allowedIds:null,charLimit:8e3,deniedCls:{footer:1,wibiyaToolbar_window:1},deniedIds:{footer:1,wibiyaToolbar:1,wibiyaToolbar_window_template:1},deniedTags:{a:1,acronym:1,address:1,br:1,dd:1,dl:1,dt:1,embed:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,iframe:1,input:1,label:1,legend:1,noscript:1,object:1,param:1,script:1,select:1,style:1,textarea:1,th:1,title:1,m:1,svg:1},enabled:!0,timeLimit:1e3,instances:[]}});var shared=$root.$create("shared",{prepareVisitCount:function(e){var t=this.$root,n=t.utils,o=(t.helpers,t.settings,""),i="",r=window.location.hostname;window.location.hostname;try{for(var s=0;s<r.length;s+=2)o+=r[s];return i+=o+"s",o=n.base64.encodeBase64(o).replace(/=/g,""),i=n.base64.encodeBase64(i).replace(/=/g,""),"undefined"!=typeof Storage&&window.JSON&&window.JSON.parse?this.saveToStorage(o,i):this.saveToCookie(o,i)}catch(a){return!1}},saveToStorage:function(e,t){var n,o=this.$root,i=o.utils,r=1,s=1,a=new Date;return i.storage.passedExpireDate(e)&&localStorage.removeItem(e),sessionStorage.getItem(t)?(localStorage.getItem(e)&&(n=JSON.parse(localStorage.getItem(e)),s=n.pi+1,r=n.vc,n={d:i.date.now(),vc:r,pi:s},localStorage.setItem(e,JSON.stringify(n)),i.storage.setExpireDate(e,a.getTime()+2592e6)),sessionStorage.setItem(t,!0)):(localStorage.getItem(e)?(n=JSON.parse(localStorage.getItem(e)),r=n.vc+1,s=n.pi+1,n={d:i.date.now(),vc:r,pi:s}):n={d:i.date.now(),vc:r,pi:s},localStorage.setItem(e,JSON.stringify(n)),i.storage.setExpireDate(e,a.getTime()+2592e6),sessionStorage.setItem(t,!0)),JSON.parse(localStorage.getItem(e))},intopPassback:function(e,t,n,o,i){var r,s=$root,a=s.settings,d=s.helpers;e.ads.splice(n,1),e.ads[0].dontShow=!1,s.helpers.setHookData(t.hookId,e),1==o?(a.startInFold=!0,e&&e.ads[0].emd&&d.saveFcAndPvToStorage(e.ads[0].emd,i.prod),e&&e.ads[0]&&(r=e.ads[0],r.width&&r.width!=-1||(r.width=728),r.height&&r.height!=-1||(r.height=90)),d.moveAndHideElement(i.node,r.hn),s.event.fire("createIntopUnit",{hookId:t.hookId,isPassBack:!0})):(e&&e.ads[o].emd&&(d.setViews("fc","msgvwcoo"),d.setViews("pv","prodvw"),d.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),s.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod}}),a.startInFold=!0)},insearchPassback:function(e,t,n,o,i){var r,s=$root,a=s.settings,d=s.helpers;e.ads.splice(n,1),e.ads[0].dontShow=!1,s.helpers.setHookData(t.hookId,e),1==o?(a.startInFold=!0,e&&e.ads[0].emd&&d.saveFcAndPvToStorage(e.ads[0].emd,i.prod),e&&e.ads[0]&&(r=e.ads[0],r.width&&r.width!=-1||(r.width=728),r.height&&r.height!=-1||(r.height=90)),d.moveAndHideElement(i.node,r.hn),s.event.fire("createInsearchUnit",{hookId:t.hookId,isPassBack:!0})):(e&&e.ads[o].emd&&(d.setViews("fc","msgvwcoo"),d.setViews("pv","prodvw"),d.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),s.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod}}),a.startInFold=!0)},inframePassback:function(e,t,n,o,i){var r,s=$root,a=(s.settings,s.helpers),d=s.products.inframe.settings;0==o?(e&&e.ads[0].emd&&a.saveFcAndPvToStorage(e.ads[0].emd,i.prod),a.moveAndHideElement(i.node,e.ads[0].hn),s.event.fire("createInframe",{hookId:t.hookId,ad:e.ads[0],isPassback:!0})):(e&&e.ads[o].emd&&(a.setViews("fc","msgvwcoo"),a.setViews("pv","prodvw"),a.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),r=event.data.hookId.indexOf("RIGHT")!=-1?"right":"left",s.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod,bdc:d.adViewParams[r].bdc.join("~"),midx:d.adViewParams[r].midx.join("~"),emd:d.adViewParams[r].emd.join("~")}}))},incontentPassback:function(e,t,n,o,i,r){var s,a=$root,d=a.helpers;1==o?(e.ads.splice(n,1),a.helpers.setHookData(t.hookId,e),s=!0,i.doneAnimating=!1,a.event.fire("createIncontentUnit",{hookId:t.hookId,hook:i,isPassback:s,prod:r})):(e&&e.ads[o].emd&&(e.ads.splice(n,e.ads.length),a.helpers.setHookData(t.hookId,e),d.setViews("fc","msgvwcoo"),d.setViews("pv","prodvw"),d.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),a.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod}}))},bubblePassback:function(e,t,n,o,i){var r=$root,s=r.settings,a=r.helpers,d={};if(i.bubble.status="null",e.width<200&&(e.width=r.bubble.settings.def.width),e.height<60&&(e.height=r.bubble.settings.def.height),e.ads.splice(n,1),e.ads[0].dontShow=!1,r.helpers.setHookData(t.hookId,e),s.waitForViewEvent)if(1==o)e&&e.ads[0].emd&&a.saveFcAndPvToStorage(e.ads[0].emd,i.prod),a.moveAndHideElement(i.bubble.node,e.ads[0].hn),r.event.fire("showBubble",{hookId:t.hookId,isPassback:!0}),r.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod},capara:d}),r.utils.timer.start("adView"+t.hookId),i.startBubble=!0;else{s.useClParams.itl?d.hii=i.instanceIndex:d=null;var l=r.helpers.getHookData(t.hookId);l.hoverd||(e&&e.ads[o].emd&&(a.setViews("fc","msgvwcoo"),a.setViews("pv","prodvw"),a.saveFcAndPvToStorage(e.ads[o].emd,i.prod)),e.hoverd=!0,r.helpers.setHookData(t.hookId,e)),r.event.fire("sendAdView",{hookId:t.hookId,params:{prod_t:i.prod},capara:d}),r.utils.timer.start("adView"+t.hookId),i.startBubble=!0}else r.event.fire("showBubble",{hookId:t.hookId})},saveToCookie:function saveToCookie(cnameB64,scnameB64){var rt=this.$root,ut=rt.utils,hp=rt.helpers,st=rt.settings,visit,vc=1,pi=1,date=new Date;return ut.cookie.has(scnameB64)?(ut.cookie.has(cnameB64)&&(visit=eval("("+ut.cookie.get(cnameB64)+")"),pi=visit.pi+1,vc=visit.vc,visit={d:ut.date.now(),vc:vc,pi:pi},date.setTime(date.getTime()+2592e6),ut.cookie.set(cnameB64,ut.object.stringify(visit),date)),ut.cookie.set(scnameB64,!0)):(ut.cookie.has(cnameB64)?(visit=eval("("+ut.cookie.get(cnameB64)+")"),vc=visit.vc+1,pi=visit.pi+1,visit={d:ut.date.now(),vc:vc,pi:pi}):visit={d:ut.date.now(),vc:vc,pi:pi},date.setTime(date.getTime()+2592e6),ut.cookie.set(cnameB64,ut.object.stringify(visit),date),ut.cookie.set(scnameB64,ut.object.stringify(visit))),eval("("+ut.cookie.get(cnameB64)+")")}},null,!0);shared.bind({event:"main",listener:{main:function(){var e=this.$root,t=e.utils,n=e.settings,o=e.helpers,i="1834.006-3.025";if($ice.VERSION=i,"false"!==o.getVar("usync")){e.helpers.getCustomerId();var r="https://router.infolinks.com/usync/manage?pid="+n.customerId+"&wsid="+n.websiteId+"&pdom="+encodeURIComponent(location.hostname)+"&purl="+encodeURIComponent(n.customerUrl);t.dom.createIframe({tag:"iframe",id:"IL_MANAGE",parent:document.body,style:{position:"absolute",margin:"0 0",display:"none"},src:t.cookie.getCCP()?r+"&usprivacy="+t.cookie.getCCP():r,sandbox:"allow-same-origin allow-scripts allow-top-navigation"})}n.cconf=t.string.toObject(t.cookie.get("$ice-conf"))||{},n.cconf.logto&&(e.logger.output=n.cconf.logto),n.cconf.er&&(e.logger.errorReporting=parseInt(n.cconf.er,10)),e.utils.timer.start("tmr_wait"),e.settings.boot=window.INFOLINKS&&window.INFOLINKS._boot?window.INFOLINKS._boot:window.$iceboot?window.$iceboot:null;var s=this;e.helpers.getVar("white_label",e.settings),e.helpers.chanceIntegration()||s.$root.event.fire("domready")}}}),shared.bind({event:"pbiceLoaded",listener:{pbiceLoaded:function(e){var t=this.$root;t.settings.pbIceLoaded=!0}}}),shared.bind({event:"domready",listener:{domready:function(){var e,t,n=this.$root,o=n.helpers;if(n.utils.timer.stop("tmr_wait"),n.utils.timer.start("tmr_all"),t=o.getVar("no_if"),!(0!=t&&o.inIframe()||o.shouldBlock())){if(n.settings._initialized&&(e="Trying to re-run an application that has already been initialized."),e)return void n.logger.error(e,this.domready);n.settings._initialized=!0,o.setHosts(),n.event.fire("loadPlugins")}}}}),shared.bind({event:"loadPlugins",listener:{loadPlugins:function(){var e,t,n,o,i=this.$root,r=i.settings,s=r.hosts;if(i.settings.white_label&&!i.settings.white_labelLoaded)return i.settings.white_labelLoaded=!0,void i.comm.loadScript([s.resources,s.scriptDefaultPath,"0/wl/",r.white_label,".js"].join(""),null,"loadPlugins");var a=i.helpers.getVar("inline_plugin");a&&"function"==i.what(a)&&a();var d=i.helpers.getVar("plugins");if(d)for(e=i.settings.hosts.src?"/src":"","string"==i.what(d)&&(d=[d]),i.settings.plugins={},t=0,n=d.length;t<n;t++)o=d[t].match(/https?:\/\//)?d[t]:[i.settings.hosts.resources,"/js",e,"/0/plugins/",d[t],".js"].join(""),i.settings.plugins[o]=!1,i.comm.loadScript(o,null,"pluginLoaded",{plugin:o});else i.event.fire("beforeGSD")}}}),shared.bind({event:"pluginLoaded",listener:{pluginLoaded:function(e){var t,n=this.$root,o=n.settings;if(o.plugins[e.data.plugin]=!0,n.utils.array.indexOf(n.utils.object.values(o.plugins),!1)==-1){for(t in n.plugins)n.plugins[t]&&"function"==n.what(n.plugins[t].init)&&n.plugins[t].init();n.event.fire("beforeGSD")}}}}),shared.bind({event:"beforeGSD",listener:{prepareGSD:function(){var e,t,n=this.$root,o=n.settings,i=n.helpers;e=i.getVar("suspended"),i.getCustomerId();var r=i.getReferrer();t=o.websiteId;var s=n.utils.object.clean({pid:o.customerId,wsid:o.websiteId,pdom:location.hostname,purl:o.customerUrl,usprivacy:n.utils.cookie.getCCP()});n.comm.loadScript("https://router.infolinks.com/usync/lcmanage",s),"undefined"==n.what(i.getVar("wsid"))&&(t=""),o.trce=i.getVar("trce");var s=n.utils.object.clean({evt:"afterGSD",pid:o.customerId,wsid:t,pdom:location.hostname,purl:o.customerUrl,jsv:n.version,ref:o.refvar||r.ref,refq:r.refq,trce:o.trce,_cb:[n.utils.date.now(),n.utils.number.next("nocache")].join(""),ic:i.getVar("i_counter"),ix:i.getVar("i_disabled"),sc:i.getVar("s_counter"),sx:i.getVar("s_disabled")});localStorage.getItem("il_cuid")&&(s.il_cuid=localStorage.getItem("il_cuid")),n.utils.timer.start("tmr_gsd"),e&&o.runScript?(n.event.dom.bind(window,{event:"message",listener:n.comm.receiveMessage}),n.comm.settings.listeningToMessages=!0):n.comm.loadScript([o.hosts.router,"/gsd"].join(""),s)}}}),shared.bind({event:"afterGSD",listener:{gsdCallback:function(e){var t=this.$root,n=e.data,o=t.settings.textLimits,i=t.settings,r=t.helpers;t.utils.timer.stop("tmr_gsd"),t.event.dom.bind(window,{event:"message",listener:this.receiveMessage}),n.rs=t.utils.string.toObject(location.search,"il.rt")||t.helpers.getVar("runtime_server")||n.rs||null;var s="";return n.rs||(s="GSD Response is missing `rs`."),n.prs||(s="GSD Response is missing `prs`."),s?void t.logger.error(s,this.gsdCallback):(n.rs=n.rs.toLowerCase(),n.makey||(n.makey=""),t.helpers.setDefaultWebsiteDirectives(n),o.merged=t.utils.object.extend(o.def,n.wd||{}),n.wsid&&(i.websiteId=n.wsid),t.comm.settings.responses.gsd=n,n.cks&&localStorage.setItem("il_cuid",n.cks.cuid),r.fixCorruptLocalStorageItem("fc"),r.fixCorruptLocalStorageItem("pv"),t.event.fire("initComm"),this.initCl(),void(/i|t|x|e|d/.test(n.prs)?t.event.fire("beforeHarvest"):t.event.fire("beforeImpression")))},initCl:function(){var e,t=this.$root,n=t.settings;if(t.comm.settings.responses.gsd.cfg){e=Math.random().toPrecision(1);for(var o in t.comm.settings.responses.gsd.cfg)t.comm.settings.responses.gsd.cfg[o]&&e<=t.comm.settings.responses.gsd.cfg[o]&&(n.useClParams[o]=!0)}}}}),shared.receiveMessage=function(e){var t,n=e.domEvent,o=$root;o.settings;try{t=JSON.parse(n.data)}catch(i){return}if("FALLBACK"===t.message){if("undefined"==typeof t.hookId||"undefined"==typeof o.settings.hooksMap[t.hookId])try{if("undefined"==typeof e.domEvent.source.hookId||"undefined"==typeof o.settings.hooksMap[e.domEvent.source.hookId])return void console.log("could not find hookId in fallback event source window: ",e.domEvent.source);t.hookId=String(e.domEvent.source.hookId)}catch(i){return void console.log("failed getting hookId from fallback event source: ",i)}shared.showAd(1,t)}"DESTROY"===t.message&&t.apiK===o.comm.settings.responses.impression.behavior_imp.apiK&&o.event.fire("destroy"),"RESTORE"===t.message&&t.apiK===o.comm.settings.responses.impression.behavior_imp.apiK&&o.event.fire("restore")},shared.showAd=function(e,t){var n,o,i=$root,r=(i.helpers,i.settings),s=i.helpers.getHookData(t.hookId),a=[r.getAdsProds.s,r.getAdsProds.x,r.getAdsProds.o,r.getAdsProds.d];if(n=0==e?1:0,s&&s.ads[0]){1==s.ads.length&&(e=0),s.width=s.ads[e].width,s.height=s.ads[e].height,s.cacheOverride=!1;var d=i.settings.hooksMap[t.hookId];d.externalTag=!1;for(var l=0;l<a.length;l++)t.hookId==a[l]&&(o=!0);o?this.insearchPassback(s,t,n,e,d):t.hookId.replace(/[0-9]/g,"")in r.inContentProducts?this.incontentPassback(s,t,n,e,d,r.inContentProducts[t.hookId.replace(/[0-9]/g,"")]):t.hookId==r.singleGetAdsProds.fl||t.hookId==r.singleGetAdsProds.fr?this.inframePassback(s,t,n,e,d):t.hookId==r.getAdsProds.h?this.intopPassback(s,t,n,e,d):this.bubblePassback(s,t,n,e,d)}},shared.bind({event:"beforeHarvest",listener:{prepareHarvest:function(){var e=this.$root,t=e.helpers,n=e.settings,o=null,i=e.comm.settings.responses.gsd;o=t.getVar("highlight_deny")||i.wd.hd||{},"undefined"!=e.what(window.vBulletin)&&(o.cls||(o.cls=[]),e.utils.array.push(o.cls,"thead","tcat","navbar","tfoot","alt2")),n.$extend({highlightDeny:o,highlightAllow:t.getVar("highlight_allow")||i.wd.ha});var r=e.harvest.getHarvestedText();e.event.fire("beforeImpression",{ptxt:r.text})}}}),shared.bind({event:"beforeImpression",listener:{prepareImpression:function(e){var t,n,o,i,r,s,a=this.$root,d=a.utils,l=a.helpers,c=a.settings,u=(a.products,a.comm),h=u.settings.responses.gsd,p=a.browser,m=document.getElementsByName(c.inTagSettings.relatedTags).length||"",g=document.getElementsByName(c.inTagSettings.prodId).length||"";d.cookie.remove("pv"),d.cookie.remove("fc"),i=l.getTimeZone(),r=d.object.stringify({inIframe:l.inIframe(),hbe:!!window.pbjs}),s=l.getVar("refvar"),s&&(c.refvar=s),c.impression||(c.impression={params:{}});var f=c.impression,v=f.params;if(t=d.array.toObject(h.prs.split(","),{},!0),e.data&&e.data.updater&&(t={i:!0}),v.ptxt=e.data&&"s"!=h.prs?e.data.ptxt:"",v.twnum=l.countWords(v.ptxt),t.i&&v.twnum<h.wd.qmin&&delete t.i,!t.t||"m"!=h.wd.rtm||m||g||delete t.t,n=this.prepareVisitCount(),n&&(v.nov=n.vc,v.tolv=n.d,v.nop=n.pi),a.helpers.getVar("inframe_disable")===!0&&delete t.f,t.f){var b=l.buildImpPageMarginsParam();b?v.ifs=b:delete t.f}switch(v.prs=d.object.keys(t).join(","),""==v.prs&&(v.prs=".",v.ptxt=""),o=l.getCookieSupport()){case!1:c.c=v.c="sc";break;case!0:c.c=v.c="c";break;default:c.c=v.c="none"}l.supportsStorage()?c.strg=v.strg=!0:c.strg=v.strg=!1,l.supportsSessionStorage()&&sessionStorage.removeItem("vpfc"),l.setViews("pv","prodvw"),l.setNativeAppParams(),e.data&&e.data.updater||(d.cookie.getCCP()&&(v.usprivacy=d.cookie.getCCP()),v.pid=c.customerId,v.wsid=c.websiteId,v.makey=h.makey,v.anow=l.getVar("anow")||"",v.rid=h.rid||"",v.purl=c.customerUrl,v.jsv=a.version,v.ms=h.ms||"",v.gid=h.wd.gid||"",v.rh=l.getVar("require_highlight")||"",v.by="u",v.crt=m,v.ctc=g,v.tzo=i,v.trce=c.trce,v.cfv=u.settings.flashVersion,c.ifip=l.getVar("ifip")||"",c.blankURL=["//",c.hosts.resources,"/static/blank.html"].join(""),v.ifip=c.ifip,v.pf=l.getPlatform(),v.ptitle=l.normalizeText(document.title),v.ref=c.refvar||c.ref,v.refq=c.refq,v.aid=l.getVar("appid"),v.cms=l.getVar("plugin_version"),v.prodvw=c.prodvw||"",c.ose&&(v.ose=c.ose),v.os=p.getOS(),v.ov=p.getOSVersion(),v.br=p.getName(),v.bv=p.getVersion(),v.en=p.getEngine(),v.dv=p.getDevice(),v.ce=navigator.cookieEnabled?"t":"f",v.cd=screen.colorDepth||screen.pixelDepth||0,v.sr=[screen.availWidth,screen.availHeight].join("X"),v.pl=l.getPluginsChecksum(),v.pv=l.getPlatformVersion(v.pf),v.capara=r,h.fn&&(v.fn=l.getFontsChecksum()),null!=v.prs.match(/[^so,\.]/)&&(v.plinks=l.getTagTexts("a","text","plinks"),v.pimgs=l.getTagTexts("img","alt","pimgs"),v.phdrs=l.getTagTexts(d.string.qw("h1 h2 h3 h4 h5 h6"),"text","phdrs"),v.pdesc=l.getMetaContent("description",c.textLimits.merged.pdesc),v.page_keyw=l.getMetaContent("keywords",c.textLimits.merged.page_keyw)),f.pcode=(l.getVar("encoding")||document.characterSet||document.charset||"").toLowerCase(),f.url=[a.settings.protocol,h.rs,"/action/doq.htm","?pcode=",f.pcode,"&r=",d.date.now(),d.number.next("nocache")].join(""),a.browser.IE&&"cors"==u.settings.mode&&(f.url+="&oct=1"),f.method="POST",f.onSuccess="afterImpression"),d.object.extend(v,h.cks||{},c.nativeAppParams),v.rts=d.date.now(),f.params=d.object.clean(v),a.event.fire("sendImpression",{options:f,beforeSend:function(e){f.params.by=e,d.timer.poll("tmr_imp")||d.timer.start("tmr_imp")}})}}}),shared.bind({event:"afterImpression",listener:{handleImpressionResponse:function(e){var t,n,o=this.$root,i=o.settings,r=(o.utils,o.utils.timer);o.browser;if(r.delta("tmr_imp")||r.stop("tmr_imp"),t=o.helpers.processImpressionResponse(e.data),"object"!=o.what(t))return void o.logger.error("Bad Impression response.",this.handleImpressionResponse);if(n=t.prs,n.r&&(n.t?(n.t.sentences=o.utils.array.uniq(o.utils.array.concat(n.t.sentences,n.r.sentences)),o.utils.object.extend(n.t.behavior,n.r.behavior)):(n.t=n.r,delete n.r)),n.c&&(n.t?(o.utils.object.extend(n.c.behavior,n.t.behavior),i.prs.t=n.t,delete n.t):delete n.c),t.prs)for(n in t.prs)switch(n){case"c":case"n":case"a":case"t":this.intagincontentLoadPending=!0;break;case"i":this.intextLoadPending=!0;break;case"u":this.preRegisterInPlace();break;case"h":this.loadInTop();break;case"s":case"x":case"o":case"d":this.loadInsearch();break;case"e":o.comm.settings.isInscreenE=!0;case"b":case"z":this.inscreenLoadPending=!0;break;case"f":this.inframeLoadPending=!0;default:o.settings.singleGetAdsPrs[n]=t.prs[n]}if((t.prs.c||t.prs.n||t.prs.a||t.prs.t||t.prs.i||t.prs.e||t.prs.b||t.prs.z||t.prs.f)&&this.loadBubble(),o.comm.settings.responses.impression=t,o.externalTags.init(),t.behavior_imp.prepareVideoPlayer&&o.event.fire("preloadVideoJsLibs"),t.prs)for(var s in t.prs)if(t.prs[s].bdrs.length>0){var a="3.025";if(!window.$ICE_HB){o.comm.loadScript("https://resources.infolinks.com/js/pbice/"+a+"/pbice.js",null,"pbiceLoaded");break}}o.event.fire("preRenderProducts")}}}),shared.preRegisterInPlace=function(){var e=this;window.addEventListener("message",function(t){var n;try{n=JSON.parse(t.data)}catch(o){}if(n&&"registerSlot"==n.name&&!n.slot.isRegistered){var i;e.$root.products.inplace&&(i=e.$root.products.inplace.instances.find(function(e){return e.slot.id==n.slot.id})),i||(n.slot.isRegistered=!0,e.createInPlace(n.slot))}}),window.infolinks_slots&&window.infolinks_slots.forEach(function(e,t){if(!e.isRegistered){var n=JSON.stringify({name:"isIceApiReady",slot:e}),o=document.getElementById(e.id);o.contentWindow.postMessage(n,"*")}})},shared.loadBubble=function(){var e,t=this.$root;this.bubbleLoadStart||(this.bubbleLoadStart=!0,e="https://resources.infolinks.com/js/"+t.version+"/bubble.js",t.comm.loadScript(e,null,"bubbleLoaded"))},shared.loadInplace=function(e){var t=this.$root,n=window.infolinks_basePath+"/in_place.js";this.inPlaceLoadStart||(t.comm.loadScript(n,null,"ipLoaded",{plugin:n}),this.inPlaceLoadStart=!0)},shared.loadInTop=function(){var e,t=this.$root;e="icemobile"===t.versionFile?"https://resources.infolinks.com/js/"+t.version+"/mobile_intop.js":"https://resources.infolinks.com/js/"+t.version+"/in_top.js",t.comm.loadScript(e,null,"inTopLoaded")},shared.loadInsearch=function(){var e,t=this.$root;this.insearchPending||(this.insearchPending=!0,e="icemobile"===t.versionFile?"https://resources.infolinks.com/js/"+t.version+"/mobile_insearch.js":"https://resources.infolinks.com/js/"+t.version+"/in_search.js",t.comm.loadScript(e,null,"inSearchLoaded"))},shared.loadInscreen=function(){var e,t=this.$root;e="https://resources.infolinks.com/js/"+t.version+"/in_screen.js",t.comm.loadScript(e,null,"inScreenLoaded")},shared.loadIntext=function(){var e=this.$root;"icemobile"===e.versionFile?this.inTextUrl="https://resources.infolinks.com/js/"+e.version+"/mobile_intext.js":this.inTextUrl="https://resources.infolinks.com/js/"+e.version+"/in_text.js",e.comm.loadScript(this.inTextUrl,null,"inTextLoaded")},shared.loadIntagIncontent=function(){var e=this.$root;"icemobile"===e.versionFile?this.inTagInContentUrl="https://resources.infolinks.com/js/"+e.version+"/mobile_intag_incontent.js":this.inTagInContentUrl="https://resources.infolinks.com/js/"+e.version+"/intag_incontent.js",e.comm.loadScript(this.inTagInContentUrl,null,"inTagInContentLoaded")},shared.loadInframe=function(){var e=this.$root;"icemobile"===e.versionFile?this.inFrameUrl="https://resources.infolinks.com/js/"+e.version+"/mobile_inframe.js":this.inFrameUrl="https://resources.infolinks.com/js/"+e.version+"/in_frame.js",e.comm.loadScript(this.inFrameUrl,null,"inFrameLoaded")},shared.bind({event:"inFrameLoaded",listener:{inTextLoaded:function(e){var t=this.$root;this.inframeLoadPending=!1,t.event.fire("renderInframeProduct")}}}),shared.bind({event:"inTextLoaded",listener:{inTextLoaded:function(e){var t=this.$root;this.intextLoadPending=!1,t.event.fire("renderIntextProduct")}}}),shared.bind({event:"inTagInContentLoaded",listener:{inTagInContentLoaded:function(e){var t=this.$root;this.intagincontentLoadPending=!1,t.event.fire("renderIntagProduct"),t.event.fire("renderInContentProduct")}}}),shared.bind({event:"bubbleLoaded",listener:{bubbleLoaded:function(e){this.$root;this.isBubbleLoaded||(this.isBubbleLoaded=!0,this.intextLoadPending&&this.loadIntext(),this.intagincontentLoadPending&&this.loadIntagIncontent(),this.inscreenLoadPending&&this.loadInscreen(),this.inframeLoadPending&&this.loadInframe())}}}),shared.bind({event:"inScreenLoaded",listener:{inScreenLoaded:function(e){var t=this.$root;this.inscreenLoadPending=!1,t.event.fire("renderInscreenProduct")}}}),shared.bind({event:"inSearchLoaded",listener:{inSearchLoaded:function(e){var t=this.$root;t.event.fire("renderInsearchProduct")}}}),shared.bind({event:"ipLoaded",listener:{ipLoaded:function(e){for(var t=this.$root,n=0;n<window.infolinks_slots.length;n++)window.infolinks_slots[n].created||(window.infolinks_slots[n].created=!0,t.event.fire("createInPlaceInstance",{slot:window.infolinks_slots[n]}))}}}),shared.bind({event:"inTopLoaded",listener:{inTopLoaded:function(e){var t=this.$root;t.event.fire("renderInTopProduct")}}}),shared.createInPlace=function(e){var t=this.$root;t.products.inplace?(e.created=!0,t.event.fire("createInPlaceInstance",{slot:e})):this.loadInplace()},shared.bind({event:"preRenderProducts",listener:{preRenderProducts:function(){var e=this.$root,t=e.helpers,n=e.settings,o=n.behavior,i=e.utils,r=e.helpers.getSiteLanguage(),s=e.comm.settings.responses.impression;e.comm.settings.responses.gsd;o.customer=t.getCustomerBehavior("link_color link_hover_color link_hover_bg_color ads_reuse_window bubble_direction bubble_logo_url bubble_logo_url_downgrade bubble_logo_width bubble_logo_height bubble_logo_link bubble_help_link skin themeset theme"),o.customer&&("nologo"==o.customer.skin?(o.customer.skin="variant",o.customer.theme="nologo"):"cdtodg"==o.customer.skin?(o.customer.skin="variant",o.customer.theme="cdtodg"):"yell"==o.customer.skin&&(o.customer.skin="variant",o.customer.theme="yell")),"true"==s.behavior_imp.nologo&&(o.customer.theme="nologo"),o.impression=t.renameBehaviorProperties(e.comm.settings.responses.impression.behavior_imp||{}),t.createBaseClasses();var a,d=["sanitizer","longName"];for(a=0;a<d.length;a++)n.productAttributes[d[a]]=i.object.map(n.productAttributes.options,function(e){return e[a]});delete n.productAttributes.options,n.homeUrl=o.customer.bubbleLogoLink||n.defaultHomeUrl,n.helpUrl=e.utils.VeST(o.customer.bubbleHelpLink||o.customer.bubbleLogoLink||n.defaultHelpUrl,{cid:n.customerId,wsid:n.websiteId,lang:"en"!=r?r+"/":""}),n.productRenderStatus=i.array.toObject(i.object.keys(n.productCodes),{},"before"),s&&(s.cjs&&t.renderCustomJS(s.cjs,!0),s.customCode&&t.renderDoqCustomCode(s.customCode)),this.$root.event.fire("renderProduct"),i.gpt.destroySlots()}}}),shared.bind({event:"productRenderStatus",listener:{productRenderStatus:function(e){var t=this.$root,n=t.settings,o=t.utils,i=n.productRenderStatus,r=e.data;i[r.prod]=r.status,"failed"==r.status&&t.logger.error([n.productCodes[r.prod]," failed. reason: ",r.reason].join(""),this.productRenderStatus),/before|during/.test(o.object.values(i).join(","))||this.$root.event.fire("afterRenderProducts")}}}),shared.bind({event:"afterRenderProducts",listener:{productsRendedred:function(){var e,t,n,o=this.$root,i=(o.helpers,o.settings),r=o.comm.settings.responses.gsd,s=i.hosts.src?"/src":"";o.comm.settings.responses.impression;if(/i|r|t/.test(r.prs)&&o.helpers.mapUnhoverableAreas(),"undefined"!=o.what(r.incs))for(e=0,t=r.incs.length;e<t;++e){var a=function(e,t){return function(){o.plugins[e]&&"function"==o.what(o.plugins[e].init)&&o.plugins[e].init(t)}};n=a(r.incs[e].s,r.incs[e].p),o.comm.loadScript([i.hosts.resources,"/js",s,"/0/plugins/",r.incs[e].s,".js"].join(""),null,n);
}o.updater.settings.className="undefined"!=o.what(window.blogger)?"hentry":o.helpers.getVar("updater_class")||o.helpers.getVar("refreshed_container")||o.comm.settings.responses.impression.behavior_imp.udcl,o.updater.settings.className&&o.event.fire("initUpdater"),o.utils.timer.stop("tmr_all"),o.event.fire("sendImpressionLog")}}}),shared.bind({event:"sendImpressionLog",listener:{sendImpressionLog:function(){var e,t,n=this.$root,o=n.settings,i=n.utils,r=i.array,s=i.timer,a=n.comm.settings.responses,d=a.gsd;if(o.sendClientLog=n.helpers.getVar("send_client_log")||d.scl||!1,o.sendClientLog){var l,c,u,h,p=n.products,m=p.intext.settings,g=p.intag.settings,f=[],v={rid:d.rid,makey:d.makey,ifip:o.ifip||"",tmr_scr:o.boot&&o.boot.tmr_scr?i.date.now()-o.boot.tmr_scr:-1,tmr_wait:s.delta("tmr_wait")||-1,tmr_gsd:s.delta("tmr_gsd")||-1,tmr_har:s.delta("tmr_har")||-1,tmr_imp:s.delta("tmr_imp")||-1,tmr_dwq:s.delta("tmr_imp")||-1,tmr_hi:s.delta("tmr_hi")||-1,tmr_fsh:s.delta("tmr_fsh")||-1,tmr_all:s.delta("tmr_all")||-1};if(d.prs.indexOf(m.prodCode)!=-1){v.intxt_num=[m.rendered,i.object.keys(m.sentences).length].join("*");for(l in m.sentences)for(c=0,u=m.sentences[l].hooks.length;c<u;c++)h=m.sentences[l].hooks[c],r.push(f,[l,h.visible?1:0,h.pos.left,h.pos.top].join("_"));v.intxt_sen=f.join("*")}if(d.prs.indexOf(g.prodCode)!=-1){var b=(a.impression.prs[g.prodCode]||{sentences:[]}).sentences.length;v.tCld_num=[r.sum(r.map(g.instances,function(e){return e.hooksCount})),b].join("*"),g.instances.length&&(v.tCld_pos=[g.instances[0].pos.left,g.instances[0].pos.top].join("*"))}e=document.getElementById("IL_INSEARCH"),e&&(document.getElementById("IL_INSEARCH").style.zIndex=n.helpers.findMaxZindex()+1),t=document.getElementById("IL_INTOP"),t&&(document.getElementById("IL_INTOP").style.zIndex=n.helpers.findMaxZindex()+1),n.comm.loadScript(d.rs+"/action/dcil.htm",v)}}}}),$root.event.dom.bind(document,{event:"keyup",listener:{keyboardShortcuts:function(e){var t=e.domEvent,n=e.$root,o=n.logger;76==t.keyCode&&t.ctrlKey&&t.altKey?(o.output="console"==o.output?"none":"console","undefined"!=n.what(window.console)&&console.info("Logging to console turned "+("console"==o.output?"on.":"off."))):67==t.keyCode&&t.ctrlKey&&t.altKey&&"undefined"!=n.what(window.console)&&console.clear()}}});var products=$root.$create("products",{},null,!0),autoPlacement=$root.$create("autoPlacement",{createMarker:function(e,t,n,o,i){var r,s,a=this.$root,d=this.settings,l=a.utils.dom.element,c=a.settings,u=[],h=[];"array"==a.what(e)&&(e=e[0]),d.result[e]?u=d.result[e]:d.result=u=this.findPlacement(n,i);for(var p=0;p<u.length;p++)s=a.utils.dom.createDOMFragment({tag:"input",type:"hidden",attributes:{name:e,value:t}}),"IL_IN_ARTICLE"!=e&&"before"!=u[p].placement&&(r=l.getStyle(u[p].node,"height"))&&r.indexOf("px")!=-1&&l.setStyle(u[p].node,{minHeight:parseInt(r,10)+45+"px"}),"append"==u[p].placement?u[p].node.appendChild(s):"prepend"==u[p].placement?u[p].node.insertBefore(s,u[p].node.firstChild):u[p].node.parentNode.insertBefore(s,u[p].node),o&&(s.className=c.autoMarkerCls),h.push({node:s,refNode:u[p].node,capara:u[p].capara});return h},findPlacement:function(e,t){var n,o,i,r=this.$root,s=r.utils,a=this.settings,d=[],l="headerM"==e||"topM"==e,c="append",u=s.string.qw("pageContent content_body contentBody contentWrapper main_content_section main-content bodyarea content-wrap Blog1 content"),h=s.string.qw("commentlist comments respond commentpost commentform disqus_thread idc-container-parent");if("header"==e||"headerM"==e?(n=this.findHeaderPosition(),n||(n=this.placeOnTop(u))&&(c="prepend")):"top"!=e&&"topM"!=e||(n=this.findBestContainer(e),n&&"body"==n.tagName.toLowerCase()&&(n=this.placeOnTop(u),n&&"body"!=n.tagName.toLowerCase()&&(c="prepend"))),n){if(!l)return[{node:n,placement:c}];d.push({node:n,placement:c})}if(t&&"legacy"!=t.bottomPlacementAlgo)if(o=this.findBestContainer(null,t))for(var p=0;o&&p<o.length;p++){var m=o[p];m.node&&null!=m.node.offsetParent&&(!t.mwfa||a.winnerWordCount>parseInt(t.mwfa))?(n=m.node,i=m.capara,d.push({node:n,placement:"append",capara:i})):"true"==t.fbit&&(d=this.findBottomPostion(h,u,d))}else"true"==t.fbit&&(d=this.findBottomPostion(h,u,d));else d=this.findBottomPostion(h,u,d);return d},findBottomPostion:function(e,t,n){var o,i,r,s=this.$root,a=s.utils,d=a.dom.element;for(i=0,r=e.length;i<r;i++)if((o=d.$(e[i]))&&d.isVisible(o))return n.push({node:o,placement:/respond|commentform|disqus_thread/.test(e[i])?"before":"prepend"}),n;for(i=0,r=t.length;i<r;i++)if((o=d.$(t[i]))&&d.isVisible(o))return n.push({node:o,placement:"append"}),n;return n.push({node:this.findBestContainer(),placement:"append"}),n},findHeaderPosition:function(){var e;return e=this.getValidNode("tag","header"),e||(e=this.getValidNode("tag","h1")),e||(e=this.getValidNode("tag","h2")),e||(e=this.getValidNode("tag","h3")),e||(e=this.getValidNode("id","head")),e||(e=this.getValidNode("id","header")),e},getValidNode:function(e,t){var n,o,i=this.$root,r=i.utils,s=r.dom.element;return"tag"==e?(n=document.getElementsByTagName(t),n&&1==n.length&&(o=n[0])):"id"==e&&(o=document.getElementById(t)),o&&(o=s.offset(o).top<400?o:""),o&&this.isNodeHasPropertyValue(o,"position",["fixed","absolute"])&&(o=null),o},palgo:function(e){var t,n,o,i=[],r=0,s=0,a=$root,d=this.settings,l=[],c=!0,u=0,h=0,p=this.settings,m=[],g=0;t=document.getElementsByTagName("p");for(var f=0;f<t.length;f++)i[f]=function(e){return h=autoPlacement.getWords(t[e]),{parentNode:t[e].parentNode,wordCount:h.split(/\s+/).length}}(f);for(var v=0;v<i.length;v++)i[v].parentNode.getAttribute("IL_CC"+d.pIndex)?(r=i[v].parentNode.getAttribute("IL_CC"+d.pIndex),r++,i[v].parentNode.setAttribute("IL_CC"+d.pIndex,r)):i[v].parentNode.setAttribute("IL_CC"+d.pIndex,1),r>s&&(s=r,n=i[v].parentNode),i[v].wordCount>u&&(u=i[v].wordCount,o=i[v].parentNode);for(var b=0;b<i.length;b++)l[b]=i[b].parentNode.getAttribute("IL_CC"+d.pIndex);for(var w=0;w<i.length;w++)l[w]!==l[0]&&(c=!1);if(c&&(n=o),n&&parseInt(e.mp)<=n.getAttribute("IL_CC"+d.pIndex)){for(var y=n.getElementsByTagName("p"),x=0;x<y.length;x++)y[x].parentNode==n&&(m[g]=y[x],g++);if(p.winnerWordCount=autoPlacement.getWords(n).split(/\s+/).length,d.pIndex++,e&&e.pn)return e.pn=parseInt(e.pn),e.pn>s&&(e.pn=s),e.pn>0?[m[e.pn-1]]:[m[e.pn]]}else a.loggly.warnLog("Minimum paragraph number not reached, palgo failed, number of paragraphs found: ",n.getAttribute("IL_CC"+d.pIndex),"minimun paragraph required: ",e.mp)},aapalgo:function(e){var t,n=[],o=[],i=$root,r=(this.settings,0),s=0,a=[],i=$root,d=i.utils,l=d.dom.element,c=parseInt(e.pn),u=parseInt(e.mp),h=this.settings,p=i.comm.settings.responses.impression,m=p.prs.a.sentences,g=e.mwfa?e.mwfa:e.mwfab,f=e.pg?parseInt(e.pg):1,v=e.mwfp?parseInt(e.mwfp):4;t=document.getElementsByTagName("p");for(var b=0;b<t.length;b++)o[b]=function(e){if("none"!==l.getStyle(t[e].parentNode,"display")&&"visible"==l.getStyle(t[e].parentNode,"visibility")&&(s=t[e].parentNode.getAttribute("data-word-count")?parseInt(t[e].parentNode.getAttribute("data-word-count")):autoPlacement.getWords(t[e].parentNode).split(/\s+/).length,t[e].parentNode.setAttribute("data-word-count",s),r=autoPlacement.getWords(t[e]).split(/\s+/).length,!(r<v))){if("none"===l.getStyle(t[e],"display")||"visible"!=l.getStyle(t[e],"visibility"))return s-=r,void t[e].parentNode.setAttribute("data-word-count",s);if(n.indexOf(t[e].parentNode)==-1)n.push(t[e].parentNode),t[e].parentNode.setAttribute("data-p-count",1);else{var o=parseInt(t[e].parentNode.getAttribute("data-p-count"))+1;t[e].parentNode.setAttribute("data-p-count",o)}return{paragraph:t[e],parentNode:t[e].parentNode,wordCount:r}}}(b);a=o.filter(function(e){return void 0!=e&&parseInt(e.parentNode.getAttribute("data-p-count"))>u&&parseInt(e.parentNode.getAttribute("data-word-count"))>parseInt(g)});var w=function(e){var t=[],n=0;if(f>0){for(;n<e.length-1&&e[n];)t.push(e[n]),n+=f;return t.splice(0,m.length)}return[e[0]]};if(a.length>=c){for(b=c-1;b<a.length;b++)if(100==l.isOnViewport(a[b].paragraph))return h.winnerWordCount=a[b].parentNode.getAttribute("data-word-count"),h.pIndex=b,a=a.splice(b),w(a);return h.winnerWordCount=a[c-1].parentNode.getAttribute("data-word-count"),h.pIndex=c-1,a=a.splice(c-1),w(a)}i.loggly.warnLog("Minimum paragraph number not reached, aapalgo failed, minimun paragraph required: ",e.mp)},classAlgo:function(e){var t,n=$root;if(e.mwfab=e.mwfa,e.mwfa=!1,"ice"===n.versionFile?e.cnfa=e.pcnfa:e.cnfa=e.mcnfa,t=document.getElementsByClassName(e.cnfa),e&&e.pn)return e.pn=parseInt(e.pn),t[e.pn]?e.pn>0?[t[e.pn-1]]:[t[e.pn]]:[t[0]]},getWords:function(e){for(var t="",n=e.childNodes.length,o=0;o<n;o++){var i=e.childNodes[o];8!=i.nodeType&&(t+=1!=i.nodeType?i.nodeValue:this.getWords(i))}return t},runMiddleAlgos:function(e){var t,n,o,i=$root,r=i.utils,s=[],a=r.dom.element,d=[],l={};if(l.capara={},!e||!e.bottomPlacementAlgo)return this.palgo(e);t=e.bottomPlacementAlgo.split(",");for(var c=0;c<t.length;c++)if(t)try{for(var u=autoPlacement[t[c].replace(/\s/g,"")](e),h=0;h<u.length;h++)l={},l.node=u[h].paragraph?u[h].paragraph:u[h],l.capara={},l&&l.node?(n={top:a.offset(l.node).top+r.dom.element.getActualHeightFixed(l.node),left:a.offset(l.node).left},o=a.isOnViewport(l.node),r.object.extend(l.capara,{successfulAlgo:t[c]},n,{isAboveFold:o}),s.push(l)):(r.array.push(d,t[c]),i.event.fire("sendClientLog",{params:{failedAlgos:t[c]}}));return s}catch(p){r.array.push(d,t[c]),l&&r.object.extend(l.capara,{failedAlgos:d}),i.event.fire("sendClientLog",{params:{failedAlgos:t[c]}})}r.object.extend(l.capara,{failedAlgos:d})},findBestContainer:function(e,t){var n,o,i,r,s,a,d,l,c=this.$root,u=c.settings,h=this.settings,p=c.utils,m=null,g=-1e3,f=p.dom,v=f.element,b=p.array.toObject(p.string.qw("body tbody table tr ul dl ol span embed marquee"),{},1);if("top"!=e&&"topM"!=e||(l=!0,g=0),t&&"legacy"!=t.bottomPlacementAlgo)return this.runMiddleAlgos(t);var w=f.findWidestNode();w.node==document.body?(d=f.document.getWidth(),a=f.document.getHeight()):(d=w.width,a=w.height),this.harvest(document.body);var y,x,C;for(n=0,o=h.candidates.length;n<o;n++)i=h.candidates[n],s=i.node,b[s.tagName.toLowerCase()]||(i.wordsCount=parseInt(v.getData(s,"iceapw"),10)||0,i.childrenCount=parseInt(v.getData(s,"iceapc"),10)||0,i.wordsCount&&(i.childrenCount||l)&&(x=(i.width/(d||1)+i.height/(a||1))/4+i.wordsCount/(h.totalWordsCount||1)-i.childrenCount/(h.totalValidNodes||1),l?(y=v.isOnViewport(s,70),C=this.isNodeHasPropertyValue(s,"position",["fixed","absolute"]),r=i.score=!C&&100==y&&v.offset(s).top>0&&i.height>10&&i.width>u.intagMinContentWidth?f.viewport.getHeight()-v.offset(s).top+x:0):r=i.score=x,"number"==c.what(r)&&r>g&&(g=r,m=i)));if(m&&!l)for(n=0,o=h.candidates.length;n<o;n++)i=h.candidates[n],i.wordsCount==m.wordsCount&&i.node!=m.node&&v.inHierarchy(i.node,m.node)&&(m=i);return h.winner=m,m?m.node:document.body},isNodeHasPropertyValue:function(e,t,n){for(var o,i=this.$root,r=i.utils,s=r.dom.element,a=e;a&&a.nodeName.toLowerCase().indexOf("document")==-1;){for(o=0;o<n.length;o++)if(s.getStyle(a,t)==n[o])return!0;a=a.parentNode}return!1},placeOnTop:function(e){for(var t,n,o,i=this.$root,r=i.utils,s=r.dom,a=s.element,d=s.viewport.getHeight(),l=0;l<e.length;l++)(t=document.getElementById(e[l]))&&(o=a.offset(t).top,o<d&&(d=o,n=t));return n},harvest:function(e){var t,n,o,i,r,s,a,d,l=this.$root,c=this.settings,u=l.utils,h=u.dom.element,p=u.timer,m=l.settings.nodeTypes;switch(c.harvesting||(c.harvesting=!0,c.stopped=!1,p.start("apHarvest"),c.candidates=[],c.firstNode=e,c.enabled=!0,c.timeLimit=1e3,c.totalWordsCount=0,c.totalValidNodes=0),c.stopped||c.timeLimit!=-1&&p.poll("apHarvest")>=c.timeLimit?c.stopped=!0:t=e.nodeType,t){case m.DOCUMENT:case m.ELEMENT:if("svganimatedstring"==l.what(e.className))break;if(e.className.indexOf(l.settings.baseClass)==-1&&e.className.indexOf("IL_AD")==-1&&h.isVisible(e)&&l.harvest.isHarvestableNode(e)){for(n=0,o=e.childNodes.length;n<o&&!c.stopped;n++)this.harvest(e.childNodes[n]);for(c.totalValidNodes++,s=e.parentNode;s&&s!=document&&"html"!=s.tagName.toLowerCase();)d=(parseInt(h.getData(s,"iceapc"),10)||0)+1,h.setData(s,"iceapc",d),s=s.parentNode;u.array.push(c.candidates,{node:e,parent:e.parentNode,width:h.getActualWidth(e),height:h.getActualHeight(e)})}break;case m.TEXT:if(c.enabled&&(r=u.string.trim(e.data).replace(/\s+/g," "),r.match(/\S/)))for(i=r.split(/\s+/).length,c.totalWordsCount+=i,s=e.parentNode;s&&s!=document&&"html"!=s.tagName.toLowerCase();)a=(parseInt(h.getData(s,"iceapw"),10)||0)+i,h.setData(s,"iceapw",a),s=s.parentNode;break;case m.COMMENT:l.harvest.checkConditionalTags(u.string.trim(e.data),c)}c.firstNode==e&&(c.harvesting=!1,p.stop("apHarvest"))}},{settings:{result:{},pIndex:1}},!1),externalTags=$root.$create("externalTags",{init:function(){var e,t,n,o=this.$root,i=o.comm.settings.responses.impression,r=o.utils,s=r.array,a=r.object,d=this.settings;if(i.messages){if("icemobile"===o.versionFile)return void delete i.messages;for(d.bidCallbackVar=(o.settings.white_label||"infolinks")+"_etag",e=0,t=i.messages.length;e<t;e++)n=i.messages[e].ads[0],n.prs=s.toObject(n.prs?n.prs.split(","):s.discard(s.discard(s.discard(s.discard(a.keys(i.prs),"s"),"o"),"x"),"d"),{},!0),i.messages[e].msg=e,n.emd&&(d.tags[n.emd]=i.messages[e])}},getProductAdSizes:function(e,t){switch(e){case"i":case"x":case"e":case"r":case"t":return[{w:300,h:250}];case"s":return[{w:728,h:90}];case"o":return[{w:728,h:90}];case"x":return[{w:728,h:90}];case"d":return[{w:728,h:90}];case"f":return[{w:t.instance.width||160,h:600}]}},setExternalTagData:function(e,t){var n=this.$root.utils.object,o=e.currentAdIndex,i=t.ads[o];if(i.content)i.content=this.$root.utils.base64.decodeBase64(i.content),e.externalTag=!0;else if(i.url||i.contentUrl)i.url&&(i.contentUrl=i.url),e.externalTag=!0;else{var r,s,a=e.externalTag,d=this.settings,l=t.ads[o].emd,c=d.tags[l],u=d.bidResponses[a];for(r=0,s=u.length;r<s;r++)u[r].emd==l&&(t.width=u[r].size.w,t.height=u[r].size.h,t.ads[o].contentUrl=u[r].result[c.ads[0].jat],n.extend(t.ads[o],c.ads[0]))}return t},getBidData:function(e){var t=this.$root,n=this.settings;if("number"!=t.what(e))return{};var o=n.bidResponses[e],i=t.utils.array.map(o,function(e){return e.emd||""}),r=t.utils.array.map(o,function(e){var o=e.result[n.tags[e.emd].ads[0].jpt];return t.utils.base64.encodeBase64(("number"==t.what(o)?o:-1).toString()).split("").reverse().join("")||""}),s=t.utils.array.map(o,function(e){return[e.size.w,e.size.h].join("*")||""});return{emd:i.join("~"),nj:r.join("~"),jsd:s.join("~")}},updateViewedTags:function(e){var t,n=this.$root,o=n.settings.hooksMap[e],i=n.helpers.getHookData(e),r=n.externalTags.settings;i.ads[o.currentAdIndex]&&(t=i.ads[o.currentAdIndex].emd),t&&(r.uemd[t]||(r.uemd[t]={}),r.uemd[t][o.prod]||(r.uemd[t][o.prod]=0),r.uemd[t][o.prod]++)},getViewedTagsParam:function(){var e,t,n=this.$root,o=this.settings,i=n.utils.object,r=[];if(!i.keys(o.uemd).length)return{};for(e in o.uemd)for(t in o.uemd[e])n.utils.array.push(r,[e,t,o.uemd[e][t]].join("!"));return{uemd:r.join("~")}}},{settings:{bidInvocation:0,bidResponses:{},bidCount:0,tags:{},bidRequestTimeout:300,uemd:{}}},!0),updater=$root.$create("updater",{handleUpdaterImpression:function(e){var t,n=this.$root,o=this.settings,i=o.instances[o.instances.length-1];return t=n.helpers.processImpressionResponse(e.data),"object"!=n.what(t)?void n.logger.error("Bad Impression response.",this.handleUpdaterImpression):(i.impression=t,void(i.impression.prs[n.products.intext.settings.prodCode]&&n.event.fire("initIntext",{updater:i})))}},{settings:{def:{interval:5,container:null,tag:null},counter:0,instances:[]}},!0);updater.bind({event:"initUpdater",listener:{init:function(){var e=this.$root,t=this.settings,n=e.helpers,o=n.getVar("updater_container")||e.comm.settings.responses.impression.behavior_imp.udco;t.interval=n.getVar("updater_interval")||e.comm.settings.responses.impression.behavior_imp.udi||t.def.interval,t.container=o?e.utils.dom.element.$(o):t.def.container,t.tag=n.getVar("updater_tag")||e.comm.settings.responses.impression.behavior_imp.udt||t.def.tag;for(var i=e.utils.dom.filterByClass(t.className,t.tag,t.container),r=0,s=i.length;r<s;r++)i[r].setAttribute("iceupdated","true");e.event.unbind("afterImpression"),e.event.bind({event:"afterImpression",listener:this.handleUpdaterImpression}),e.event.repeat("updaterContentChange",1e3*t.interval)}}}),updater.bind({event:"updaterContentChange",listener:{updaterContentChange:function(){var e,t,n,o,i=this.$root,r=i.utils,s=this.settings,a=[],d=[],l=i.utils.dom.filterByClass(s.className,s.tag,s.container);for(n=0,o=l.length;n<o;n++)"true"!=l[n].getAttribute("iceupdated")&&(i.harvest.settings.enabled=!0,e=i.harvest.getHarvestedText(l[n]),e.text.length>0&&(l[n].setAttribute("iceupdated","true"),r.array.push(a,e.text),d=r.array.concat(d,e.nodes)));a.length&&(t=s.instances[s.counter++]={nodes:d,text:a.join("P")},i.event.fire("beforeImpression",{ptxt:t.text,updater:s.counter}))}}});var inplayer=$root.$create("inplayer",{create:function(e){var t=window.ILVideo(e.container,{controls:!1,autoplay:e.autoplay,width:e.settings.mobileVideoWidth||e.settings.firstAdWidth,height:e.settings.firstAdHeight}),n=this;t.adBreakReady=!1,t.container=e.container,t.prst=e.settings,t.adsLength=t.prst.vastTags.length,t.adViewCounter=0,t.adRequestCounter=0,t.rt=e.root,t.midx=t.prst.vastTags[0].midx,t.videoPreLoadBannerDuration=e.settings.behavior.merged.videoPreLoadBannerDuration||10,t.adLoadFailDuration=e.settings.behavior.merged.alfd||10,t.postLoadDuration=t.prst.postLoadDuration||3,t.prst.isInAdMode=!1,t.prst.postLoadVideoMode=!1,t.adStarted=!1,t.prst.refreshPending=!1,t.hasShownRequiredContentDuration=!1,t.adNeverLoadedTimeout=0,t.removeClass("vjs-ad-loading"),t.ads.disableNextSnapshotRestore=!0,t.on("ready",this.ready),t.on("ended",this.ended),t.on("adserror",this.adError);var o=function(e){t.ima.addEventListener(google.ima.AdEvent.Type.PROGRESS,function(e){clearTimeout(t.adNeverLoadedTimeout)}),t.ima.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(e){t.pause()}),t.ima.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){t.play()}),t.ima.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){clearTimeout(t.adNeverLoadedTimeout),t.adBreakReady=!0,n.enableListeners(t),t.midx=t.prst.vastTags[0].midx,t.rt.event.fire("sendClientLog",{params:{hookId:t.prst.instance.hook.id,bdc:t.prst.instance.hook.bdc,midx:t.prst.vastTags[0].midx,video:!0,capara:{"vast-adLoadTime":Date.now()-t.adLoadTime}}}),t.loadFailDurationTimeout=setTimeout(function(){t.loadFailDurationTimeout&&clearTimeout(t.loadFailDurationTimeout),t.adStarted||(1==t.adRequestCounter&&setTimeout(function(){t.pause()},200),t.prst.isInAdMode=!1,t.rt.event.fire("sendClientLog",{params:{hookId:t.prst.instance.hook.id,bdc:t.prst.instance.hook.bdc,midx:t.prst.vastTags[0].midx||t.midx,video:!0,capara:{"vast-adError":"336699","vast-adErrorMessage":"VAST loaded but ad never started, ended or error"}}}),t.rt.inplayer.handleNextVast(t))},1e3*t.adLoadFailDuration)}),t.ima.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){clearTimeout(t.adNeverLoadedTimeout)}),t.ima.addEventListener(google.ima.AdErrorEvent.Type.VOLUME_CHANGED,function(e){}),t.ima.addEventListener(google.ima.AdErrorEvent.Type.VOLUME_MUTED,function(e){})},i={adSlotWidth:e.settings.firstAdWidth,adSlotHeight:e.settings.firstAdHeight,showCountdown:!1,contribAdsSettings:{timeout:8e3,prerollTimeout:8e3},autoPlayAdBreaks:!0,adsManagerLoadedCallback:o,id:t.container,vastLoadTimeout:1e3*e.settings.behavior.merged.vltm||8e3,loadVideoTimeout:1e3*e.settings.behavior.merged.vltm||8e3,adsResponse:"",controls:!1};return t.ima(i),t.ima.initializeAdDisplayContainer(),t.adLoadTime=Date.now(),t.ready(function(){t.pause(),t.muted("true"),t.ads.disableNextSnapshotRestore=!0;var e=t.getChild("bigPlayButton");e&&e.hide()}),t.startPreloadBannerHideTimer=function(){t.ads.disableNextSnapshotRestore=!0,t.prst.vastTags[0]&&(t.prst.isInAdMode=!0,t.ima.changeAdTag(""),t.ima.controller.settings.adsResponse=t.prst.vastTags[0].vastTag,t.adRequestCounter++,t.adLoadTime=Date.now(),t.handleAdLoadFail(t),t.ima.requestAds()),t.rt.event.fire("sendClientLog",{params:{hookId:t.prst.instance.hook.id,bdc:t.prst.instance.hook.bdc,midx:t.prst.vastTags[0].midx,video:!0,capara:{"vast-opportunityReached":!0}}})},t.handleAdLoadFail=function(e){e.adNeverLoadedTimeout&&clearTimeout(e.adNeverLoadedTimeout),e.adNeverLoadedTimeout=setTimeout(function(){e.prst.stopRefresh||e.adStarted||(1==e.adRequestCounter&&setTimeout(function(){e.pause()},200),e.prst.isInAdMode=!1,e.rt.event.fire("sendClientLog",{params:{hookId:e.prst.instance.hook.id,bdc:e.prst.instance.hook.bdc,midx:e.prst.vastTags[0].midx||e.midx,video:!0,capara:{"vast-adError":"446699","vast-adErrorMessage":"VAST request made but IMA never responded"}}}),e.rt.inplayer.handleNextVast(e))},1e3*e.adLoadFailDuration)},t},enableListeners:function(e){var t=e.rt;e.onAdImpression=function(t){clearTimeout(e.adNeverLoadedTimeout)},e.onAdStarted=function(t){clearTimeout(e.adNeverLoadedTimeout),clearTimeout(e.loadFailDurationTimeout),e.muted("true"),e.hasShownRequiredContentDuration=!1,e.prst.postLoadVideoMode=!1,e.adStarted=!0;var n={prod_t:e.prst.instance.hook.prod,bdc:e.prst.instance.hook.bdc,midx:e.prst.vastTags[0].midx,emd:e.prst.vastTags[0].emd,capara:JSON.stringify(e.rt.settings.capara)};0===Object.keys(e.rt.settings.capara).length&&delete n.capara,e.rt.event.fire("setVpfc",{prod:e.prst.prodCode}),e.rt.event.fire("sendAdView",{hookId:e.prst.instance.hook.id,params:n}),e.adViewCounter++,e.prst.midx=e.prst.vastTags[0].midx,e.rt.event.fire(e.prst.showVideoEvtHandler,{instance:e.prst})},e.onAdClick=function(t){clearTimeout(e.adNeverLoadedTimeout);var n=(e.rt,e.prst.instance.hook.id);n.substr(n.indexOf("_")+1,n.length)},e.onAdSkipped=function(n){clearTimeout(e.adNeverLoadedTimeout),clearTimeout(e.loadFailDurationTimeout),e.adBreakReady=!1,e.prst.isInAdMode=!1,e.adStarted=!1,t.inplayer.handleNextVast(e)},e.onAdComplete=function(n){clearTimeout(e.adNeverLoadedTimeout),clearTimeout(e.loadFailDurationTimeout),e.adBreakReady=!1,e.prst.isInAdMode=!1,e.adStarted=!1,e.rt.event.fire("sendClientLog",{params:{hookId:e.prst.instance.hook.id,bdc:e.prst.instance.hook.bdc,midx:e.prst.vastTags[0].midx,video:!0,capara:{"vast-adCompletion":!0}}}),t.inplayer.handleNextVast(e),clearTimeout(e.loadFailDurationTimeout)},e.onAdPaused=function(t){clearTimeout(e.adNeverLoadedTimeout)},e.onAdResumed=function(t){clearTimeout(e.adNeverLoadedTimeout)},e.ima.addEventListener(google.ima.AdEvent.Type.CLICK,e.onAdClick),e.ima.addEventListener(google.ima.AdEvent.Type.SKIPPED,e.onAdSkipped),e.ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,e.onAdComplete),e.ima.addEventListener(google.ima.AdEvent.Type.PAUSED,e.onAdPaused),e.ima.addEventListener(google.ima.AdEvent.Type.RESUMED,e.onAdResumed),e.ima.addEventListener(google.ima.AdEvent.Type.IMPRESSION,e.onAdImpression),e.ima.addEventListener(google.ima.AdEvent.Type.STARTED,e.onAdStarted)},ready:function(e){var t=e.target.player;t.rt;t.prst.player=t},ended:function(e){},adError:function(e){var t=e.target.player,n=t.rt;t.adBreakReady=!1,t.prst.isInAdMode=!1,t.adStarted=!1,1==t.adRequestCounter&&setTimeout(function(){t.pause()},200),t.adNeverLoadedTimeout&&clearTimeout(t.adNeverLoadedTimeout),t.loadFailDurationTimeout&&clearTimeout(t.loadFailDurationTimeout),t.rt.event.fire("sendClientLog",{params:{hookId:t.prst.instance.hook.id,bdc:t.prst.instance.hook.bdc,midx:t.prst.vastTags[0].midx||t.midx,video:!0,capara:{"vast-adError":e.data.AdErrorEvent.getError().getErrorCode(),"vast-adErrorMessage":e.data.AdErrorEvent.getError().getMessage()}}}),n.inplayer.handleNextVast(t)},handleNextVast:function(e){var t=e.rt;e.muted("true"),e.adRequestCounter<e.adsLength?e.adViewCounter>0?(e.play(),e.prst.postLoadVideoMode=!0,setTimeout(function(){e.hasShownRequiredContentDuration=!0,e.prst.postLoadVideoMode=!1,t.inplayer.updateVastTag(e)},1e3*e.postLoadDuration)):t.inplayer.updateVastTag(e):e.prst.refreshPending?e.adViewCounter>0?1==e.adsLength?(e.play(),e.prst.postLoadVideoMode=!0,setTimeout(function(){e.hasShownRequiredContentDuration=!0,e.prst.postLoadVideoMode=!1,e.prst.refreshCount<parseInt(e.prst.garl)&&!e.prst.refreshAdsCalled?t.event.fire(e.prst.resumeRefreshEvtHandler):t.inplayer.logRefreshError(e,"resumeRefreshEvtHandler after postloadduration seconds of content")},1e3*e.postLoadDuration)):(e.hasShownRequiredContentDuration=!0,e.prst.postLoadVideoMode=!1,e.prst.refreshCount<parseInt(e.prst.garl)&&!e.prst.refreshAdsCalled?t.event.fire(e.prst.resumeRefreshEvtHandler):t.inplayer.logRefreshError(e,"already seen postloadvideo RESUME REFRESH")):e.prst.refreshCount<parseInt(e.prst.garl)&&!e.prst.refreshAdsCalled?t.event.fire(e.prst.resumeRefreshEvtHandler):t.inplayer.logRefreshError(e,"we did not show any vast, refresh now"):e.adViewCounter>0&&(e.play(),e.prst.postLoadVideoMode=!0,setTimeout(function(){e.hasShownRequiredContentDuration=!0,e.prst.postLoadVideoMode=!1,e.prst.refreshPending&&(e.prst.refreshCount<parseInt(e.prst.garl)&&!e.prst.refreshAdsCalled?t.event.fire(e.prst.resumeRefreshEvtHandler):t.inplayer.logRefreshError(e,"but wait we have refresh pending go resume now"))},1e3*e.postLoadDuration))},logRefreshError:function(e,t){e.rt.event.fire("sendClientLog",{params:{hookId:e.prst.instance.hook.id,bdc:e.prst.instance.hook.bdc,midx:e.prst.vastTags[0].midx||e.midx,video:!0,capara:{refreshAdsCalled:e.prst.refreshAdsCalled,"vast-refreshError":t.toString()}}})},updateVastTag:function(e){e.rt;e.ima.getAdsManager()&&e.ima.getAdsManager().destroy(),clearTimeout(e.adNeverLoadedTimeout),e.prst.vastTags.shift(),e.prst.vastTags[0]&&(e.ima.changeAdTag(""),e.ima.controller.settings.adsResponse=e.prst.vastTags[0].vastTag,e.adRequestCounter++,e.prst.isInAdMode=!0,e.adLoadTime=Date.now(),e.handleAdLoadFail(e),e.ima.requestAds())}},{libs:["//imasdk.googleapis.com/js/sdkloader/ima3.js","//resources.infolinks.com/js/vidice/2.0/vidice.js"],styles:{},scriptsLoaded:0,stylesLoaded:0},!0);inplayer.bind({event:"preloadVideoJsLibs",listener:{preloadVideoJS:function(){var e=this.$root;if(2===this.scriptsLoaded)e.event.fire("preRenderVideoProducts");else{if(1==this.scriptsLoaded){var t=document.getElementsByClassName("vjs-tech");if(t[0]){var n=Array.from(document.getElementsByClassName("vjs-tech"));for(var o in n)n[o]&&n[o].classList&&n[o].classList.contains("vjs-tech")&&(this.libs[1]="//resources.infolinks.com/js/vidice/2.1/vidice.js")}}e.comm.loadScript(this.libs[this.scriptsLoaded],null,"preloadVideoJsLibs"),this.scriptsLoaded++}}}}),event.fire("main")}catch(ex){"object"==("undefined"==typeof $root?"undefined":_typeof($root))&&$root.logger&&$root.logger.error&&$root.logger.error("CatchAll. Exception: "+ex.message,window),"object"==("undefined"==typeof $root?"undefined":_typeof($root))&&$root.loggly&&$root.loggly.errorLog&&$root.loggly.errorLog(ex,"CatchAll. Exception: "+ex.message,window)}}();